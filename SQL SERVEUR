--
-- PostgreSQL database cluster dump
--

-- Started on 2025-05-13 23:48:57

SET default_transaction_read_only = off;

SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;

--
-- Roles
--

CREATE ROLE client_role_31;
ALTER ROLE client_role_31 WITH NOSUPERUSER INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOREPLICATION NOBYPASSRLS;
CREATE ROLE clients;
ALTER ROLE clients WITH NOSUPERUSER INHERIT NOCREATEROLE NOCREATEDB LOGIN NOREPLICATION NOBYPASSRLS PASSWORD 'SCRAM-SHA-256$4096:ycaZ1+TVXZNqPpj8RGQJEg==$Xq4GmuN8HthUieBDiRpcab/B25rlUDiSnuO+jt5LP+4=:/4KqPjbSo9VRp8DtiiesAC828wMw9RsBNtP0c30J+Sc=';
CREATE ROLE postgres;
ALTER ROLE postgres WITH SUPERUSER INHERIT CREATEROLE CREATEDB LOGIN REPLICATION BYPASSRLS PASSWORD 'SCRAM-SHA-256$4096:ToMPbk0LgYePYTEchYZFUg==$frNuEcvEOjSNWF+ithrCMI4Jg3h/uAyxymxBB+9nxXI=:VI+LGlXHscEg8m7kF9ssi9blxI6WajdDv6KGVHoggLE=';

--
-- User Configurations
--

--
-- User Config "clients"
--

ALTER ROLE clients SET search_path TO 'public';


--
-- Role memberships
--

GRANT clients TO postgres WITH INHERIT TRUE GRANTED BY postgres;






--
-- Databases
--

--
-- Database "template1" dump
--

\connect template1

--
-- PostgreSQL database dump
--

-- Dumped from database version 17.4
-- Dumped by pg_dump version 17.4

-- Started on 2025-05-13 23:48:57

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

-- Completed on 2025-05-13 23:48:57

--
-- PostgreSQL database dump complete
--

--
-- Database "postgres" dump
--

\connect postgres

--
-- PostgreSQL database dump
--

-- Dumped from database version 17.4
-- Dumped by pg_dump version 17.4

-- Started on 2025-05-13 23:48:58

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 217 (class 1255 OID 18687)
-- Name: current_user_id(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.current_user_id() RETURNS integer
    LANGUAGE plpgsql SECURITY DEFINER
    AS $$
BEGIN
  RETURN current_setting('app.current_user_id', TRUE)::INTEGER;
EXCEPTION
  WHEN OTHERS THEN
    RETURN NULL;
END;
$$;


ALTER FUNCTION public.current_user_id() OWNER TO postgres;

--
-- TOC entry 218 (class 1255 OID 18688)
-- Name: is_admin(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.is_admin() RETURNS boolean
    LANGUAGE plpgsql SECURITY DEFINER
    AS $$
BEGIN
  RETURN current_setting('app.is_admin', TRUE)::BOOLEAN;
EXCEPTION
  WHEN OTHERS THEN
    RETURN FALSE;
END;
$$;


ALTER FUNCTION public.is_admin() OWNER TO postgres;

-- Completed on 2025-05-13 23:48:58

--
-- PostgreSQL database dump complete
--

--
-- Database "property_manager" dump
--

--
-- PostgreSQL database dump
--

-- Dumped from database version 17.4
-- Dumped by pg_dump version 17.4

-- Started on 2025-05-13 23:48:58

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 7313 (class 1262 OID 16851)
-- Name: property_manager; Type: DATABASE; Schema: -; Owner: postgres
--

CREATE DATABASE property_manager WITH TEMPLATE = template0 ENCODING = 'UTF8' LOCALE_PROVIDER = libc LOCALE = 'fr-FR';


ALTER DATABASE property_manager OWNER TO postgres;

\connect property_manager

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 11 (class 2615 OID 39859)
-- Name: client_109; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA client_109;


ALTER SCHEMA client_109 OWNER TO postgres;

--
-- TOC entry 8 (class 2615 OID 44679)
-- Name: client_129; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA client_129;


ALTER SCHEMA client_129 OWNER TO postgres;

--
-- TOC entry 6 (class 2615 OID 27263)
-- Name: template; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA template;


ALTER SCHEMA template OWNER TO postgres;

--
-- TOC entry 2 (class 3079 OID 19479)
-- Name: pgcrypto; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS pgcrypto WITH SCHEMA public;


--
-- TOC entry 7316 (class 0 OID 0)
-- Dependencies: 2
-- Name: EXTENSION pgcrypto; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION pgcrypto IS 'cryptographic functions';


--
-- TOC entry 619 (class 1255 OID 45433)
-- Name: after_ai_usage(); Type: FUNCTION; Schema: client_109; Owner: postgres
--

CREATE FUNCTION client_109.after_ai_usage() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                -- Incrémenter le compteur dans public.users
                UPDATE public.users
                SET request_count = request_count + 1
                WHERE id = NEW.user_id;
                
                RETURN NEW;
            END;
            $$;


ALTER FUNCTION client_109.after_ai_usage() OWNER TO postgres;

--
-- TOC entry 618 (class 1255 OID 45432)
-- Name: consume_ai_token(integer); Type: FUNCTION; Schema: client_109; Owner: postgres
--

CREATE FUNCTION client_109.consume_ai_token(p_user_id integer) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
            DECLARE
                v_token_record RECORD;
            BEGIN
                -- Vérifier si l'utilisateur a des tokens et récupérer l'ID
                SELECT id, tokens INTO v_token_record
                FROM client_109.ai_tokens
                WHERE user_id = p_user_id
                AND (expires_at IS NULL OR expires_at > NOW())
                ORDER BY expires_at DESC NULLS LAST
                LIMIT 1;
                
                -- S'il n'a pas de tokens
                IF v_token_record IS NULL OR v_token_record.tokens <= 0 THEN
                    RETURN FALSE;
                END IF;
                
                -- Consommer un token
                UPDATE client_109.ai_tokens
                SET tokens = tokens - 1
                WHERE id = v_token_record.id;
                
                RETURN TRUE;
            END;
            $$;


ALTER FUNCTION client_109.consume_ai_token(p_user_id integer) OWNER TO postgres;

--
-- TOC entry 637 (class 1255 OID 45450)
-- Name: sync_ai_usage_to_request_count(); Type: FUNCTION; Schema: client_109; Owner: postgres
--

CREATE FUNCTION client_109.sync_ai_usage_to_request_count() RETURNS trigger
    LANGUAGE plpgsql
    AS $_$
DECLARE
  v_user_id INTEGER;
  v_count INTEGER;
BEGIN
  -- Récupérer l'ID utilisateur et s'assurer qu'il est valide
  v_user_id := NEW.user_id;
  
  IF v_user_id IS NULL THEN
    RAISE EXCEPTION 'ID utilisateur non valide dans ai_usage';
  END IF;
  
  -- Calculer le nombre total d'entrées dans ai_usage pour cet utilisateur
  EXECUTE 'SELECT COUNT(*) FROM client_109.ai_usage WHERE user_id = $1' 
    INTO v_count
    USING v_user_id;
  
  -- Mettre à jour le compteur dans public.users
  UPDATE public.users
  SET request_count = v_count,
      updated_at = NOW()
  WHERE id = v_user_id;
  
  RETURN NEW;
END;
$_$;


ALTER FUNCTION client_109.sync_ai_usage_to_request_count() OWNER TO postgres;

--
-- TOC entry 617 (class 1255 OID 45430)
-- Name: after_ai_usage(); Type: FUNCTION; Schema: client_129; Owner: postgres
--

CREATE FUNCTION client_129.after_ai_usage() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
            BEGIN
                -- Incrémenter le compteur dans public.users
                UPDATE public.users
                SET request_count = request_count + 1
                WHERE id = NEW.user_id;
                
                RETURN NEW;
            END;
            $$;


ALTER FUNCTION client_129.after_ai_usage() OWNER TO postgres;

--
-- TOC entry 616 (class 1255 OID 45429)
-- Name: consume_ai_token(integer); Type: FUNCTION; Schema: client_129; Owner: postgres
--

CREATE FUNCTION client_129.consume_ai_token(p_user_id integer) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
            DECLARE
                v_token_record RECORD;
            BEGIN
                -- Vérifier si l'utilisateur a des tokens et récupérer l'ID
                SELECT id, tokens INTO v_token_record
                FROM client_129.ai_tokens
                WHERE user_id = p_user_id
                AND (expires_at IS NULL OR expires_at > NOW())
                ORDER BY expires_at DESC NULLS LAST
                LIMIT 1;
                
                -- S'il n'a pas de tokens
                IF v_token_record IS NULL OR v_token_record.tokens <= 0 THEN
                    RETURN FALSE;
                END IF;
                
                -- Consommer un token
                UPDATE client_129.ai_tokens
                SET tokens = tokens - 1
                WHERE id = v_token_record.id;
                
                RETURN TRUE;
            END;
            $$;


ALTER FUNCTION client_129.consume_ai_token(p_user_id integer) OWNER TO postgres;

--
-- TOC entry 601 (class 1255 OID 44678)
-- Name: add_user_to_client(text, integer, text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.add_user_to_client(p_client_schema text, p_public_user_id integer, p_client_role text DEFAULT 'user'::text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$
DECLARE
    v_id integer;
    v_query text;
BEGIN
    -- Vérifier que l'utilisateur existe dans public.users
    IF NOT EXISTS (SELECT 1 FROM public.users WHERE id = p_public_user_id) THEN
        RAISE EXCEPTION 'L''utilisateur avec ID % n''existe pas dans public.users', p_public_user_id;
    END IF;

    -- Insérer l'utilisateur dans le schéma client
    v_query := format('
        INSERT INTO %I.users (public_user_id, client_role, created_at, updated_at)
        VALUES ($1, $2, NOW(), NOW())
        RETURNING id', p_client_schema);
    
    EXECUTE v_query INTO v_id USING p_public_user_id, p_client_role;
    
    RETURN v_id;
END;
$_$;


ALTER FUNCTION public.add_user_to_client(p_client_schema text, p_public_user_id integer, p_client_role text) OWNER TO postgres;

--
-- TOC entry 608 (class 1255 OID 45396)
-- Name: after_user_insert_function(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.after_user_insert_function() RETURNS trigger
    LANGUAGE plpgsql
    AS $_$
DECLARE
    v_schema record;
    v_role text;
BEGIN
    -- Si l'utilisateur est rattaché à un compte parent spécifique
    IF NEW.parent_account_id IS NOT NULL THEN
        -- Trouver tous les schémas client associés à ce compte parent
        FOR v_schema IN 
            SELECT schema_name FROM public.client_schemas 
            WHERE owner_account_id = NEW.parent_account_id
        LOOP
            -- Déterminer le rôle de l'utilisateur dans ce client
            IF NEW.role = 'admin' OR NEW.role = 'superadmin' THEN
                v_role := 'admin';
            ELSE
                v_role := 'user';
            END IF;
            
            -- Ajouter l'utilisateur à ce schéma client
            PERFORM public.add_user_to_client(v_schema.schema_name, NEW.id, v_role);
            RAISE NOTICE 'Utilisateur ID % automatiquement ajouté au schéma % avec le rôle %', 
                NEW.id, v_schema.schema_name, v_role;
        END LOOP;
    END IF;
    
    -- Si c'est un admin ou superadmin, l'ajouter à tous les schémas
    IF NEW.role = 'admin' OR NEW.role = 'superadmin' THEN
        FOR v_schema IN 
            SELECT nspname AS schema_name
            FROM pg_namespace
            WHERE nspname LIKE 'client_%'
        LOOP
            -- Vérifier si l'utilisateur existe déjà dans ce client
            IF NOT EXISTS (
                SELECT 1 
                FROM information_schema.tables 
                WHERE table_schema = v_schema.schema_name 
                AND table_name = 'users'
            ) THEN
                CONTINUE; -- Table n'existe pas dans ce schéma, passer au suivant
            END IF;
            
            EXECUTE format('
                SELECT 1 FROM %I.users 
                WHERE public_user_id = $1', v_schema.schema_name)
            USING NEW.id;
            
            IF NOT FOUND THEN
                -- Ajouter l'administrateur à ce client
                PERFORM public.add_user_to_client(v_schema.schema_name, NEW.id, 'admin');
                RAISE NOTICE 'Admin ID % automatiquement ajouté au schéma %', 
                    NEW.id, v_schema.schema_name;
            END IF;
        END LOOP;
    END IF;
    
    RETURN NEW;
END;
$_$;


ALTER FUNCTION public.after_user_insert_function() OWNER TO postgres;

--
-- TOC entry 564 (class 1255 OID 41190)
-- Name: apply_schema_changes(text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.apply_schema_changes(schema_name text) RETURNS void
    LANGUAGE plpgsql
    AS $_$
DECLARE
    form_link record;
BEGIN
    -- Vérifier si la table forms existe
    EXECUTE format('
        CREATE TABLE IF NOT EXISTS %I.forms (
            id SERIAL PRIMARY KEY,
            user_id INTEGER NOT NULL,
            title VARCHAR(100) NOT NULL,
            description TEXT,
            fields JSONB NOT NULL,
            created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW(),
            updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW()
        )', schema_name);
    
    -- Vérifier si la table form_responses existe
    EXECUTE format('
        CREATE TABLE IF NOT EXISTS %I.form_responses (
            id SERIAL PRIMARY KEY,
            form_id INTEGER NOT NULL,
            response_data JSONB NOT NULL,
            ip_address TEXT,
            user_agent TEXT,
            created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW()
        )', schema_name);
    
    -- 1. Migration: Copier les formulaires existants depuis links vers forms
    FOR form_link IN
        EXECUTE format('
            SELECT l.id, l.title, l.form_definition, 
                   COALESCE(l.user_id, (SELECT user_id FROM %I.link_profiles WHERE id = l.profile_id)) as user_id
            FROM %I.links l
            WHERE l.type = ''form'' 
            AND NOT EXISTS (SELECT 1 FROM %I.forms f WHERE f.id = l.id)
        ', schema_name, schema_name, schema_name)
    LOOP
        -- Insérer dans la table forms
        EXECUTE format('
            INSERT INTO %I.forms (id, user_id, title, description, fields, created_at, updated_at)
            VALUES ($1, $2, $3, $4, $5, NOW(), NOW())
            ON CONFLICT (id) DO UPDATE SET
                title = $3,
                fields = $5,
                updated_at = NOW()
        ', schema_name)
        USING 
            form_link.id, 
            form_link.user_id, 
            form_link.title, 
            'Formulaire migré depuis links', 
            COALESCE(form_link.form_definition, '[]'::jsonb);
    END LOOP;
    
    -- 2. Commentaires explicatifs dans le schéma
    EXECUTE format('COMMENT ON TABLE %I.forms IS ''Formulaires créés indépendamment des liens''', schema_name);
    EXECUTE format('COMMENT ON TABLE %I.form_responses IS ''Réponses soumises aux formulaires''', schema_name);
    
    -- 3. Créer des index pour améliorer les performances
    EXECUTE format('CREATE INDEX IF NOT EXISTS idx_%I_forms_user_id ON %I.forms (user_id)', 
                   schema_name, schema_name);
    EXECUTE format('CREATE INDEX IF NOT EXISTS idx_%I_form_responses_form_id ON %I.form_responses (form_id)', 
                   schema_name, schema_name);
    
    -- 4. Nettoyer les anciens liens d'association qui ne sont plus nécessaires (optionnel)
    -- EXECUTE format('DROP TABLE IF EXISTS %I.link_forms', schema_name);
    
    RAISE NOTICE 'Schema % migré avec succès', schema_name;
END;
$_$;


ALTER FUNCTION public.apply_schema_changes(schema_name text) OWNER TO postgres;

--
-- TOC entry 627 (class 1255 OID 44589)
-- Name: calculate_all_clients_storage(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.calculate_all_clients_storage() RETURNS void
    LANGUAGE plpgsql
    AS $$
DECLARE
    schema_record RECORD;
BEGIN
    FOR schema_record IN 
        SELECT nspname FROM pg_namespace WHERE nspname LIKE 'client_%'
    LOOP
        PERFORM public.calculate_storage_usage_details(schema_record.nspname);
    END LOOP;
END;
$$;


ALTER FUNCTION public.calculate_all_clients_storage() OWNER TO postgres;

--
-- TOC entry 603 (class 1255 OID 44462)
-- Name: calculate_client_storage_usage(text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.calculate_client_storage_usage(p_client_schema text) RETURNS bigint
    LANGUAGE plpgsql
    AS $$
DECLARE
    total_size BIGINT := 0;
    doc_size BIGINT := 0;
    img_size BIGINT := 0;
    attach_size BIGINT := 0;
    other_size BIGINT := 0;
    user_id INTEGER;
BEGIN
    -- Extraire l'ID utilisateur du nom du schéma
    user_id := SUBSTRING(p_client_schema FROM 'client_([0-9]+)')::INTEGER;
    
    -- Calculer l'espace utilisé par les documents (s'ils existent)
    BEGIN
        EXECUTE format('
            SELECT COALESCE(SUM(file_size), 0)
            FROM %I.documents
            WHERE archived = false
        ', p_client_schema) INTO doc_size;
    EXCEPTION WHEN OTHERS THEN
        doc_size := 0;
    END;
    
    -- Calculer l'espace utilisé par les images (s'ils existent)
    BEGIN
        EXECUTE format('
            SELECT COALESCE(SUM(file_size), 0)
            FROM %I.property_images
        ', p_client_schema) INTO img_size;
    EXCEPTION WHEN OTHERS THEN
        img_size := 0;
    END;
    
    -- Calculer l'espace utilisé par les contrats (s'ils existent)
    BEGIN
        EXECUTE format('
            SELECT COALESCE(SUM(file_size), 0)
            FROM %I.contracts
            WHERE archived = false
        ', p_client_schema) INTO attach_size;
    EXCEPTION WHEN OTHERS THEN
        attach_size := 0;
    END;
    
    -- Calculer l'espace utilisé par les autres fichiers (rapports de visite, etc.)
    BEGIN
        EXECUTE format('
            SELECT COALESCE(SUM(file_size), 0)
            FROM %I.visit_reports
        ', p_client_schema) INTO other_size;
    EXCEPTION WHEN OTHERS THEN
        other_size := 0;
    END;
    
    -- Calculer le total
    total_size := doc_size + img_size + attach_size + other_size;
    
    -- Créer la table storage_management si elle n'existe pas dans ce schéma
    BEGIN
        EXECUTE format('
            SELECT 1 FROM %I.storage_management LIMIT 1
        ', p_client_schema);
    EXCEPTION WHEN OTHERS THEN
        -- La table n'existe pas, la créer
        EXECUTE format('
            CREATE TABLE IF NOT EXISTS %I.storage_management (
                id SERIAL PRIMARY KEY,
                total_used BIGINT DEFAULT 0,
                last_calculation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                storage_categories JSONB DEFAULT ''{"documents": 0, "images": 0, "attachments": 0, "other": 0}''::jsonb,
                cleanup_history JSONB DEFAULT ''[]''::jsonb,
                user_id INTEGER NOT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        ', p_client_schema);
        
        -- Insérer la première entrée
        EXECUTE format('
            INSERT INTO %I.storage_management (user_id, total_used, created_at, updated_at)
            VALUES (%L, 0, NOW(), NOW())
        ', p_client_schema, user_id);
    END;
    
    -- Mettre à jour la table storage_management
    EXECUTE format('
        UPDATE %I.storage_management 
        SET total_used = %L,
            storage_categories = jsonb_build_object(
                ''documents'', %L,
                ''images'', %L,
                ''attachments'', %L,
                ''other'', %L
            ),
            last_calculation = NOW(),
            updated_at = NOW()
        WHERE user_id = %L
    ', p_client_schema, total_size, doc_size, img_size, attach_size, other_size, user_id);
    
    -- Mettre à jour aussi la table users dans public
    EXECUTE format('
        UPDATE public.users 
        SET storage_used = %L,
            updated_at = NOW()
        WHERE id = %L
    ', total_size, user_id);
    
    RETURN total_size;
END;
$$;


ALTER FUNCTION public.calculate_client_storage_usage(p_client_schema text) OWNER TO postgres;

--
-- TOC entry 579 (class 1255 OID 44546)
-- Name: calculate_efficient_client_storage(text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.calculate_efficient_client_storage(p_client_schema text) RETURNS bigint
    LANGUAGE plpgsql
    AS $$
DECLARE
    total_size BIGINT := 0;
    file_storage_size BIGINT := 0;
    schema_size BIGINT := 0;
    user_id INTEGER;
BEGIN
    -- Extraire l'ID utilisateur du nom du schéma
    user_id := SUBSTRING(p_client_schema FROM 'client_([0-9]+)')::INTEGER;
    
    -- 1. Approche simplifiée pour les fichiers: une seule requête qui vérifie toutes les tables pertinentes
    EXECUTE format('
        SELECT COALESCE(SUM(file_size), 0)
        FROM (
            SELECT file_size FROM %I.documents WHERE deleted_at IS NULL
            UNION ALL
            SELECT file_size FROM %I.transaction_attachments WHERE EXISTS (
                SELECT 1 FROM information_schema.tables WHERE table_schema = %L AND table_name = ''transaction_attachments''
            )
        ) AS files
    ', p_client_schema, p_client_schema, p_client_schema) INTO file_storage_size;
    
    -- 2. Calculer directement la taille du schéma avec une seule requête PostgreSQL
    EXECUTE format('
        SELECT SUM(pg_total_relation_size(quote_ident(schemaname) || ''.'' || quote_ident(tablename)))
        FROM pg_tables
        WHERE schemaname = %L
    ', p_client_schema) INTO schema_size;
    
    IF schema_size IS NULL THEN schema_size := 0; END IF;
    
    -- Calculer le total (fichiers + taille du schéma)
    total_size := file_storage_size + schema_size;
    
    -- 3. Mettre à jour en une seule opération les deux tables
    -- Mettre à jour storage_management
    EXECUTE format('
        INSERT INTO %I.storage_management (user_id, total_used, storage_categories, last_calculation, updated_at)
        VALUES (%L, %L, jsonb_build_object(
            ''documents'', %L,
            ''database'', %L,
            ''total'', %L
        ), NOW(), NOW())
        ON CONFLICT (user_id) DO UPDATE SET
            total_used = %L,
            storage_categories = jsonb_build_object(
                ''documents'', %L,
                ''database'', %L,
                ''total'', %L
            ),
            last_calculation = NOW(),
            updated_at = NOW()
    ', p_client_schema, user_id, total_size, file_storage_size, schema_size, total_size, 
       total_size, file_storage_size, schema_size, total_size);
    
    -- Mettre à jour la table users dans public
    EXECUTE format('
        UPDATE public.users 
        SET storage_used = %L,
            updated_at = NOW()
        WHERE id = %L
    ', total_size, user_id);
    
    RETURN total_size;
END;
$$;


ALTER FUNCTION public.calculate_efficient_client_storage(p_client_schema text) OWNER TO postgres;

--
-- TOC entry 625 (class 1255 OID 44587)
-- Name: calculate_storage_usage_details(text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.calculate_storage_usage_details(p_client_schema text) RETURNS jsonb
    LANGUAGE plpgsql
    AS $$
DECLARE
    result JSONB;
    v_user_id INTEGER;
    v_table_name TEXT;
    v_table_size BIGINT;
    v_tables_details JSONB := '[]';
    v_total_db_size BIGINT := 0;
    v_uploads_size BIGINT := 0;
    v_total_size BIGINT := 0;
BEGIN
    -- Extraire l'ID utilisateur du schéma
    v_user_id := SUBSTRING(p_client_schema FROM 'client_([0-9]+)')::INTEGER;

    -- Calculer la taille de chaque table dans le schéma client
    FOR v_table_name, v_table_size IN
        EXECUTE format('
            SELECT 
                c.relname::TEXT, 
                pg_total_relation_size(c.oid)
            FROM pg_class c
            JOIN pg_namespace n ON n.oid = c.relnamespace
            WHERE n.nspname = %L
            AND c.relkind = ''r''
        ', p_client_schema)
    LOOP
        -- Ajouter la taille de cette table au total
        v_total_db_size := v_total_db_size + v_table_size;
        
        -- Ajouter les détails de cette table au résultat JSON
        v_tables_details := v_tables_details || jsonb_build_object(
            'table_name', v_table_name,
            'size_bytes', v_table_size,
            'size_formatted', format_bytes(v_table_size)
        );
    END LOOP;

    -- Tenter de récupérer la taille du répertoire uploads du client depuis storage_management
    BEGIN
        EXECUTE format('
            SELECT COALESCE((storage_categories->>''uploads_directory'')::BIGINT, 0)
            FROM %I.storage_management
            WHERE user_id = %L
        ', p_client_schema, v_user_id) INTO v_uploads_size;
    EXCEPTION WHEN OTHERS THEN
        v_uploads_size := 0;
    END;

    -- Calculer la taille totale (BD + uploads)
    v_total_size := v_total_db_size + v_uploads_size;

    -- Construire le résultat final
    result := jsonb_build_object(
        'user_id', v_user_id,
        'schema_name', p_client_schema,
        'database_size', jsonb_build_object(
            'bytes', v_total_db_size,
            'formatted', format_bytes(v_total_db_size)
        ),
        'uploads_size', jsonb_build_object(
            'bytes', v_uploads_size,
            'formatted', format_bytes(v_uploads_size)
        ),
        'total_size', jsonb_build_object(
            'bytes', v_total_size,
            'formatted', format_bytes(v_total_size)
        ),
        'tables', v_tables_details,
        'calculated_at', NOW()
    );

    -- Mettre à jour le storage_management dans le schéma client
    BEGIN
        EXECUTE format('
            INSERT INTO %I.storage_management (
                user_id, 
                total_used, 
                storage_categories,
                last_calculation
            )
            VALUES (
                %L,
                %L,
                %L,
                NOW()
            )
            ON CONFLICT (user_id) DO UPDATE 
            SET 
                total_used = %L,
                storage_categories = %L,
                last_calculation = NOW(),
                updated_at = NOW()
        ', p_client_schema, v_user_id, v_total_size, 
           jsonb_build_object(
               'database', v_total_db_size,
               'uploads', v_uploads_size,
               'total', v_total_size,
               'tables', v_tables_details
           ),
           v_total_size,
           jsonb_build_object(
               'database', v_total_db_size,
               'uploads', v_uploads_size,
               'total', v_total_size,
               'tables', v_tables_details
           )
        );
    EXCEPTION WHEN OTHERS THEN
        -- Si la table storage_management n'existe pas, la créer
        EXECUTE format('
            CREATE TABLE IF NOT EXISTS %I.storage_management (
                id SERIAL PRIMARY KEY,
                user_id INTEGER NOT NULL UNIQUE,
                total_used BIGINT DEFAULT 0,
                storage_categories JSONB DEFAULT ''{}''::jsonb,
                last_calculation TIMESTAMP DEFAULT NOW(),
                cleanup_history JSONB DEFAULT ''[]''::jsonb,
                created_at TIMESTAMP DEFAULT NOW(),
                updated_at TIMESTAMP DEFAULT NOW()
            )
        ', p_client_schema);
        
        -- Réessayer l'insertion
        EXECUTE format('
            INSERT INTO %I.storage_management (
                user_id, 
                total_used, 
                storage_categories,
                last_calculation
            )
            VALUES (
                %L,
                %L,
                %L,
                NOW()
            )
        ', p_client_schema, v_user_id, v_total_size, 
           jsonb_build_object(
               'database', v_total_db_size,
               'uploads', v_uploads_size,
               'total', v_total_size,
               'tables', v_tables_details
           )
        );
    END;

    -- Mettre à jour la table users dans public
    UPDATE public.users
    SET storage_used = v_total_size,
        storage_last_calculated = NOW(),
        updated_at = NOW()
    WHERE id = v_user_id;

    RETURN result;
END;
$$;


ALTER FUNCTION public.calculate_storage_usage_details(p_client_schema text) OWNER TO postgres;

--
-- TOC entry 613 (class 1255 OID 44485)
-- Name: calculate_total_client_storage(text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.calculate_total_client_storage(p_client_schema text) RETURNS bigint
    LANGUAGE plpgsql
    AS $$
DECLARE
    total_size BIGINT := 0;
    file_storage_size BIGINT := 0;
    data_storage_size BIGINT := 0;
    schema_size BIGINT := 0;
    table_name TEXT;
    user_id INTEGER;
BEGIN
    -- Extraire l'ID utilisateur du nom du schéma
    user_id := SUBSTRING(p_client_schema FROM 'client_([0-9]+)')::INTEGER;
    
    -- 1. Calculer la taille totale des fichiers uploadés (documents, images, etc.)
    BEGIN
        EXECUTE format('
            SELECT COALESCE(SUM(file_size), 0)
            FROM (
                -- Documents principaux
                SELECT file_size FROM %I.documents
                UNION ALL
                -- Pièces jointes des transactions
                SELECT file_size FROM %I.transaction_attachments
                UNION ALL
                -- Autres tables avec file_size (ajouter selon besoin)
                SELECT size_bytes AS file_size FROM %I.storage_usage
                WHERE EXISTS (SELECT 1 FROM information_schema.columns 
                              WHERE table_schema = %L AND table_name = ''storage_usage'' 
                              AND column_name = ''deleted_at'')
                    AND deleted_at IS NULL
                    OR NOT EXISTS (SELECT 1 FROM information_schema.columns 
                                  WHERE table_schema = %L AND table_name = ''storage_usage'' 
                                  AND column_name = ''deleted_at'')
            ) AS all_files
        ', p_client_schema, p_client_schema, p_client_schema, p_client_schema, p_client_schema) INTO file_storage_size;
    EXCEPTION WHEN OTHERS THEN
        RAISE NOTICE 'Erreur lors du calcul des fichiers: %', SQLERRM;
        file_storage_size := 0;
    END;

    -- 2. Calculer directement la taille totale du schéma
    BEGIN
        EXECUTE format('
            SELECT SUM(pg_total_relation_size(quote_ident(schemaname) || ''.'' || quote_ident(tablename)))
            FROM pg_tables
            WHERE schemaname = %L
        ', p_client_schema) INTO schema_size;
        
        -- Utiliser cette valeur comme taille totale
        total_size := schema_size + file_storage_size;
    EXCEPTION WHEN OTHERS THEN
        RAISE NOTICE 'Erreur lors du calcul de la taille du schéma: %', SQLERRM;
        schema_size := 0;
        total_size := file_storage_size;
    END;

    -- 3. S'assurer que la table storage_management existe
    BEGIN
        EXECUTE format('
            SELECT 1 FROM %I.storage_management LIMIT 1
        ', p_client_schema);
    EXCEPTION WHEN OTHERS THEN
        -- La table n'existe pas, la créer
        EXECUTE format('
            CREATE TABLE IF NOT EXISTS %I.storage_management (
                id SERIAL PRIMARY KEY,
                total_used BIGINT DEFAULT 0,
                last_calculation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                storage_categories JSONB DEFAULT ''{"documents": 0, "images": 0, "attachments": 0, "other": 0, "database": 0}''::jsonb,
                cleanup_history JSONB DEFAULT ''[]''::jsonb,
                user_id INTEGER NOT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        ', p_client_schema);
        
        -- Insérer la première entrée
        EXECUTE format('
            INSERT INTO %I.storage_management (user_id, total_used, created_at, updated_at)
            VALUES (%L, 0, NOW(), NOW())
        ', p_client_schema, user_id);
    END;
    
    -- Mettre à jour la table storage_management avec la taille totale et une répartition par catégories
    EXECUTE format('
        UPDATE %I.storage_management 
        SET total_used = %L,
            storage_categories = jsonb_build_object(
                ''documents'', %L,
                ''database'', %L,
                ''total'', %L
            ),
            last_calculation = NOW(),
            updated_at = NOW()
        WHERE user_id = %L
    ', p_client_schema, total_size, file_storage_size, schema_size, total_size, user_id);
    
    -- Mettre à jour aussi la table users dans public
    EXECUTE format('
        UPDATE public.users 
        SET storage_used = %L,
            updated_at = NOW()
        WHERE id = %L
    ', total_size, user_id);
    
    RETURN total_size;
END;
$$;


ALTER FUNCTION public.calculate_total_client_storage(p_client_schema text) OWNER TO postgres;

--
-- TOC entry 614 (class 1255 OID 45425)
-- Name: can_use_ai_service(integer, text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.can_use_ai_service(p_user_id integer, p_schema_name text DEFAULT NULL::text) RETURNS boolean
    LANGUAGE plpgsql
    AS $_$
DECLARE
    v_count INTEGER;
    v_limit INTEGER;
    v_tokens INTEGER;
    v_token_id INTEGER;
    v_query TEXT;
    v_schema TEXT;
BEGIN
    -- Déterminer le schéma à utiliser
    v_schema := COALESCE(p_schema_name, 
                         (SELECT schema_name FROM public.client_schemas 
                          WHERE owner_account_id = (SELECT parent_account_id FROM public.users WHERE id = p_user_id)
                          LIMIT 1));
    
    -- Si aucun schéma trouvé, utiliser template comme fallback
    IF v_schema IS NULL THEN
        v_schema := 'template';
    END IF;
    
    -- Récupérer les limites actuelles
    SELECT request_count, request_limit 
    INTO v_count, v_limit
    FROM public.users
    WHERE id = p_user_id;
    
    -- Si l'utilisateur a dépassé sa limite
    IF v_count >= v_limit THEN
        -- Construire et exécuter la requête pour vérifier les tokens
        v_query := format('
            SELECT id, tokens 
            FROM %I.ai_tokens 
            WHERE user_id = $1
            AND (expires_at IS NULL OR expires_at > NOW())
            ORDER BY expires_at DESC NULLS LAST
            LIMIT 1', v_schema);
        
        EXECUTE v_query INTO v_token_id, v_tokens USING p_user_id;
        
        -- S'il n'a pas de tokens ou 0 token
        IF v_tokens IS NULL OR v_tokens <= 0 THEN
            RETURN FALSE; -- Bloquer l'utilisateur
        ELSE
            -- Consommer un token et permettre la requête
            v_query := format('
                UPDATE %I.ai_tokens
                SET tokens = tokens - 1
                WHERE id = $1', v_schema);
            
            EXECUTE v_query USING v_token_id;
            RETURN TRUE;
        END IF;
    END IF;
    
    -- Si la limite n'est pas dépassée, autoriser
    RETURN TRUE;
END;
$_$;


ALTER FUNCTION public.can_use_ai_service(p_user_id integer, p_schema_name text) OWNER TO postgres;

--
-- TOC entry 597 (class 1255 OID 19907)
-- Name: check_auth(text, text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.check_auth(p_username text, p_password text) RETURNS TABLE(id integer, username text, role text, full_name text, email text, authenticated boolean)
    LANGUAGE plpgsql SECURITY DEFINER
    AS $$
      DECLARE
        v_user RECORD;
        v_valid BOOLEAN;
      BEGIN
        -- Trouver l'utilisateur
        SELECT * INTO v_user FROM users WHERE username = p_username;
        
        -- Vérifie si l'utilisateur existe
        IF v_user.id IS NULL THEN
          RETURN QUERY SELECT 
            NULL::INTEGER, p_username, NULL::TEXT, NULL::TEXT, NULL::TEXT, FALSE;
          RETURN;
        END IF;
        
        -- Mode développement: accepter toujours testuser/testpass123
        IF p_username = 'testuser' AND p_password = 'testpass123' THEN
          v_valid := TRUE;
        ELSE 
          -- Vérifier le mot de passe (utiliser crypt pour bcrypt)
          SELECT EXISTS (
            SELECT 1 FROM users 
            WHERE username = p_username AND password = crypt(p_password, password)
          ) INTO v_valid;
          
          -- Fallback: test direct sur le mot de passe hashé (mode dev)
          IF NOT v_valid AND p_username = 'testuser' THEN
            UPDATE users SET password = crypt('testpass123', gen_salt('bf')) WHERE username = 'testuser';
            v_valid := TRUE;
          END IF;
        END IF;
        
        RETURN QUERY SELECT 
          v_user.id, 
          v_user.username, 
          COALESCE(v_user.role, 'clients')::TEXT,
          COALESCE(v_user.full_name, '')::TEXT, 
          COALESCE(v_user.email, '')::TEXT,
          v_valid;
          
        RETURN;
      END;
      $$;


ALTER FUNCTION public.check_auth(p_username text, p_password text) OWNER TO postgres;

--
-- TOC entry 611 (class 1255 OID 45415)
-- Name: check_user_request_limit(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.check_user_request_limit(p_user_id integer) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_count INTEGER;
    v_limit INTEGER;
BEGIN
    SELECT request_count, request_limit 
    INTO v_count, v_limit
    FROM public.users
    WHERE id = p_user_id;
    
    RETURN v_count < v_limit;
END;
$$;


ALTER FUNCTION public.check_user_request_limit(p_user_id integer) OWNER TO postgres;

--
-- TOC entry 633 (class 1255 OID 32588)
-- Name: clone_schema(text, text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.clone_schema(source_schema text, dest_schema text) RETURNS void
    LANGUAGE plpgsql
    AS $$
DECLARE
    object record;
    seq_record record;
BEGIN
    -- 1. Créer le schéma de destination s'il n'existe pas
    EXECUTE 'CREATE SCHEMA IF NOT EXISTS ' || quote_ident(dest_schema);
    
    -- 2. D'abord créer toutes les séquences
    FOR seq_record IN
        SELECT sequencename 
        FROM pg_sequences
        WHERE schemaname = source_schema
    LOOP
        EXECUTE 'CREATE SEQUENCE ' || quote_ident(dest_schema) || '.' || quote_ident(seq_record.sequencename);
    END LOOP;
    
    -- 3. Ensuite créer toutes les tables
    FOR object IN 
        SELECT table_name 
        FROM information_schema.tables 
        WHERE table_schema = source_schema
        AND table_type = 'BASE TABLE'
    LOOP
        EXECUTE 'CREATE TABLE ' || quote_ident(dest_schema) || '.' || quote_ident(object.table_name) || 
                ' (LIKE ' || quote_ident(source_schema) || '.' || quote_ident(object.table_name) || ' INCLUDING ALL)';
    END LOOP;
    
    -- 4. Configurer les relations séquence-colonne
    FOR object IN
        SELECT 
            table_name, 
            column_name, 
            pg_get_serial_sequence(source_schema || '.' || table_name, column_name) as seq_name
        FROM information_schema.columns
        WHERE table_schema = source_schema
        AND column_default LIKE 'nextval%'
    LOOP
        IF object.seq_name IS NOT NULL THEN
            -- Extraire le nom de la séquence sans le schéma
            DECLARE
                seq_name_only text;
            BEGIN
                seq_name_only := replace(object.seq_name, source_schema || '.', '');
                
                -- Lier la séquence à la colonne
                EXECUTE 'ALTER TABLE ' || quote_ident(dest_schema) || '.' || quote_ident(object.table_name) || 
                        ' ALTER COLUMN ' || quote_ident(object.column_name) || 
                        ' SET DEFAULT nextval(''' || quote_ident(dest_schema) || '.' || quote_ident(seq_name_only) || ''')';
            END;
        END IF;
    END LOOP;
END;
$$;


ALTER FUNCTION public.clone_schema(source_schema text, dest_schema text) OWNER TO postgres;

--
-- TOC entry 622 (class 1255 OID 45502)
-- Name: create_client_schema(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.create_client_schema(p_user_id integer) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
    DECLARE
        schema_name text := 'client_' || p_user_id;
    BEGIN
        -- Vérifier si le schéma existe déjà
        IF EXISTS (SELECT 1 FROM information_schema.schemata WHERE schema_name = schema_name) THEN
            RAISE NOTICE 'Le schéma % existe déjà', schema_name;
            RETURN true;
        END IF;
        
        -- Créer le schéma
        BEGIN
            EXECUTE format('CREATE SCHEMA %I', schema_name);
            RAISE NOTICE 'Schéma % créé avec succès', schema_name;
            
            -- Configurer les autorisations
            EXECUTE format('GRANT USAGE ON SCHEMA %I TO current_user', schema_name);
            EXECUTE format('ALTER DEFAULT PRIVILEGES IN SCHEMA %I GRANT ALL PRIVILEGES ON TABLES TO current_user', schema_name);
            EXECUTE format('ALTER DEFAULT PRIVILEGES IN SCHEMA %I GRANT ALL PRIVILEGES ON SEQUENCES TO current_user', schema_name);
            
            RETURN true;
        EXCEPTION WHEN OTHERS THEN
            RAISE NOTICE 'Erreur lors de la création du schéma %: %', schema_name, SQLERRM;
            RETURN false;
        END;
    END;
    $$;


ALTER FUNCTION public.create_client_schema(p_user_id integer) OWNER TO postgres;

--
-- TOC entry 628 (class 1255 OID 30244)
-- Name: create_missing_tables_for_client(text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.create_missing_tables_for_client(client_schema text) RETURNS void
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Vérifier si la table properties existe
    IF NOT EXISTS (
        SELECT 1 FROM information_schema.tables 
        WHERE table_schema = client_schema AND table_name = 'properties'
    ) THEN
        EXECUTE format('
            CREATE TABLE %I.properties (
                id integer NOT NULL,
                name text NOT NULL,
                address text NOT NULL,
                description text,
                type text NOT NULL,
                units integer,
                bedrooms integer,
                floors integer,
                bathrooms integer,
                toilets integer,
                energy_class text,
                energy_emissions text,
                living_area integer,
                land_area integer,
                has_parking boolean,
                has_terrace boolean,
                has_garage boolean,
                has_outbuilding boolean,
                has_balcony boolean,
                has_elevator boolean,
                has_cellar boolean,
                has_garden boolean,
                is_new_construction boolean,
                purchase_price numeric,
                monthly_rent numeric,
                monthly_expenses numeric,
                loan_amount numeric,
                monthly_loan_payment numeric,
                loan_duration integer,
                status text,
                construction_year integer,
                purchase_date timestamp without time zone,
                rooms integer,
                isnewconstruction boolean,
                images jsonb,
                user_id integer NOT NULL,
                area integer,
                created_at timestamp without time zone DEFAULT now() NOT NULL,
                updated_at timestamp without time zone DEFAULT now() NOT NULL
            );

            ALTER TABLE %I.properties ADD CONSTRAINT properties_pkey PRIMARY KEY (id);
        ', client_schema, client_schema);
        
        RAISE NOTICE 'Table properties créée dans le schéma %', client_schema;
    ELSE
        RAISE NOTICE 'Table properties existe déjà dans le schéma %', client_schema;
    END IF;

    -- Vérifier si la table tenant_history existe
    IF NOT EXISTS (
        SELECT 1 FROM information_schema.tables 
        WHERE table_schema = client_schema AND table_name = 'tenant_history'
    ) THEN
        EXECUTE format('
            CREATE TABLE %I.tenant_history (
                id integer NOT NULL,
                rating integer NOT NULL,
                feedback text,
                category text DEFAULT ''general''::text,
                tenant_full_name text,
                original_user_id integer,
                event_type text DEFAULT ''evaluation''::text,
                event_severity integer DEFAULT 0,
                event_details jsonb,
                documents text[],
                bail_status text,
                bail_id integer,
                property_name text,
                created_at timestamp without time zone DEFAULT now() NOT NULL,
                created_by integer,
                tenant_id integer,
                is_orphaned boolean DEFAULT false
            );

            ALTER TABLE %I.tenant_history ADD CONSTRAINT tenant_history_pkey PRIMARY KEY (id);
        ', client_schema, client_schema);
        
        RAISE NOTICE 'Table tenant_history créée dans le schéma %', client_schema;
    ELSE
        RAISE NOTICE 'Table tenant_history existe déjà dans le schéma %', client_schema;
    END IF;

    -- Créer les séquences si elles n'existent pas
    IF NOT EXISTS (
        SELECT 1 FROM information_schema.sequences
        WHERE sequence_schema = client_schema AND sequence_name = 'tenant_history_id_seq'
    ) THEN
        EXECUTE format('
            CREATE SEQUENCE %I.tenant_history_id_seq
            AS integer
            START WITH 1
            INCREMENT BY 1
            NO MINVALUE
            NO MAXVALUE
            CACHE 1;
            
            ALTER TABLE %I.tenant_history_id_seq OWNER TO postgres;
            ALTER SEQUENCE %I.tenant_history_id_seq OWNED BY %I.tenant_history.id;
            ALTER TABLE ONLY %I.tenant_history ALTER COLUMN id SET DEFAULT nextval(''%I.tenant_history_id_seq''::regclass);
        ', client_schema, client_schema, client_schema, client_schema, client_schema, client_schema);
        
        RAISE NOTICE 'Séquence tenant_history_id_seq créée dans le schéma %', client_schema;
    ELSE
        RAISE NOTICE 'Séquence tenant_history_id_seq existe déjà dans le schéma %', client_schema;
    END IF;

    IF NOT EXISTS (
        SELECT 1 FROM information_schema.sequences
        WHERE sequence_schema = client_schema AND sequence_name = 'properties_id_seq'
    ) THEN
        EXECUTE format('
            CREATE SEQUENCE %I.properties_id_seq
            AS integer
            START WITH 1
            INCREMENT BY 1
            NO MINVALUE
            NO MAXVALUE
            CACHE 1;
            
            ALTER TABLE %I.properties_id_seq OWNER TO postgres;
            ALTER SEQUENCE %I.properties_id_seq OWNED BY %I.properties.id;
            ALTER TABLE ONLY %I.properties ALTER COLUMN id SET DEFAULT nextval(''%I.properties_id_seq''::regclass);
        ', client_schema, client_schema, client_schema, client_schema, client_schema, client_schema);
        
        RAISE NOTICE 'Séquence properties_id_seq créée dans le schéma %', client_schema;
    ELSE
        RAISE NOTICE 'Séquence properties_id_seq existe déjà dans le schéma %', client_schema;
    END IF;
END;
$$;


ALTER FUNCTION public.create_missing_tables_for_client(client_schema text) OWNER TO postgres;

--
-- TOC entry 638 (class 1255 OID 32603)
-- Name: create_schema_for_new_client(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.create_schema_for_new_client() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Appeler la fonction qui crée le schéma client
    PERFORM create_client_schema(NEW.id);
    RETURN NEW;
EXCEPTION WHEN OTHERS THEN
    RAISE WARNING 'Erreur dans le trigger create_schema_for_new_client: %', SQLERRM;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.create_schema_for_new_client() OWNER TO postgres;

--
-- TOC entry 623 (class 1255 OID 30050)
-- Name: create_user_schema(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.create_user_schema() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
    DECLARE
        v_schema_name TEXT;
    BEGIN
        -- Construire le nom du schéma
        v_schema_name := 'client_' || NEW.id;
        
        -- Créer automatiquement un schéma client pour le nouvel utilisateur
        EXECUTE format('CREATE SCHEMA IF NOT EXISTS %I', v_schema_name);
        RAISE NOTICE 'Schéma % créé automatiquement pour le nouvel utilisateur %', 
                     v_schema_name, NEW.username;
        RETURN NEW;
    END;
    $$;


ALTER FUNCTION public.create_user_schema() OWNER TO postgres;

--
-- TOC entry 602 (class 1255 OID 27847)
-- Name: disable_all_rls_policies(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.disable_all_rls_policies() RETURNS boolean
    LANGUAGE plpgsql
    AS $$
      DECLARE
        r RECORD;
      BEGIN
        FOR r IN 
          SELECT schemaname, tablename, policyname
          FROM pg_policies
        LOOP
          EXECUTE format('DROP POLICY IF EXISTS %I ON %I.%I', 
                         r.policyname, r.schemaname, r.tablename);
          RAISE NOTICE 'Politique % supprimée sur %.%', 
                       r.policyname, r.schemaname, r.tablename;
        END LOOP;
        RETURN TRUE;
      EXCEPTION
        WHEN OTHERS THEN
          RAISE NOTICE 'Erreur: %', SQLERRM;
          RETURN FALSE;
      END;
      $$;


ALTER FUNCTION public.disable_all_rls_policies() OWNER TO postgres;

--
-- TOC entry 561 (class 1255 OID 19950)
-- Name: enable_rls_on_table(text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.enable_rls_on_table(table_name text) RETURNS void
    LANGUAGE plpgsql
    AS $$
BEGIN
  -- Vérifier si la table existe
  IF EXISTS (SELECT 1 FROM pg_tables WHERE tablename = table_name) THEN
    -- Activer RLS
    EXECUTE format('ALTER TABLE %I ENABLE ROW LEVEL SECURITY', table_name);
    RAISE NOTICE 'RLS activé sur la table %', table_name;
  ELSE
    RAISE WARNING 'Table % non trouvée, RLS non activé', table_name;
  END IF;
EXCEPTION
  WHEN OTHERS THEN
    RAISE WARNING 'Erreur lors de l''activation de RLS sur la table %: %', table_name, SQLERRM;
END;
$$;


ALTER FUNCTION public.enable_rls_on_table(table_name text) OWNER TO postgres;

--
-- TOC entry 636 (class 1255 OID 45445)
-- Name: fix_all_request_counts(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fix_all_request_counts() RETURNS TABLE(user_id integer, previous_count integer, new_count integer)
    LANGUAGE plpgsql
    AS $_$
DECLARE
  v_user RECORD;
  v_schema TEXT;
  v_count INTEGER;
  v_previous INTEGER;
BEGIN
  -- Parcourir tous les utilisateurs
  FOR v_user IN SELECT id, request_count FROM public.users
  LOOP
    user_id := v_user.id;
    previous_count := v_user.request_count;
    
    -- Déterminer le schéma client
    v_schema := 'client_' || v_user.id;
    
    -- Vérifier si le schéma existe
    PERFORM 1 FROM pg_namespace WHERE nspname = v_schema;
    IF FOUND THEN
      -- Compter les entrées dans ai_usage
      EXECUTE format('
        SELECT COUNT(*) FROM %I.ai_usage WHERE user_id = $1
      ', v_schema) INTO v_count USING v_user.id;
      
      new_count := v_count;
      
      -- Mettre à jour le compteur
      UPDATE public.users
      SET request_count = v_count,
          updated_at = NOW()
      WHERE id = v_user.id;
      
      RETURN NEXT;
    END IF;
  END LOOP;
  
  RETURN;
END;
$_$;


ALTER FUNCTION public.fix_all_request_counts() OWNER TO postgres;

--
-- TOC entry 626 (class 1255 OID 44588)
-- Name: format_bytes(bigint); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.format_bytes(bytes bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
    sizes TEXT[] := ARRAY['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];
    i INTEGER := 1;
BEGIN
    IF bytes IS NULL THEN 
        RETURN '0 Bytes';
    END IF;
    
    IF bytes = 0 THEN
        RETURN '0 Bytes';
    END IF;
    
    WHILE bytes >= 1024 AND i < array_length(sizes, 1) LOOP
        bytes := bytes / 1024;
        i := i + 1;
    END LOOP;
    
    RETURN ROUND(bytes::NUMERIC, 2)::TEXT || ' ' || sizes[i];
END;
$$;


ALTER FUNCTION public.format_bytes(bytes bigint) OWNER TO postgres;

--
-- TOC entry 624 (class 1255 OID 44495)
-- Name: get_client_schema_statistics(text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_client_schema_statistics(p_client_schema text) RETURNS TABLE(table_name text, row_count bigint, total_size bigint, index_size bigint, toast_size bigint, table_size bigint, table_type text, description text)
    LANGUAGE plpgsql
    AS $$
BEGIN
    RETURN QUERY EXECUTE format('
        WITH table_counts AS (
            SELECT 
                c.relname::TEXT AS table_name,
                c.reltuples::BIGINT AS row_count,
                pg_total_relation_size(c.oid) AS total_size,
                pg_indexes_size(c.oid) AS index_size,
                COALESCE(pg_total_relation_size(''pg_toast.'' || (SELECT reltoastrelid FROM pg_class WHERE oid = c.oid)::regclass::text), 0) AS toast_size,
                pg_relation_size(c.oid) AS table_size,
                CASE 
                    WHEN c.relname LIKE ''%%documents%%'' THEN ''Document''
                    WHEN c.relname LIKE ''%%property%%'' THEN ''Propriété''
                    WHEN c.relname LIKE ''%%tenant%%'' THEN ''Locataire''
                    WHEN c.relname LIKE ''%%contract%%'' THEN ''Contrat''
                    WHEN c.relname LIKE ''%%transaction%%'' THEN ''Finance''
                    WHEN c.relname LIKE ''%%maintenance%%'' THEN ''Maintenance''
                    WHEN c.relname LIKE ''%%visit%%'' THEN ''Visite''
                    ELSE ''Autre''
                END AS table_type,
                obj_description(c.oid, ''pg_class'') AS description
            FROM pg_class c
            JOIN pg_namespace n ON n.oid = c.relnamespace
            WHERE n.nspname = %L
            AND c.relkind = ''r''
        )
        SELECT 
            table_name,
            row_count,
            total_size,
            index_size,
            toast_size,
            table_size,
            table_type,
            description
        FROM table_counts
        ORDER BY total_size DESC
    ', p_client_schema);
END;
$$;


ALTER FUNCTION public.get_client_schema_statistics(p_client_schema text) OWNER TO postgres;

--
-- TOC entry 607 (class 1255 OID 45412)
-- Name: get_user_preferred_model(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_user_preferred_model(p_user_id integer) RETURNS text
    LANGUAGE plpgsql
    AS $$
BEGIN
    RETURN (SELECT preferred_ai_model FROM public.users WHERE id = p_user_id);
END;
$$;


ALTER FUNCTION public.get_user_preferred_model(p_user_id integer) OWNER TO postgres;

--
-- TOC entry 635 (class 1255 OID 45444)
-- Name: install_ai_usage_sync_trigger_on_all_clients(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.install_ai_usage_sync_trigger_on_all_clients() RETURNS void
    LANGUAGE plpgsql
    AS $_$
DECLARE
  client_schema RECORD;
BEGIN
  -- Parcourir tous les schémas client existants
  FOR client_schema IN 
    SELECT nspname FROM pg_namespace 
    WHERE nspname LIKE 'client_%'
  LOOP
    -- Créer la fonction de synchronisation pour ce schéma client
    EXECUTE format('
      CREATE OR REPLACE FUNCTION %I.sync_ai_usage_to_request_count()
      RETURNS TRIGGER AS $TRIG$
      DECLARE
        v_user_id INTEGER;
        v_count INTEGER;
      BEGIN
        v_user_id := NEW.user_id;
        
        IF v_user_id IS NULL THEN
          RAISE EXCEPTION ''ID utilisateur non valide dans ai_usage'';
        END IF;
        
        EXECUTE ''SELECT COUNT(*) FROM %I.ai_usage WHERE user_id = $1'' 
          INTO v_count
          USING v_user_id;
        
        UPDATE public.users
        SET request_count = v_count,
            updated_at = NOW()
        WHERE id = v_user_id;
        
        RETURN NEW;
      END;
      $TRIG$ LANGUAGE plpgsql;
    ', client_schema.nspname, client_schema.nspname);
    
    -- Supprimer les triggers existants s'ils existent
    BEGIN
      EXECUTE format('DROP TRIGGER IF EXISTS sync_ai_usage_after_insert ON %I.ai_usage', client_schema.nspname);
      EXECUTE format('DROP TRIGGER IF EXISTS sync_ai_usage_after_delete ON %I.ai_usage', client_schema.nspname);
    EXCEPTION WHEN OTHERS THEN
      -- Ignorer les erreurs si les triggers n'existent pas
    END;
    
    -- Créer les nouveaux triggers
    EXECUTE format('
      CREATE TRIGGER sync_ai_usage_after_insert
      AFTER INSERT ON %I.ai_usage
      FOR EACH ROW
      EXECUTE FUNCTION %I.sync_ai_usage_to_request_count()
    ', client_schema.nspname, client_schema.nspname);
    
    EXECUTE format('
      CREATE TRIGGER sync_ai_usage_after_delete
      AFTER DELETE ON %I.ai_usage
      FOR EACH ROW
      EXECUTE FUNCTION %I.sync_ai_usage_to_request_count()
    ', client_schema.nspname, client_schema.nspname);
    
    RAISE NOTICE 'Triggers de synchronisation installés pour le schéma %', client_schema.nspname;
  END LOOP;
END;
$_$;


ALTER FUNCTION public.install_ai_usage_sync_trigger_on_all_clients() OWNER TO postgres;

--
-- TOC entry 563 (class 1255 OID 18690)
-- Name: is_admin(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.is_admin() RETURNS boolean
    LANGUAGE plpgsql SECURITY DEFINER
    AS $$
BEGIN
  RETURN current_setting('app.is_admin', TRUE)::BOOLEAN;
EXCEPTION
  WHEN OTHERS THEN
    RETURN FALSE;
END;
$$;


ALTER FUNCTION public.is_admin() OWNER TO postgres;

--
-- TOC entry 599 (class 1255 OID 19948)
-- Name: log_table_changes(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.log_table_changes() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
  IF TG_OP = 'UPDATE' THEN
    -- Enregistre les modifications dans la table d'historique appropriée
    IF TG_TABLE_NAME = 'properties' AND EXISTS (SELECT 1 FROM pg_tables WHERE tablename = 'property_history') THEN
      INSERT INTO property_history (property_id, field, old_value, new_value, change_type, user_id)
      SELECT 
        NEW.id, 
        key, 
        CAST(jsonb_build_object(key, OLD.*)::jsonb->>key AS TEXT), 
        CAST(jsonb_build_object(key, NEW.*)::jsonb->>key AS TEXT),
        'update',
        current_user_id()
      FROM jsonb_object_keys(to_jsonb(NEW.*)) k(key)
      WHERE jsonb_build_object(key, OLD.*)::jsonb->>key IS DISTINCT FROM jsonb_build_object(key, NEW.*)::jsonb->>key;
    END IF;
  END IF;
  RETURN NULL;
EXCEPTION
  WHEN OTHERS THEN
    RAISE WARNING 'Erreur dans le trigger de journalisation: %', SQLERRM;
    RETURN NULL;
END;
$$;


ALTER FUNCTION public.log_table_changes() OWNER TO postgres;

--
-- TOC entry 7336 (class 0 OID 0)
-- Dependencies: 599
-- Name: FUNCTION log_table_changes(); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.log_table_changes() IS 'Fonction pour journaliser les modifications des tables principales';


--
-- TOC entry 631 (class 1255 OID 44590)
-- Name: process_storage_subscription_renewals(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.process_storage_subscription_renewals() RETURNS integer
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_count INTEGER := 0;
    subscription_record RECORD;
BEGIN
    -- Traiter les abonnements qui doivent être renouvelés
    FOR subscription_record IN
        SELECT * FROM public.user_storage_subscriptions
        WHERE is_active = TRUE 
        AND next_billing_date <= CURRENT_DATE
    LOOP
        -- Simulation du renouvellement (dans un système réel, cela déclencherait une facture)
        UPDATE public.user_storage_subscriptions
        SET next_billing_date = 
            CASE 
                WHEN billing_cycle = 'monthly' THEN next_billing_date + INTERVAL '1 month'
                WHEN billing_cycle = 'yearly' THEN next_billing_date + INTERVAL '1 year'
                ELSE next_billing_date + INTERVAL '1 month'
            END,
        payment_history = payment_history || jsonb_build_object(
            'date', CURRENT_TIMESTAMP,
            'amount', CASE 
                WHEN billing_cycle = 'monthly' THEN (SELECT price_monthly FROM public.storage_plans WHERE id = subscription_record.plan_id)
                WHEN billing_cycle = 'yearly' THEN (SELECT price_yearly FROM public.storage_plans WHERE id = subscription_record.plan_id)
                ELSE 0
            END,
            'status', 'processed'
        ),
        updated_at = CURRENT_TIMESTAMP
        WHERE id = subscription_record.id;
        
        v_count := v_count + 1;
    END LOOP;
    
    RETURN v_count;
END;
$$;


ALTER FUNCTION public.process_storage_subscription_renewals() OWNER TO postgres;

--
-- TOC entry 573 (class 1255 OID 19450)
-- Name: recalculate_user_storage(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.recalculate_user_storage(user_id_param integer) RETURNS numeric
    LANGUAGE plpgsql
    AS $$
      DECLARE
        total_size NUMERIC := 0;
      BEGIN
        -- Calculer la taille totale des documents de l'utilisateur
        SELECT COALESCE(SUM(COALESCE(file_size, 0)), 0) INTO total_size
        FROM documents
        WHERE user_id = user_id_param;
        
        -- Mettre à jour la table users
        UPDATE users
        SET 
          storage_used = total_size,
          updated_at = CURRENT_TIMESTAMP
        WHERE id = user_id_param;
        
        RETURN total_size;
      END;
      $$;


ALTER FUNCTION public.recalculate_user_storage(user_id_param integer) OWNER TO postgres;

--
-- TOC entry 606 (class 1255 OID 45411)
-- Name: register_client_schema(text, integer, text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.register_client_schema(p_schema_name text, p_owner_account_id integer, p_client_name text DEFAULT NULL::text) RETURNS integer
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_id INTEGER;
BEGIN
    INSERT INTO public.client_schemas (schema_name, owner_account_id, client_name)
    VALUES (p_schema_name, p_owner_account_id, p_client_name)
    RETURNING id INTO v_id;
    
    RETURN v_id;
END;
$$;


ALTER FUNCTION public.register_client_schema(p_schema_name text, p_owner_account_id integer, p_client_name text) OWNER TO postgres;

--
-- TOC entry 612 (class 1255 OID 45424)
-- Name: reset_user_request_count(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.reset_user_request_count() RETURNS void
    LANGUAGE plpgsql
    AS $$
BEGIN
    UPDATE public.users
    SET request_count = 0;
    
    RAISE NOTICE 'Compteurs de requêtes réinitialisés pour tous les utilisateurs';
END;
$$;


ALTER FUNCTION public.reset_user_request_count() OWNER TO postgres;

--
-- TOC entry 598 (class 1255 OID 19940)
-- Name: set_app_variables(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.set_app_variables() RETURNS void
    LANGUAGE plpgsql
    AS $$
BEGIN
  -- Créer la fonction qui définit les variables d'application par défaut
  EXECUTE 'ALTER DATABASE ' || current_database() || ' SET app.user_id TO ''0''';
  RAISE NOTICE 'Variables d''application configurées avec succès';
END;
$$;


ALTER FUNCTION public.set_app_variables() OWNER TO postgres;

--
-- TOC entry 629 (class 1255 OID 30323)
-- Name: set_schema_for_user(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.set_schema_for_user(user_id integer) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  schema_name TEXT;
  user_role TEXT;
BEGIN
  -- Récupérer le rôle de l'utilisateur
  SELECT role INTO user_role FROM public.users WHERE id = user_id;
  
  IF user_role = 'admin' THEN
    -- L'administrateur a accès à tout
    RETURN 'admin_views, public';
  ELSE
    -- Récupérer le nom du schéma pour cet utilisateur
    SELECT 'client_' || user_id::TEXT INTO schema_name;
    
    -- Définir le search_path
    RETURN schema_name || ', public';
  END IF;
END;
$$;


ALTER FUNCTION public.set_schema_for_user(user_id integer) OWNER TO postgres;

--
-- TOC entry 7360 (class 0 OID 0)
-- Dependencies: 629
-- Name: FUNCTION set_schema_for_user(user_id integer); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.set_schema_for_user(user_id integer) IS 'Retourne la valeur à utiliser pour search_path en fonction de l''ID utilisateur';


--
-- TOC entry 605 (class 1255 OID 44465)
-- Name: setup_storage_usage_tracking(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.setup_storage_usage_tracking() RETURNS void
    LANGUAGE plpgsql
    AS $$
DECLARE
    schema_name TEXT;
BEGIN
    -- Pour chaque schéma client existant, recalculer l'utilisation actuelle
    FOR schema_name IN 
        SELECT nspname 
        FROM pg_namespace 
        WHERE nspname LIKE 'client_%'
    LOOP
        PERFORM public.calculate_client_storage_usage(schema_name);
    END LOOP;
    
    RETURN;
END;
$$;


ALTER FUNCTION public.setup_storage_usage_tracking() OWNER TO postgres;

--
-- TOC entry 621 (class 1255 OID 45501)
-- Name: setup_user_environment(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.setup_user_environment(p_user_id integer) RETURNS void
    LANGUAGE plpgsql
    AS $$
    DECLARE
        schema_name text := 'client_' || p_user_id;
    BEGIN
        -- Vérifier si le schéma existe
        IF NOT EXISTS (SELECT 1 FROM information_schema.schemata WHERE schema_name = schema_name) THEN
            -- Créer le schéma s'il n'existe pas
            EXECUTE format('CREATE SCHEMA IF NOT EXISTS %I', schema_name);
            RAISE NOTICE 'Schéma % créé', schema_name;
        END IF;
        
        -- Configurer le chemin de recherche des schémas pour la session actuelle
        EXECUTE format('SET search_path TO %I, public', schema_name);
        RAISE NOTICE 'Search path configuré à %', schema_name;

        -- Configurer les autorisations
        EXECUTE format('GRANT USAGE ON SCHEMA %I TO current_user', schema_name);
        EXECUTE format('GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA %I TO current_user', schema_name);
        EXECUTE format('GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA %I TO current_user', schema_name);
        
        RETURN;
    END;
    $$;


ALTER FUNCTION public.setup_user_environment(p_user_id integer) OWNER TO postgres;

--
-- TOC entry 620 (class 1255 OID 45439)
-- Name: sync_ai_usage_to_request_count(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.sync_ai_usage_to_request_count(p_user_id integer) RETURNS void
    LANGUAGE plpgsql
    AS $_$
BEGIN
  -- Calculer le nombre total de requêtes dans ai_usage
  EXECUTE format('
    UPDATE public.users
    SET request_count = (
      SELECT COUNT(*) FROM client_%s.ai_usage 
      WHERE user_id = $1
    )
    WHERE id = $1
  ', p_user_id) USING p_user_id;
END;
$_$;


ALTER FUNCTION public.sync_ai_usage_to_request_count(p_user_id integer) OWNER TO postgres;

--
-- TOC entry 570 (class 1255 OID 19210)
-- Name: sync_theme_colors(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.sync_theme_colors() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
   NEW.accent_color = (SELECT accent_color FROM pdf_themes WHERE id = NEW.theme_id);
   RETURN NEW;
END;
$$;


ALTER FUNCTION public.sync_theme_colors() OWNER TO postgres;

--
-- TOC entry 559 (class 1255 OID 19957)
-- Name: test_rls_config(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.test_rls_config() RETURNS void
    LANGUAGE plpgsql
    AS $$
DECLARE
  test_user_id INTEGER;
BEGIN
  -- Vérifier le nombre d'utilisateurs
  EXECUTE 'SELECT COUNT(*) FROM users' INTO test_user_id;
  
  -- Test RLS avec différents contextes
  EXECUTE 'SET app.user_id TO ''0''';
  RAISE NOTICE 'RLS avec utilisateur anonyme: OK';
  
  -- Essayer avec l'ID d'un utilisateur existant si disponible
  IF test_user_id > 0 THEN
    EXECUTE 'SET app.user_id TO ''1''';
    RAISE NOTICE 'RLS avec utilisateur ID=1: OK';
  END IF;
  
  -- Réinitialiser l'ID utilisateur
  EXECUTE 'SET app.user_id TO ''0''';
RETURN;
END;
$$;


ALTER FUNCTION public.test_rls_config() OWNER TO postgres;

--
-- TOC entry 580 (class 1255 OID 44547)
-- Name: update_client_storage_on_change(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_client_storage_on_change() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
    client_schema TEXT;
BEGIN
    -- Déterminer le schéma client à partir du contexte
    client_schema := TG_TABLE_SCHEMA;
    
    -- Mettre à jour uniquement si c'est un schéma client
    IF client_schema LIKE 'client_%' THEN
        PERFORM public.calculate_efficient_client_storage(client_schema);
    END IF;
    
    RETURN NULL;
END;
$$;


ALTER FUNCTION public.update_client_storage_on_change() OWNER TO postgres;

--
-- TOC entry 549 (class 1255 OID 18935)
-- Name: update_modified_column(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_modified_column() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = now();
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_modified_column() OWNER TO postgres;

--
-- TOC entry 632 (class 1255 OID 44591)
-- Name: update_storage_limit_on_subscription_change(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_storage_limit_on_subscription_change() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Si c'est une insertion ou une mise à jour et que l'abonnement est actif
    IF (TG_OP = 'INSERT' OR (TG_OP = 'UPDATE' AND NEW.is_active = TRUE)) THEN
        -- Désactiver les anciens abonnements actifs pour cet utilisateur (sauf celui-ci)
        IF TG_OP = 'INSERT' THEN
            UPDATE public.user_storage_subscriptions
            SET is_active = FALSE,
                end_date = CURRENT_TIMESTAMP,
                updated_at = CURRENT_TIMESTAMP
            WHERE user_id = NEW.user_id
            AND id != NEW.id
            AND is_active = TRUE;
        END IF;
        
        -- Mettre à jour la limite de stockage dans users
        PERFORM public.update_user_storage_info(NEW.user_id);
    END IF;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_storage_limit_on_subscription_change() OWNER TO postgres;

--
-- TOC entry 582 (class 1255 OID 19451)
-- Name: update_storage_on_document_change(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_storage_on_document_change() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
      BEGIN
        -- Pour les insertions et mises à jour
        IF (TG_OP = 'INSERT' OR TG_OP = 'UPDATE') THEN
          -- Enregistrer l'opération dans storage_usage_details
          IF (TG_OP = 'INSERT') THEN
            INSERT INTO storage_usage_details (
              user_id, document_id, file_size, operation, file_type, file_path
            ) VALUES (
              NEW.user_id, NEW.id, COALESCE(NEW.file_size, 0), 'upload', 
              NEW.file_type, NEW.file_path
            );
          ELSIF (TG_OP = 'UPDATE' AND OLD.file_size IS DISTINCT FROM NEW.file_size) THEN
            INSERT INTO storage_usage_details (
              user_id, document_id, file_size, operation, file_type, file_path
            ) VALUES (
              NEW.user_id, NEW.id, COALESCE(NEW.file_size, 0) - COALESCE(OLD.file_size, 0), 'modify', 
              NEW.file_type, NEW.file_path
            );
          END IF;
          
          -- Mise à jour du stockage utilisateur
          PERFORM recalculate_user_storage(NEW.user_id);
          RETURN NEW;
        
        -- Pour les suppressions
        ELSIF (TG_OP = 'DELETE') THEN
          -- Enregistrer l'opération dans storage_usage_details
          INSERT INTO storage_usage_details (
            user_id, document_id, file_size, operation, file_type, file_path
          ) VALUES (
            OLD.user_id, OLD.id, COALESCE(OLD.file_size, 0) * -1, 'delete', 
            OLD.file_type, OLD.file_path
          );
          
          -- Mise à jour du stockage utilisateur
          PERFORM recalculate_user_storage(OLD.user_id);
          RETURN OLD;
        END IF;
        
        RETURN NULL;
      END;
      $$;


ALTER FUNCTION public.update_storage_on_document_change() OWNER TO postgres;

--
-- TOC entry 630 (class 1255 OID 44586)
-- Name: update_user_storage_info(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_user_storage_info(p_user_id integer) RETURNS void
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_plan_record RECORD;
BEGIN
    -- Récupérer les informations du plan actif de l'utilisateur
    SELECT sp.* 
    INTO v_plan_record
    FROM public.storage_plans sp
    JOIN public.user_storage_subscriptions uss ON sp.id = uss.plan_id
    WHERE uss.user_id = p_user_id AND uss.is_active = TRUE
    LIMIT 1;

    -- Si aucun plan actif trouvé, utiliser le plan basic
    IF NOT FOUND THEN
        SELECT * INTO v_plan_record FROM public.storage_plans WHERE name = 'basic';
    END IF;

    -- Mettre à jour les informations de stockage dans la table users
    UPDATE public.users
    SET storage_limit = v_plan_record.storage_limit,
        storage_tier = v_plan_record.name,
        updated_at = NOW()
    WHERE id = p_user_id;
END;
$$;


ALTER FUNCTION public.update_user_storage_info(p_user_id integer) OWNER TO postgres;

--
-- TOC entry 562 (class 1255 OID 18464)
-- Name: update_user_storage_quota(integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_user_storage_quota(p_user_id integer, p_extension_id integer) RETURNS void
    LANGUAGE plpgsql
    AS $$
DECLARE
  new_quota NUMERIC;
BEGIN
  -- Récupérer le quota de l'extension choisie
  SELECT quota_bytes INTO new_quota
  FROM storage_extensions
  WHERE id = p_extension_id;
  
  -- Mettre à jour le quota de l'utilisateur
  UPDATE user_storage
  SET quota_bytes = new_quota, last_updated = NOW()
  WHERE user_id = p_user_id;
  
  -- Si aucune entrée n'existe, en créer une
  IF NOT FOUND THEN
    INSERT INTO user_storage (user_id, used_bytes, quota_bytes)
    VALUES (p_user_id, 0, new_quota);
  END IF;
END;
$$;


ALTER FUNCTION public.update_user_storage_quota(p_user_id integer, p_extension_id integer) OWNER TO postgres;

--
-- TOC entry 550 (class 1255 OID 44593)
-- Name: upgrade_user_storage_plan(integer, character varying, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.upgrade_user_storage_plan(p_user_id integer, p_plan_name character varying, p_billing_cycle character varying DEFAULT 'monthly'::character varying) RETURNS jsonb
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_plan_id INTEGER;
    v_subscription_id INTEGER;
    v_price NUMERIC(10, 2);
    v_next_date TIMESTAMP;
    v_result JSONB;
BEGIN
    -- Vérifier si le plan existe
    SELECT id INTO v_plan_id FROM public.storage_plans WHERE name = p_plan_name AND is_active = TRUE;
    IF NOT FOUND THEN
        RETURN jsonb_build_object('success', FALSE, 'message', 'Plan de stockage non trouvé');
    END IF;
    
    -- Calculer le prix et la prochaine date de facturation
    IF p_billing_cycle = 'yearly' THEN
        SELECT price_yearly INTO v_price FROM public.storage_plans WHERE id = v_plan_id;
        v_next_date := CURRENT_DATE + INTERVAL '1 year';
    ELSE
        SELECT price_monthly INTO v_price FROM public.storage_plans WHERE id = v_plan_id;
        v_next_date := CURRENT_DATE + INTERVAL '1 month';
    END IF;
    
    -- Désactiver l'abonnement actuel s'il existe
    UPDATE public.user_storage_subscriptions
    SET is_active = FALSE, 
        end_date = CURRENT_TIMESTAMP,
        updated_at = CURRENT_TIMESTAMP
    WHERE user_id = p_user_id AND is_active = TRUE;
    
    -- Créer le nouvel abonnement
    INSERT INTO public.user_storage_subscriptions (
        user_id, 
        plan_id, 
        start_date, 
        billing_cycle, 
        next_billing_date,
        is_active,
        payment_status,
        payment_history
    ) VALUES (
        p_user_id,
        v_plan_id,
        CURRENT_TIMESTAMP,
        p_billing_cycle,
        v_next_date,
        TRUE,
        'pending',
        jsonb_build_array(
            jsonb_build_object(
                'date', CURRENT_TIMESTAMP,
                'amount', v_price,
                'status', 'pending'
            )
        )
    )
    RETURNING id INTO v_subscription_id;
    
    -- Mettre à jour les informations de stockage de l'utilisateur
    PERFORM public.update_user_storage_info(p_user_id);
    
    -- Construire la réponse
    SELECT 
        jsonb_build_object(
            'success', TRUE,
            'message', 'Plan de stockage mis à niveau avec succès',
            'subscription_id', v_subscription_id,
            'plan', p_plan_name,
            'billing_cycle', p_billing_cycle,
            'price', v_price,
            'next_billing_date', v_next_date
        )
    INTO v_result;
    
    RETURN v_result;
END;
$$;


ALTER FUNCTION public.upgrade_user_storage_plan(p_user_id integer, p_plan_name character varying, p_billing_cycle character varying) OWNER TO postgres;

--
-- TOC entry 615 (class 1255 OID 45428)
-- Name: consume_ai_token(integer); Type: FUNCTION; Schema: template; Owner: postgres
--

CREATE FUNCTION template.consume_ai_token(p_user_id integer) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_token_record RECORD;
BEGIN
    -- Vérifier si l'utilisateur a des tokens et récupérer l'ID
    SELECT id, tokens INTO v_token_record
    FROM template.ai_tokens
    WHERE user_id = p_user_id
    AND (expires_at IS NULL OR expires_at > NOW())
    ORDER BY expires_at DESC NULLS LAST
    LIMIT 1;
    
    -- S'il n'a pas de tokens
    IF v_token_record IS NULL OR v_token_record.tokens <= 0 THEN
        RETURN FALSE;
    END IF;
    
    -- Consommer un token
    UPDATE template.ai_tokens
    SET tokens = tokens - 1
    WHERE id = v_token_record.id;
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION template.consume_ai_token(p_user_id integer) OWNER TO postgres;

--
-- TOC entry 609 (class 1255 OID 45413)
-- Name: increment_user_request_count(); Type: FUNCTION; Schema: template; Owner: postgres
--

CREATE FUNCTION template.increment_user_request_count() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    UPDATE public.users
    SET request_count = request_count + 1
    WHERE id = NEW.user_id;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION template.increment_user_request_count() OWNER TO postgres;

--
-- TOC entry 610 (class 1255 OID 45416)
-- Name: set_preferred_model(); Type: FUNCTION; Schema: template; Owner: postgres
--

CREATE FUNCTION template.set_preferred_model() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_preferred_model TEXT;
BEGIN
    -- Obtenir le modèle préféré du user depuis la table public.users
    SELECT preferred_ai_model INTO v_preferred_model 
    FROM public.users 
    WHERE id = NEW.user_id;
    
    -- Si un modèle préféré existe et qu'aucun n'est spécifié
    IF v_preferred_model IS NOT NULL AND (NEW.model_id IS NULL OR NEW.model_id = 'huggingface') THEN
        NEW.model_id := v_preferred_model;
    END IF;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION template.set_preferred_model() OWNER TO postgres;

--
-- TOC entry 634 (class 1255 OID 45441)
-- Name: sync_ai_usage_to_request_count(); Type: FUNCTION; Schema: template; Owner: postgres
--

CREATE FUNCTION template.sync_ai_usage_to_request_count() RETURNS trigger
    LANGUAGE plpgsql
    AS $_$
DECLARE
  v_user_id INTEGER;
  v_count INTEGER;
BEGIN
  -- Récupérer l'ID utilisateur et s'assurer qu'il est valide
  v_user_id := NEW.user_id;
  
  IF v_user_id IS NULL THEN
    RAISE EXCEPTION 'ID utilisateur non valide dans ai_usage';
  END IF;
  
  -- Calculer le nombre total d'entrées dans ai_usage pour cet utilisateur
  EXECUTE 'SELECT COUNT(*) FROM ' || TG_TABLE_SCHEMA || '.ai_usage WHERE user_id = $1' 
    INTO v_count
    USING v_user_id;
  
  -- Mettre à jour le compteur dans public.users
  UPDATE public.users
  SET request_count = v_count,
      updated_at = NOW()
  WHERE id = v_user_id;
  
  RETURN NEW;
END;
$_$;


ALTER FUNCTION template.sync_ai_usage_to_request_count() OWNER TO postgres;

--
-- TOC entry 604 (class 1255 OID 44463)
-- Name: update_storage_management_timestamp(); Type: FUNCTION; Schema: template; Owner: postgres
--

CREATE FUNCTION template.update_storage_management_timestamp() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
   NEW.updated_at = NOW();
   RETURN NEW;
END;
$$;


ALTER FUNCTION template.update_storage_management_timestamp() OWNER TO postgres;

--
-- TOC entry 600 (class 1255 OID 44657)
-- Name: update_timestamp(); Type: FUNCTION; Schema: template; Owner: postgres
--

CREATE FUNCTION template.update_timestamp() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$;


ALTER FUNCTION template.update_timestamp() OWNER TO postgres;

--
-- TOC entry 422 (class 1259 OID 43681)
-- Name: ai_conversations_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.ai_conversations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.ai_conversations_id_seq OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 350 (class 1259 OID 39905)
-- Name: ai_conversations; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.ai_conversations (
    id integer DEFAULT nextval('client_109.ai_conversations_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    title text NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    status text DEFAULT 'active'::text NOT NULL,
    category text DEFAULT 'general'::text NOT NULL,
    context jsonb DEFAULT '{}'::jsonb NOT NULL,
    CONSTRAINT ai_conversations_category_check CHECK ((category = ANY (ARRAY['general'::text, 'maintenance'::text, 'lease'::text, 'payment'::text, 'other'::text]))),
    CONSTRAINT ai_conversations_status_check CHECK ((status = ANY (ARRAY['active'::text, 'closed'::text])))
);


ALTER TABLE client_109.ai_conversations OWNER TO postgres;

--
-- TOC entry 423 (class 1259 OID 43683)
-- Name: ai_messages_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.ai_messages_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.ai_messages_id_seq OWNER TO postgres;

--
-- TOC entry 351 (class 1259 OID 39922)
-- Name: ai_messages; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.ai_messages (
    id integer DEFAULT nextval('client_109.ai_messages_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    role text DEFAULT 'user'::text NOT NULL,
    content text NOT NULL,
    metadata jsonb DEFAULT '{}'::jsonb NOT NULL,
    conversation_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    is_urgent boolean DEFAULT false NOT NULL,
    model_id text DEFAULT 'huggingface'::text,
    provider text DEFAULT 'huggingface'::text,
    CONSTRAINT ai_messages_role_check CHECK ((role = ANY (ARRAY['user'::text, 'assistant'::text, 'system'::text])))
);


ALTER TABLE client_109.ai_messages OWNER TO postgres;

--
-- TOC entry 424 (class 1259 OID 43685)
-- Name: ai_suggestions_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.ai_suggestions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.ai_suggestions_id_seq OWNER TO postgres;

--
-- TOC entry 353 (class 1259 OID 39951)
-- Name: ai_suggestions; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.ai_suggestions (
    id integer DEFAULT nextval('client_109.ai_suggestions_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    property_id integer,
    type text NOT NULL,
    suggestion text NOT NULL,
    data jsonb DEFAULT '{}'::jsonb NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    status text DEFAULT 'pending'::text NOT NULL,
    CONSTRAINT ai_suggestions_status_check CHECK ((status = ANY (ARRAY['pending'::text, 'accepted'::text, 'rejected'::text]))),
    CONSTRAINT ai_suggestions_type_check CHECK ((type = ANY (ARRAY['rent_price'::text, 'maintenance'::text, 'tenant_management'::text, 'investment'::text])))
);


ALTER TABLE client_109.ai_suggestions OWNER TO postgres;

--
-- TOC entry 420 (class 1259 OID 43677)
-- Name: ai_tokens_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.ai_tokens_id_seq
    START WITH 2
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.ai_tokens_id_seq OWNER TO postgres;

--
-- TOC entry 418 (class 1259 OID 43583)
-- Name: ai_tokens; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.ai_tokens (
    id integer DEFAULT nextval('client_109.ai_tokens_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    tokens integer DEFAULT 0 NOT NULL,
    plan text DEFAULT 'free'::text NOT NULL,
    expires_at timestamp without time zone,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT ai_tokens_plan_check CHECK ((plan = ANY (ARRAY['free'::text, 'basic'::text, 'premium'::text, 'enterprise'::text])))
);


ALTER TABLE client_109.ai_tokens OWNER TO postgres;

--
-- TOC entry 421 (class 1259 OID 43679)
-- Name: ai_usage_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.ai_usage_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.ai_usage_id_seq OWNER TO postgres;

--
-- TOC entry 419 (class 1259 OID 43594)
-- Name: ai_usage; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.ai_usage (
    id integer DEFAULT nextval('client_109.ai_usage_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    message_id integer,
    conversation_id integer,
    tokens_used integer NOT NULL,
    model text NOT NULL,
    prompt_tokens integer DEFAULT 0,
    completion_tokens integer DEFAULT 0,
    cost numeric(10,6) DEFAULT '0'::numeric,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT ai_usage_model_check CHECK ((model = ANY (ARRAY['openai-gpt-3.5'::text, 'openai-gpt-4o'::text])))
);


ALTER TABLE client_109.ai_usage OWNER TO postgres;

--
-- TOC entry 255 (class 1259 OID 27950)
-- Name: analysis_configs_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.analysis_configs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.analysis_configs_id_seq OWNER TO postgres;

--
-- TOC entry 355 (class 1259 OID 39979)
-- Name: analysis_configs; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.analysis_configs (
    id integer DEFAULT nextval('template.analysis_configs_id_seq'::regclass) NOT NULL,
    property_id integer,
    user_id integer,
    name character varying(255) NOT NULL,
    period_type character varying(50) NOT NULL,
    period_value integer NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone
);


ALTER TABLE client_109.analysis_configs OWNER TO postgres;

--
-- TOC entry 318 (class 1259 OID 39868)
-- Name: analysis_configs_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.analysis_configs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.analysis_configs_id_seq OWNER TO postgres;

--
-- TOC entry 261 (class 1259 OID 28154)
-- Name: automatic_reminders_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.automatic_reminders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.automatic_reminders_id_seq OWNER TO postgres;

--
-- TOC entry 370 (class 1259 OID 40165)
-- Name: automatic_reminders; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.automatic_reminders (
    id integer DEFAULT nextval('template.automatic_reminders_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    type text NOT NULL,
    related_entity_type text NOT NULL,
    related_entity_id integer NOT NULL,
    title text NOT NULL,
    message text NOT NULL,
    next_trigger_date date NOT NULL,
    days_in_advance integer DEFAULT 0 NOT NULL,
    recurrence text,
    status text DEFAULT 'active'::text NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_109.automatic_reminders OWNER TO postgres;

--
-- TOC entry 332 (class 1259 OID 39884)
-- Name: automatic_reminders_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.automatic_reminders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.automatic_reminders_id_seq OWNER TO postgres;

--
-- TOC entry 313 (class 1259 OID 32542)
-- Name: company_info_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.company_info_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.company_info_id_seq OWNER TO postgres;

--
-- TOC entry 377 (class 1259 OID 40268)
-- Name: company_info; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.company_info (
    id integer DEFAULT nextval('template.company_info_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    company_name character varying(200),
    company_address text,
    company_phone character varying(50),
    company_email character varying(100),
    company_website character varying(100),
    company_siret character varying(50),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE client_109.company_info OWNER TO postgres;

--
-- TOC entry 338 (class 1259 OID 39891)
-- Name: company_info_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.company_info_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.company_info_id_seq OWNER TO postgres;

--
-- TOC entry 263 (class 1259 OID 28166)
-- Name: contract_parties_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.contract_parties_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.contract_parties_id_seq OWNER TO postgres;

--
-- TOC entry 371 (class 1259 OID 40180)
-- Name: contract_parties; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.contract_parties (
    id integer DEFAULT nextval('template.contract_parties_id_seq'::regclass) NOT NULL,
    contract_id integer NOT NULL,
    party_id integer NOT NULL,
    party_type text NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer,
    CONSTRAINT contract_parties_party_type_check CHECK ((party_type = ANY (ARRAY['tenant'::text, 'owner'::text, 'manager'::text, 'other'::text])))
);


ALTER TABLE client_109.contract_parties OWNER TO postgres;

--
-- TOC entry 333 (class 1259 OID 39885)
-- Name: contract_parties_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.contract_parties_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.contract_parties_id_seq OWNER TO postgres;

--
-- TOC entry 258 (class 1259 OID 28095)
-- Name: contracts_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.contracts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.contracts_id_seq OWNER TO postgres;

--
-- TOC entry 364 (class 1259 OID 40091)
-- Name: contracts; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.contracts (
    id integer DEFAULT nextval('template.contracts_id_seq'::regclass) NOT NULL,
    name text NOT NULL,
    type text NOT NULL,
    status text DEFAULT 'draft'::text NOT NULL,
    start_date timestamp without time zone NOT NULL,
    end_date timestamp without time zone,
    property_id integer,
    document_id integer,
    signature_required boolean DEFAULT true,
    automated_renewal boolean DEFAULT false,
    renewal_date timestamp without time zone,
    notification_date timestamp without time zone,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT contracts_status_check CHECK ((status = ANY (ARRAY['draft'::text, 'pending_signature'::text, 'active'::text, 'expired'::text, 'terminated'::text]))),
    CONSTRAINT contracts_type_check CHECK ((type = ANY (ARRAY['rental'::text, 'mandate'::text, 'commercial'::text, 'attestation'::text, 'other'::text])))
);


ALTER TABLE client_109.contracts OWNER TO postgres;

--
-- TOC entry 327 (class 1259 OID 39879)
-- Name: contracts_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.contracts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.contracts_id_seq OWNER TO postgres;

--
-- TOC entry 311 (class 1259 OID 32531)
-- Name: document_templates_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.document_templates_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.document_templates_id_seq OWNER TO postgres;

--
-- TOC entry 375 (class 1259 OID 40246)
-- Name: document_templates; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.document_templates (
    id integer DEFAULT nextval('template.document_templates_id_seq'::regclass) NOT NULL,
    name text NOT NULL,
    document_type text NOT NULL,
    field_mappings jsonb NOT NULL,
    user_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_109.document_templates OWNER TO postgres;

--
-- TOC entry 337 (class 1259 OID 39890)
-- Name: document_templates_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.document_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.document_templates_id_seq OWNER TO postgres;

--
-- TOC entry 301 (class 1259 OID 30438)
-- Name: documents_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.documents_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.documents_id_seq OWNER TO postgres;

--
-- TOC entry 366 (class 1259 OID 40116)
-- Name: documents; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.documents (
    id integer DEFAULT nextval('template.documents_id_seq'::regclass) NOT NULL,
    title text NOT NULL,
    type text DEFAULT 'lease'::text NOT NULL,
    file_path text NOT NULL,
    original_name text NOT NULL,
    template boolean DEFAULT false,
    user_id integer NOT NULL,
    folder_id integer,
    parent_id integer,
    template_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    form_data jsonb DEFAULT '{}'::jsonb,
    content jsonb DEFAULT '{}'::jsonb,
    theme jsonb DEFAULT '{}'::jsonb,
    file_size numeric DEFAULT 0
);


ALTER TABLE client_109.documents OWNER TO postgres;

--
-- TOC entry 309 (class 1259 OID 32521)
-- Name: documents_access_log_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.documents_access_log_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.documents_access_log_id_seq OWNER TO postgres;

--
-- TOC entry 374 (class 1259 OID 40237)
-- Name: documents_access_log; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.documents_access_log (
    id integer DEFAULT nextval('template.documents_access_log_id_seq'::regclass) NOT NULL,
    document_id integer NOT NULL,
    user_id integer NOT NULL,
    access_type text NOT NULL,
    accessed_at timestamp without time zone DEFAULT now() NOT NULL,
    ip_address text,
    user_agent text
);


ALTER TABLE client_109.documents_access_log OWNER TO postgres;

--
-- TOC entry 334 (class 1259 OID 39886)
-- Name: documents_access_log_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.documents_access_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.documents_access_log_id_seq OWNER TO postgres;

--
-- TOC entry 326 (class 1259 OID 39877)
-- Name: documents_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.documents_id_seq OWNER TO postgres;

--
-- TOC entry 321 (class 1259 OID 39871)
-- Name: feedbacks_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.feedbacks_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.feedbacks_id_seq OWNER TO postgres;

--
-- TOC entry 357 (class 1259 OID 39998)
-- Name: feedbacks; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.feedbacks (
    id integer DEFAULT nextval('client_109.feedbacks_id_seq'::regclass) NOT NULL,
    tenant_id integer,
    property_id integer,
    rating integer,
    comment text,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    tenant_info_id integer
);


ALTER TABLE client_109.feedbacks OWNER TO postgres;

--
-- TOC entry 265 (class 1259 OID 28179)
-- Name: financial_entries_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.financial_entries_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.financial_entries_id_seq OWNER TO postgres;

--
-- TOC entry 372 (class 1259 OID 40190)
-- Name: financial_entries; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.financial_entries (
    id integer DEFAULT nextval('template.financial_entries_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    date date NOT NULL,
    type text NOT NULL,
    category text NOT NULL,
    amount numeric(10,2) NOT NULL,
    recurring boolean DEFAULT false,
    frequency text,
    description text,
    source text NOT NULL,
    related_entity_id integer,
    related_entity_type text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE client_109.financial_entries OWNER TO postgres;

--
-- TOC entry 335 (class 1259 OID 39887)
-- Name: financial_entries_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.financial_entries_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.financial_entries_id_seq OWNER TO postgres;

--
-- TOC entry 267 (class 1259 OID 28191)
-- Name: folders_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.folders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.folders_id_seq OWNER TO postgres;

--
-- TOC entry 373 (class 1259 OID 40201)
-- Name: folders; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.folders (
    id integer DEFAULT nextval('template.folders_id_seq'::regclass) NOT NULL,
    name text NOT NULL,
    parent_id integer,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_109.folders OWNER TO postgres;

--
-- TOC entry 336 (class 1259 OID 39888)
-- Name: folders_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.folders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.folders_id_seq OWNER TO postgres;

--
-- TOC entry 392 (class 1259 OID 40946)
-- Name: form_responses_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.form_responses_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.form_responses_id_seq OWNER TO postgres;

--
-- TOC entry 397 (class 1259 OID 41023)
-- Name: form_responses; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.form_responses (
    id integer DEFAULT nextval('client_109.form_responses_id_seq'::regclass) NOT NULL,
    form_id integer NOT NULL,
    response_data jsonb NOT NULL,
    ip_address text,
    user_agent text,
    created_at timestamp without time zone DEFAULT now(),
    link_id integer
);


ALTER TABLE client_109.form_responses OWNER TO postgres;

--
-- TOC entry 7366 (class 0 OID 0)
-- Dependencies: 397
-- Name: TABLE form_responses; Type: COMMENT; Schema: client_109; Owner: postgres
--

COMMENT ON TABLE client_109.form_responses IS 'Réponses soumises aux formulaires';


--
-- TOC entry 409 (class 1259 OID 41232)
-- Name: form_submissions; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.form_submissions (
    id integer NOT NULL,
    link_id integer NOT NULL,
    form_data jsonb NOT NULL,
    ip_address character varying(50),
    user_agent text,
    created_at timestamp without time zone DEFAULT now(),
    form_id integer
);


ALTER TABLE client_109.form_submissions OWNER TO postgres;

--
-- TOC entry 408 (class 1259 OID 41231)
-- Name: form_submissions_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.form_submissions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.form_submissions_id_seq OWNER TO postgres;

--
-- TOC entry 7367 (class 0 OID 0)
-- Dependencies: 408
-- Name: form_submissions_id_seq; Type: SEQUENCE OWNED BY; Schema: client_109; Owner: postgres
--

ALTER SEQUENCE client_109.form_submissions_id_seq OWNED BY client_109.form_submissions.id;


--
-- TOC entry 388 (class 1259 OID 40942)
-- Name: forms_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.forms_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.forms_id_seq OWNER TO postgres;

--
-- TOC entry 394 (class 1259 OID 40974)
-- Name: forms; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.forms (
    id integer DEFAULT nextval('client_109.forms_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    title character varying(100) NOT NULL,
    description text,
    fields jsonb NOT NULL,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_109.forms OWNER TO postgres;

--
-- TOC entry 7368 (class 0 OID 0)
-- Dependencies: 394
-- Name: TABLE forms; Type: COMMENT; Schema: client_109; Owner: postgres
--

COMMENT ON TABLE client_109.forms IS 'Formulaires créés indépendamment des liens';


--
-- TOC entry 391 (class 1259 OID 40945)
-- Name: link_forms_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.link_forms_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.link_forms_id_seq OWNER TO postgres;

--
-- TOC entry 396 (class 1259 OID 41004)
-- Name: link_forms; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.link_forms (
    id integer DEFAULT nextval('client_109.link_forms_id_seq'::regclass) NOT NULL,
    link_id integer NOT NULL,
    form_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_109.link_forms OWNER TO postgres;

--
-- TOC entry 7369 (class 0 OID 0)
-- Dependencies: 396
-- Name: TABLE link_forms; Type: COMMENT; Schema: client_109; Owner: postgres
--

COMMENT ON TABLE client_109.link_forms IS 'Association entre liens et formulaires';


--
-- TOC entry 389 (class 1259 OID 40943)
-- Name: link_profiles_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.link_profiles_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.link_profiles_id_seq OWNER TO postgres;

--
-- TOC entry 393 (class 1259 OID 40947)
-- Name: link_profiles; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.link_profiles (
    id integer DEFAULT nextval('client_109.link_profiles_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    slug character varying(100) NOT NULL,
    title character varying(100) NOT NULL,
    description text,
    background_color character varying(20) DEFAULT '#ffffff'::character varying,
    text_color character varying(20) DEFAULT '#000000'::character varying,
    accent_color character varying(20) DEFAULT '#70C7BA'::character varying,
    logo_url text,
    views integer DEFAULT 0,
    background_image text,
    background_pattern text,
    button_style character varying(20) DEFAULT 'rounded'::character varying,
    button_radius integer DEFAULT 8,
    font_family character varying(50) DEFAULT 'Inter'::character varying,
    animation character varying(30) DEFAULT 'fade'::character varying,
    custom_css text,
    custom_theme jsonb,
    background_saturation integer DEFAULT 100,
    background_hue_rotate integer DEFAULT 0,
    background_sepia integer DEFAULT 0,
    background_grayscale integer DEFAULT 0,
    background_invert integer DEFAULT 0,
    background_color_filter character varying(20),
    background_color_filter_opacity real DEFAULT 0.3,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now(),
    is_paused boolean DEFAULT false
);


ALTER TABLE client_109.link_profiles OWNER TO postgres;

--
-- TOC entry 7370 (class 0 OID 0)
-- Dependencies: 393
-- Name: TABLE link_profiles; Type: COMMENT; Schema: client_109; Owner: postgres
--

COMMENT ON TABLE client_109.link_profiles IS 'Profils de liens des utilisateurs';


--
-- TOC entry 390 (class 1259 OID 40944)
-- Name: links_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.links_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.links_id_seq OWNER TO postgres;

--
-- TOC entry 395 (class 1259 OID 40984)
-- Name: links; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.links (
    id integer DEFAULT nextval('client_109.links_id_seq'::regclass) NOT NULL,
    profile_id integer NOT NULL,
    title character varying(100) NOT NULL,
    url text NOT NULL,
    icon text,
    enabled boolean DEFAULT true,
    clicks integer DEFAULT 0,
    "position" integer DEFAULT 0,
    featured boolean DEFAULT false,
    custom_color character varying(20),
    custom_text_color character varying(20),
    animation character varying(30),
    type character varying(20) DEFAULT 'link'::character varying,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now(),
    button_style character varying(20),
    user_id integer,
    form_definition jsonb
);


ALTER TABLE client_109.links OWNER TO postgres;

--
-- TOC entry 7371 (class 0 OID 0)
-- Dependencies: 395
-- Name: TABLE links; Type: COMMENT; Schema: client_109; Owner: postgres
--

COMMENT ON TABLE client_109.links IS 'Liens des profils';


--
-- TOC entry 269 (class 1259 OID 28253)
-- Name: maintenance_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.maintenance_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.maintenance_id_seq OWNER TO postgres;

--
-- TOC entry 376 (class 1259 OID 40256)
-- Name: maintenance; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.maintenance (
    id integer DEFAULT nextval('template.maintenance_id_seq'::regclass) NOT NULL,
    title text NOT NULL,
    description text,
    "propertyId" integer NOT NULL,
    status text DEFAULT 'pending'::text,
    "createdAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    user_id integer,
    total_cost numeric(10,2),
    document_id integer,
    document_ids jsonb DEFAULT '[]'::jsonb,
    reported_by text
);


ALTER TABLE client_109.maintenance OWNER TO postgres;

--
-- TOC entry 339 (class 1259 OID 39894)
-- Name: maintenance_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.maintenance_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.maintenance_id_seq OWNER TO postgres;

--
-- TOC entry 277 (class 1259 OID 28342)
-- Name: pdf_configuration_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.pdf_configuration_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.pdf_configuration_id_seq OWNER TO postgres;

--
-- TOC entry 381 (class 1259 OID 40331)
-- Name: pdf_configuration; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.pdf_configuration (
    id integer DEFAULT nextval('template.pdf_configuration_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    name character varying(100) NOT NULL,
    orientation character varying(20) DEFAULT 'portrait'::character varying,
    page_size character varying(20) DEFAULT 'A4'::character varying,
    margin_top integer DEFAULT 20,
    margin_right integer DEFAULT 10,
    margin_bottom integer DEFAULT 20,
    margin_left integer DEFAULT 10,
    show_header boolean DEFAULT true,
    show_footer boolean DEFAULT true,
    show_pagination boolean DEFAULT true,
    show_filters boolean DEFAULT true,
    default_config boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    header_color character varying(20) DEFAULT '#f3f4f6'::character varying,
    alternate_row_color character varying(20) DEFAULT '#f9fafb'::character varying,
    items_per_page integer DEFAULT 25,
    custom_title text,
    font_family character varying(100) DEFAULT 'Helvetica'::character varying,
    font_size integer DEFAULT 10,
    theme_id integer,
    accent_color character varying(20),
    watermark_text text,
    watermark_opacity double precision DEFAULT 0.1,
    compress_pdf boolean DEFAULT true,
    password_protection text,
    print_background boolean DEFAULT true,
    scale double precision DEFAULT 1.0,
    landscape_scaling boolean DEFAULT true,
    header_height integer DEFAULT 30,
    footer_height integer DEFAULT 20
);


ALTER TABLE client_109.pdf_configuration OWNER TO postgres;

--
-- TOC entry 343 (class 1259 OID 39898)
-- Name: pdf_configuration_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.pdf_configuration_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.pdf_configuration_id_seq OWNER TO postgres;

--
-- TOC entry 279 (class 1259 OID 28361)
-- Name: pdf_document_preferences_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.pdf_document_preferences_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.pdf_document_preferences_id_seq OWNER TO postgres;

--
-- TOC entry 383 (class 1259 OID 40373)
-- Name: pdf_document_preferences; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.pdf_document_preferences (
    id integer DEFAULT nextval('template.pdf_document_preferences_id_seq'::regclass) NOT NULL,
    configuration_id integer NOT NULL,
    document_type character varying(20) NOT NULL,
    enabled boolean DEFAULT true,
    display_order integer DEFAULT 0,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    columns_to_display text[],
    custom_title character varying(255),
    table_header_color character varying(10),
    table_text_color character varying(10),
    table_alternate_color character varying(10),
    max_items_per_page integer DEFAULT 10,
    user_id integer,
    CONSTRAINT pdf_document_preferences_document_type_check CHECK (((document_type)::text = ANY ((ARRAY['visits'::character varying, 'tenants'::character varying, 'maintenance'::character varying, 'transactions'::character varying])::text[])))
);


ALTER TABLE client_109.pdf_document_preferences OWNER TO postgres;

--
-- TOC entry 345 (class 1259 OID 39900)
-- Name: pdf_document_preferences_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.pdf_document_preferences_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.pdf_document_preferences_id_seq OWNER TO postgres;

--
-- TOC entry 281 (class 1259 OID 28376)
-- Name: pdf_logos_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.pdf_logos_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.pdf_logos_id_seq OWNER TO postgres;

--
-- TOC entry 384 (class 1259 OID 40390)
-- Name: pdf_logos; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.pdf_logos (
    id integer DEFAULT nextval('template.pdf_logos_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    name character varying(100) NOT NULL,
    image_data text NOT NULL,
    width integer DEFAULT 100,
    height integer DEFAULT 100,
    is_default boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE client_109.pdf_logos OWNER TO postgres;

--
-- TOC entry 346 (class 1259 OID 39901)
-- Name: pdf_logos_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.pdf_logos_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.pdf_logos_id_seq OWNER TO postgres;

--
-- TOC entry 283 (class 1259 OID 28396)
-- Name: pdf_templates_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.pdf_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.pdf_templates_id_seq OWNER TO postgres;

--
-- TOC entry 385 (class 1259 OID 40403)
-- Name: pdf_templates; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.pdf_templates (
    id integer DEFAULT nextval('template.pdf_templates_id_seq'::regclass) NOT NULL,
    name character varying(100) NOT NULL,
    type character varying(50) NOT NULL,
    columns jsonb NOT NULL,
    header_template text,
    footer_template text,
    is_default boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    header_color character varying(20) DEFAULT '#f3f4f6'::character varying,
    alternate_row_color character varying(20) DEFAULT '#f9fafb'::character varying,
    items_per_page integer DEFAULT 25,
    default_title text,
    border_style character varying(20) DEFAULT 'solid'::character varying,
    border_width integer DEFAULT 1,
    row_padding integer DEFAULT 8,
    cell_alignment character varying(20) DEFAULT 'left'::character varying,
    user_id integer
);


ALTER TABLE client_109.pdf_templates OWNER TO postgres;

--
-- TOC entry 347 (class 1259 OID 39902)
-- Name: pdf_templates_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.pdf_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.pdf_templates_id_seq OWNER TO postgres;

--
-- TOC entry 285 (class 1259 OID 28412)
-- Name: pdf_themes_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.pdf_themes_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.pdf_themes_id_seq OWNER TO postgres;

--
-- TOC entry 386 (class 1259 OID 40421)
-- Name: pdf_themes; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.pdf_themes (
    id integer DEFAULT nextval('template.pdf_themes_id_seq'::regclass) NOT NULL,
    name character varying(100) NOT NULL,
    header_color character varying(20) NOT NULL,
    alternate_row_color character varying(20) NOT NULL,
    text_color character varying(20) DEFAULT '#000000'::character varying,
    border_color character varying(20) DEFAULT '#e5e7eb'::character varying,
    accent_color character varying(20) DEFAULT '#3b82f6'::character varying,
    background_color character varying(20) DEFAULT '#ffffff'::character varying,
    font_family character varying(100) DEFAULT 'Helvetica'::character varying,
    is_default boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    user_id integer
);


ALTER TABLE client_109.pdf_themes OWNER TO postgres;

--
-- TOC entry 348 (class 1259 OID 39903)
-- Name: pdf_themes_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.pdf_themes_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.pdf_themes_id_seq OWNER TO postgres;

--
-- TOC entry 315 (class 1259 OID 39862)
-- Name: properties_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.properties_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.properties_id_seq OWNER TO postgres;

--
-- TOC entry 352 (class 1259 OID 39941)
-- Name: properties; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.properties (
    id integer DEFAULT nextval('client_109.properties_id_seq'::regclass) NOT NULL,
    name text NOT NULL,
    address text NOT NULL,
    description text,
    type text NOT NULL,
    units integer,
    bedrooms integer,
    floors integer,
    bathrooms integer,
    toilets integer,
    energy_class text,
    energy_emissions text,
    living_area integer,
    land_area integer,
    has_parking boolean,
    has_terrace boolean,
    has_garage boolean,
    has_outbuilding boolean,
    has_balcony boolean,
    has_elevator boolean,
    has_cellar boolean,
    has_garden boolean,
    is_new_construction boolean,
    purchase_price numeric,
    monthly_rent numeric,
    monthly_expenses numeric,
    loan_amount numeric,
    monthly_loan_payment numeric,
    loan_duration integer,
    status text,
    construction_year integer,
    purchase_date timestamp without time zone,
    rooms integer,
    isnewconstruction boolean,
    images jsonb,
    user_id integer NOT NULL,
    area integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_109.properties OWNER TO postgres;

--
-- TOC entry 325 (class 1259 OID 39876)
-- Name: property_analyses_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.property_analyses_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.property_analyses_id_seq OWNER TO postgres;

--
-- TOC entry 363 (class 1259 OID 40073)
-- Name: property_analyses; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.property_analyses (
    id integer DEFAULT nextval('client_109.property_analyses_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    analysis_type text NOT NULL,
    analysis_data jsonb,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_109.property_analyses OWNER TO postgres;

--
-- TOC entry 324 (class 1259 OID 39875)
-- Name: property_coordinates_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.property_coordinates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.property_coordinates_id_seq OWNER TO postgres;

--
-- TOC entry 360 (class 1259 OID 40044)
-- Name: property_coordinates; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.property_coordinates (
    id integer DEFAULT nextval('client_109.property_coordinates_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    latitude numeric,
    longitude numeric,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_109.property_coordinates OWNER TO postgres;

--
-- TOC entry 271 (class 1259 OID 28266)
-- Name: property_financial_goals_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.property_financial_goals_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.property_financial_goals_id_seq OWNER TO postgres;

--
-- TOC entry 378 (class 1259 OID 40295)
-- Name: property_financial_goals; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.property_financial_goals (
    id integer DEFAULT nextval('template.property_financial_goals_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    title text NOT NULL,
    type text NOT NULL,
    target_value numeric(10,2) NOT NULL,
    current_value numeric(10,2),
    deadline date,
    status text DEFAULT 'pending'::text NOT NULL,
    notes text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE client_109.property_financial_goals OWNER TO postgres;

--
-- TOC entry 340 (class 1259 OID 39895)
-- Name: property_financial_goals_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.property_financial_goals_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.property_financial_goals_id_seq OWNER TO postgres;

--
-- TOC entry 273 (class 1259 OID 28278)
-- Name: property_financial_snapshots_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.property_financial_snapshots_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.property_financial_snapshots_id_seq OWNER TO postgres;

--
-- TOC entry 379 (class 1259 OID 40306)
-- Name: property_financial_snapshots; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.property_financial_snapshots (
    id integer DEFAULT nextval('template.property_financial_snapshots_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    snapshot_date date NOT NULL,
    gross_rental_yield numeric(10,2),
    net_rental_yield numeric(10,2),
    cash_on_cash_return numeric(10,2),
    cap_rate numeric(10,2),
    monthly_cash_flow numeric(10,2),
    total_income numeric(10,2),
    total_expenses numeric(10,2),
    occupancy_rate numeric(10,2),
    metadata jsonb DEFAULT '{}'::jsonb,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE client_109.property_financial_snapshots OWNER TO postgres;

--
-- TOC entry 341 (class 1259 OID 39896)
-- Name: property_financial_snapshots_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.property_financial_snapshots_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.property_financial_snapshots_id_seq OWNER TO postgres;

--
-- TOC entry 305 (class 1259 OID 32469)
-- Name: property_history_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.property_history_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.property_history_id_seq OWNER TO postgres;

--
-- TOC entry 368 (class 1259 OID 40142)
-- Name: property_history; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.property_history (
    id integer DEFAULT nextval('template.property_history_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    field text NOT NULL,
    old_value text,
    new_value text,
    change_type text NOT NULL,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    metadata jsonb DEFAULT '{}'::jsonb
);


ALTER TABLE client_109.property_history OWNER TO postgres;

--
-- TOC entry 330 (class 1259 OID 39882)
-- Name: property_history_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.property_history_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.property_history_id_seq OWNER TO postgres;

--
-- TOC entry 307 (class 1259 OID 32480)
-- Name: property_works_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.property_works_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.property_works_id_seq OWNER TO postgres;

--
-- TOC entry 369 (class 1259 OID 40152)
-- Name: property_works; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.property_works (
    id integer DEFAULT nextval('template.property_works_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    title text NOT NULL,
    description text,
    type text NOT NULL,
    status text DEFAULT 'planned'::text NOT NULL,
    start_date timestamp without time zone,
    end_date timestamp without time zone,
    estimated_cost numeric(10,2),
    actual_cost numeric(10,2),
    contractor text,
    priority text DEFAULT 'medium'::text,
    documents jsonb DEFAULT '[]'::jsonb,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_109.property_works OWNER TO postgres;

--
-- TOC entry 331 (class 1259 OID 39883)
-- Name: property_works_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.property_works_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.property_works_id_seq OWNER TO postgres;

--
-- TOC entry 275 (class 1259 OID 28295)
-- Name: rent_receipts_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.rent_receipts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.rent_receipts_id_seq OWNER TO postgres;

--
-- TOC entry 380 (class 1259 OID 40316)
-- Name: rent_receipts; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.rent_receipts (
    id integer DEFAULT nextval('template.rent_receipts_id_seq'::regclass) NOT NULL,
    tenant_id integer NOT NULL,
    property_id integer NOT NULL,
    transaction_id integer NOT NULL,
    amount real NOT NULL,
    charges real NOT NULL,
    rent_period_start date NOT NULL,
    rent_period_end date NOT NULL,
    status text DEFAULT 'generated'::text NOT NULL,
    document_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE client_109.rent_receipts OWNER TO postgres;

--
-- TOC entry 342 (class 1259 OID 39897)
-- Name: rent_receipts_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.rent_receipts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.rent_receipts_id_seq OWNER TO postgres;

--
-- TOC entry 259 (class 1259 OID 28097)
-- Name: reports_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.reports_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.reports_id_seq OWNER TO postgres;

--
-- TOC entry 365 (class 1259 OID 40106)
-- Name: reports; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.reports (
    id integer DEFAULT nextval('template.reports_id_seq'::regclass) NOT NULL,
    title text NOT NULL,
    description text,
    "reportType" text,
    "fileUrl" text,
    "userId" integer,
    "createdAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE client_109.reports OWNER TO postgres;

--
-- TOC entry 328 (class 1259 OID 39880)
-- Name: reports_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.reports_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.reports_id_seq OWNER TO postgres;

--
-- TOC entry 428 (class 1259 OID 44467)
-- Name: storage_management; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.storage_management (
    id integer NOT NULL,
    total_used bigint DEFAULT 0,
    last_calculation timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    storage_categories jsonb DEFAULT '{"other": 0, "images": 0, "documents": 0, "attachments": 0}'::jsonb,
    cleanup_history jsonb DEFAULT '[]'::jsonb,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE client_109.storage_management OWNER TO postgres;

--
-- TOC entry 427 (class 1259 OID 44466)
-- Name: storage_management_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.storage_management_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.storage_management_id_seq OWNER TO postgres;

--
-- TOC entry 7372 (class 0 OID 0)
-- Dependencies: 427
-- Name: storage_management_id_seq; Type: SEQUENCE OWNED BY; Schema: client_109; Owner: postgres
--

ALTER SEQUENCE client_109.storage_management_id_seq OWNED BY client_109.storage_management.id;


--
-- TOC entry 303 (class 1259 OID 32447)
-- Name: storage_transactions_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.storage_transactions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.storage_transactions_id_seq OWNER TO postgres;

--
-- TOC entry 367 (class 1259 OID 40132)
-- Name: storage_transactions; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.storage_transactions (
    id integer DEFAULT nextval('template.storage_transactions_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    previous_tier character varying(10) NOT NULL,
    new_tier character varying(10) NOT NULL,
    amount_paid numeric(10,2) NOT NULL,
    transaction_date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    expiration_date timestamp without time zone,
    payment_method character varying(50),
    payment_reference character varying(100),
    status character varying(20) DEFAULT 'completed'::character varying,
    notes text
);


ALTER TABLE client_109.storage_transactions OWNER TO postgres;

--
-- TOC entry 329 (class 1259 OID 39881)
-- Name: storage_transactions_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.storage_transactions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.storage_transactions_id_seq OWNER TO postgres;

--
-- TOC entry 344 (class 1259 OID 39899)
-- Name: storage_usage_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.storage_usage_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.storage_usage_id_seq OWNER TO postgres;

--
-- TOC entry 382 (class 1259 OID 40364)
-- Name: storage_usage; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.storage_usage (
    id integer DEFAULT nextval('client_109.storage_usage_id_seq'::regclass) NOT NULL,
    resource_type text NOT NULL,
    resource_id integer NOT NULL,
    filename text,
    file_path text,
    file_type text,
    size_bytes bigint NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    deleted_at timestamp without time zone
);


ALTER TABLE client_109.storage_usage OWNER TO postgres;

--
-- TOC entry 316 (class 1259 OID 39863)
-- Name: tenant_documents_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.tenant_documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.tenant_documents_id_seq OWNER TO postgres;

--
-- TOC entry 354 (class 1259 OID 39969)
-- Name: tenant_documents; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.tenant_documents (
    id integer DEFAULT nextval('client_109.tenant_documents_id_seq'::regclass) NOT NULL,
    tenant_id integer NOT NULL,
    document_id integer NOT NULL,
    document_type text DEFAULT 'lease'::text NOT NULL,
    uploaded_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_109.tenant_documents OWNER TO postgres;

--
-- TOC entry 317 (class 1259 OID 39865)
-- Name: tenant_history_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.tenant_history_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.tenant_history_id_seq OWNER TO postgres;

--
-- TOC entry 358 (class 1259 OID 40008)
-- Name: tenant_history; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.tenant_history (
    id integer DEFAULT nextval('client_109.tenant_history_id_seq'::regclass) NOT NULL,
    rating integer NOT NULL,
    feedback text,
    category text DEFAULT 'general'::text,
    tenant_full_name text,
    original_user_id integer,
    event_type text DEFAULT 'evaluation'::text,
    event_severity integer DEFAULT 0,
    event_details jsonb,
    documents text[],
    bail_status text,
    bail_id integer,
    property_name text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    created_by integer,
    tenant_id integer,
    is_orphaned boolean DEFAULT false,
    tenant_info_id integer,
    updated_at timestamp without time zone DEFAULT now(),
    updated_by integer
);


ALTER TABLE client_109.tenant_history OWNER TO postgres;

--
-- TOC entry 319 (class 1259 OID 39869)
-- Name: tenants_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.tenants_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.tenants_id_seq OWNER TO postgres;

--
-- TOC entry 359 (class 1259 OID 40022)
-- Name: tenants; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.tenants (
    id integer DEFAULT nextval('client_109.tenants_id_seq'::regclass) NOT NULL,
    user_id integer,
    property_id integer NOT NULL,
    lease_start timestamp without time zone NOT NULL,
    lease_end timestamp without time zone NOT NULL,
    rent_amount numeric(10,2) NOT NULL,
    lease_type text NOT NULL,
    active boolean DEFAULT true,
    lease_status text DEFAULT 'actif'::text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    tenant_id integer,
    tenant_info_id integer
);


ALTER TABLE client_109.tenants OWNER TO postgres;

--
-- TOC entry 320 (class 1259 OID 39870)
-- Name: tenants_info_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.tenants_info_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.tenants_info_id_seq OWNER TO postgres;

--
-- TOC entry 356 (class 1259 OID 39988)
-- Name: tenants_info; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.tenants_info (
    id integer DEFAULT nextval('client_109.tenants_info_id_seq'::regclass) NOT NULL,
    full_name text NOT NULL,
    email text,
    phone_number text,
    notes text,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_109.tenants_info OWNER TO postgres;

--
-- TOC entry 299 (class 1259 OID 30396)
-- Name: transaction_attachments_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.transaction_attachments_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.transaction_attachments_id_seq OWNER TO postgres;

--
-- TOC entry 362 (class 1259 OID 40064)
-- Name: transaction_attachments; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.transaction_attachments (
    id integer DEFAULT nextval('template.transaction_attachments_id_seq'::regclass) NOT NULL,
    transaction_id integer NOT NULL,
    file_name character varying(255) NOT NULL,
    file_path character varying(255) NOT NULL,
    file_type character varying(100),
    file_size integer,
    uploaded_at timestamp with time zone DEFAULT now()
);


ALTER TABLE client_109.transaction_attachments OWNER TO postgres;

--
-- TOC entry 323 (class 1259 OID 39874)
-- Name: transaction_attachments_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.transaction_attachments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.transaction_attachments_id_seq OWNER TO postgres;

--
-- TOC entry 297 (class 1259 OID 30385)
-- Name: transactions_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.transactions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.transactions_id_seq OWNER TO postgres;

--
-- TOC entry 361 (class 1259 OID 40054)
-- Name: transactions; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.transactions (
    id integer DEFAULT nextval('template.transactions_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    property_id integer,
    tenant_id integer,
    document_id integer,
    document_ids integer[],
    type text NOT NULL,
    category text NOT NULL,
    amount numeric(10,2) NOT NULL,
    description text,
    date timestamp without time zone NOT NULL,
    status text NOT NULL,
    payment_method text,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_109.transactions OWNER TO postgres;

--
-- TOC entry 322 (class 1259 OID 39873)
-- Name: transactions_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.transactions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.transactions_id_seq OWNER TO postgres;

--
-- TOC entry 432 (class 1259 OID 44620)
-- Name: users; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.users (
    id integer NOT NULL,
    public_user_id integer NOT NULL,
    client_role text NOT NULL,
    permissions jsonb DEFAULT '{}'::jsonb,
    client_settings jsonb DEFAULT '{}'::jsonb,
    last_client_access timestamp without time zone,
    client_created_at timestamp without time zone DEFAULT now(),
    client_updated_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_109.users OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 16853)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id integer NOT NULL,
    username text NOT NULL,
    password text NOT NULL,
    full_name text,
    email text,
    phone_number text,
    role text DEFAULT 'tenant'::text,
    profile_image text,
    archived boolean DEFAULT false,
    account_type text DEFAULT 'individual'::text,
    parent_account_id integer,
    settings jsonb DEFAULT '{}'::jsonb,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    is_premium boolean DEFAULT false,
    request_count integer DEFAULT 0,
    request_limit integer DEFAULT 100,
    preferred_ai_model text DEFAULT 'openai-gpt-3.5'::text,
    storage_used numeric(20,2) DEFAULT 0,
    storage_limit numeric(20,2) DEFAULT '5368709120'::bigint,
    storage_tier character varying(10) DEFAULT 'basic'::character varying,
    last_reset_date timestamp without time zone DEFAULT now(),
    storage_last_calculated timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT chk_preferred_ai_model CHECK ((preferred_ai_model = ANY (ARRAY['openai-gpt-3.5'::text, 'openai-gpt-4o'::text]))),
    CONSTRAINT users_account_type_check CHECK ((account_type = ANY (ARRAY['individual'::text, 'enterprise'::text]))),
    CONSTRAINT users_role_check CHECK ((role = ANY (ARRAY['admin'::text, 'clients'::text, 'manager'::text, 'tenant'::text, 'client'::text])))
);

ALTER TABLE ONLY public.users FORCE ROW LEVEL SECURITY;


ALTER TABLE public.users OWNER TO postgres;

--
-- TOC entry 433 (class 1259 OID 44637)
-- Name: user_profiles; Type: VIEW; Schema: client_109; Owner: postgres
--

CREATE VIEW client_109.user_profiles AS
 SELECT cu.id AS client_user_id,
    pu.id AS public_user_id,
    pu.username,
    pu.email,
    pu.full_name,
    pu.phone_number,
    pu.profile_image,
    pu.is_premium,
    pu.request_limit,
    pu.preferred_ai_model,
    pu.storage_limit,
    cu.client_role,
    cu.permissions,
    cu.client_settings
   FROM (client_109.users cu
     JOIN public.users pu ON ((cu.public_user_id = pu.id)));


ALTER VIEW client_109.user_profiles OWNER TO postgres;

--
-- TOC entry 431 (class 1259 OID 44619)
-- Name: users_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.users_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.users_id_seq OWNER TO postgres;

--
-- TOC entry 7374 (class 0 OID 0)
-- Dependencies: 431
-- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: client_109; Owner: postgres
--

ALTER SEQUENCE client_109.users_id_seq OWNED BY client_109.users.id;


--
-- TOC entry 349 (class 1259 OID 39904)
-- Name: visits_id_seq; Type: SEQUENCE; Schema: client_109; Owner: postgres
--

CREATE SEQUENCE client_109.visits_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_109.visits_id_seq OWNER TO postgres;

--
-- TOC entry 387 (class 1259 OID 40470)
-- Name: visits; Type: TABLE; Schema: client_109; Owner: postgres
--

CREATE TABLE client_109.visits (
    id integer DEFAULT nextval('client_109.visits_id_seq'::regclass) NOT NULL,
    first_name text NOT NULL,
    last_name text NOT NULL,
    email text NOT NULL,
    phone text NOT NULL,
    datetime timestamp without time zone NOT NULL,
    visit_type text NOT NULL,
    property_id integer,
    manual_address text,
    message text,
    status text DEFAULT 'pending'::text,
    rating integer,
    feedback text,
    archived boolean DEFAULT false,
    agent_id integer,
    source text DEFAULT 'manual'::text,
    documents jsonb DEFAULT '[]'::jsonb,
    reminder_sent boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_109.visits OWNER TO postgres;

--
-- TOC entry 252 (class 1259 OID 27944)
-- Name: ai_conversations_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.ai_conversations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.ai_conversations_id_seq OWNER TO postgres;

--
-- TOC entry 493 (class 1259 OID 44851)
-- Name: ai_conversations; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.ai_conversations (
    id integer DEFAULT nextval('template.ai_conversations_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    title text NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    status text DEFAULT 'active'::text NOT NULL,
    category text DEFAULT 'general'::text NOT NULL,
    context jsonb DEFAULT '{}'::jsonb NOT NULL,
    CONSTRAINT ai_conversations_category_check CHECK ((category = ANY (ARRAY['general'::text, 'maintenance'::text, 'lease'::text, 'payment'::text, 'other'::text]))),
    CONSTRAINT ai_conversations_status_check CHECK ((status = ANY (ARRAY['active'::text, 'closed'::text])))
);


ALTER TABLE client_129.ai_conversations OWNER TO postgres;

--
-- TOC entry 438 (class 1259 OID 44684)
-- Name: ai_conversations_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.ai_conversations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.ai_conversations_id_seq OWNER TO postgres;

--
-- TOC entry 253 (class 1259 OID 27946)
-- Name: ai_messages_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.ai_messages_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.ai_messages_id_seq OWNER TO postgres;

--
-- TOC entry 492 (class 1259 OID 44832)
-- Name: ai_messages; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.ai_messages (
    id integer DEFAULT nextval('template.ai_messages_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    role text DEFAULT 'user'::text NOT NULL,
    content text NOT NULL,
    metadata jsonb DEFAULT '{}'::jsonb NOT NULL,
    conversation_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    is_urgent boolean DEFAULT false NOT NULL,
    model_id text DEFAULT 'huggingface'::text,
    provider text DEFAULT 'huggingface'::text,
    CONSTRAINT ai_messages_role_check CHECK ((role = ANY (ARRAY['user'::text, 'assistant'::text, 'system'::text])))
);


ALTER TABLE client_129.ai_messages OWNER TO postgres;

--
-- TOC entry 440 (class 1259 OID 44686)
-- Name: ai_messages_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.ai_messages_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.ai_messages_id_seq OWNER TO postgres;

--
-- TOC entry 254 (class 1259 OID 27948)
-- Name: ai_suggestions_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.ai_suggestions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.ai_suggestions_id_seq OWNER TO postgres;

--
-- TOC entry 485 (class 1259 OID 44740)
-- Name: ai_suggestions; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.ai_suggestions (
    id integer DEFAULT nextval('template.ai_suggestions_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    property_id integer,
    type text NOT NULL,
    suggestion text NOT NULL,
    data jsonb DEFAULT '{}'::jsonb NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    status text DEFAULT 'pending'::text NOT NULL,
    CONSTRAINT ai_suggestions_status_check CHECK ((status = ANY (ARRAY['pending'::text, 'accepted'::text, 'rejected'::text]))),
    CONSTRAINT ai_suggestions_type_check CHECK ((type = ANY (ARRAY['rent_price'::text, 'maintenance'::text, 'tenant_management'::text, 'investment'::text])))
);


ALTER TABLE client_129.ai_suggestions OWNER TO postgres;

--
-- TOC entry 441 (class 1259 OID 44687)
-- Name: ai_suggestions_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.ai_suggestions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.ai_suggestions_id_seq OWNER TO postgres;

--
-- TOC entry 414 (class 1259 OID 43535)
-- Name: ai_tokens_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.ai_tokens_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.ai_tokens_id_seq OWNER TO postgres;

--
-- TOC entry 490 (class 1259 OID 44802)
-- Name: ai_tokens; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.ai_tokens (
    id integer DEFAULT nextval('template.ai_tokens_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    tokens integer DEFAULT 0 NOT NULL,
    plan text DEFAULT 'free'::text NOT NULL,
    expires_at timestamp without time zone,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT ai_tokens_plan_check CHECK ((plan = ANY (ARRAY['free'::text, 'basic'::text, 'premium'::text, 'enterprise'::text])))
);


ALTER TABLE client_129.ai_tokens OWNER TO postgres;

--
-- TOC entry 445 (class 1259 OID 44691)
-- Name: ai_tokens_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.ai_tokens_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.ai_tokens_id_seq OWNER TO postgres;

--
-- TOC entry 415 (class 1259 OID 43536)
-- Name: ai_usage_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.ai_usage_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.ai_usage_id_seq OWNER TO postgres;

--
-- TOC entry 491 (class 1259 OID 44816)
-- Name: ai_usage; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.ai_usage (
    id integer DEFAULT nextval('template.ai_usage_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    message_id integer,
    conversation_id integer,
    tokens_used integer NOT NULL,
    model text NOT NULL,
    prompt_tokens integer DEFAULT 0,
    completion_tokens integer DEFAULT 0,
    cost numeric(10,6) DEFAULT '0'::numeric,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT ai_usage_model_check CHECK ((model = ANY (ARRAY['openai-gpt-3.5'::text, 'openai-gpt-4o'::text])))
);


ALTER TABLE client_129.ai_usage OWNER TO postgres;

--
-- TOC entry 446 (class 1259 OID 44692)
-- Name: ai_usage_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.ai_usage_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.ai_usage_id_seq OWNER TO postgres;

--
-- TOC entry 487 (class 1259 OID 44768)
-- Name: analysis_configs; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.analysis_configs (
    id integer DEFAULT nextval('template.analysis_configs_id_seq'::regclass) NOT NULL,
    property_id integer,
    user_id integer,
    name character varying(255) NOT NULL,
    period_type character varying(50) NOT NULL,
    period_value integer NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone
);


ALTER TABLE client_129.analysis_configs OWNER TO postgres;

--
-- TOC entry 442 (class 1259 OID 44688)
-- Name: analysis_configs_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.analysis_configs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.analysis_configs_id_seq OWNER TO postgres;

--
-- TOC entry 509 (class 1259 OID 45041)
-- Name: automatic_reminders; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.automatic_reminders (
    id integer DEFAULT nextval('template.automatic_reminders_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    type text NOT NULL,
    related_entity_type text NOT NULL,
    related_entity_id integer NOT NULL,
    title text NOT NULL,
    message text NOT NULL,
    next_trigger_date date NOT NULL,
    days_in_advance integer DEFAULT 0 NOT NULL,
    recurrence text,
    status text DEFAULT 'active'::text NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_129.automatic_reminders OWNER TO postgres;

--
-- TOC entry 461 (class 1259 OID 44707)
-- Name: automatic_reminders_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.automatic_reminders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.automatic_reminders_id_seq OWNER TO postgres;

--
-- TOC entry 516 (class 1259 OID 45118)
-- Name: company_info; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.company_info (
    id integer DEFAULT nextval('template.company_info_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    company_name character varying(200),
    company_address text,
    company_phone character varying(50),
    company_email character varying(100),
    company_website character varying(100),
    company_siret character varying(50),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE client_129.company_info OWNER TO postgres;

--
-- TOC entry 467 (class 1259 OID 44713)
-- Name: company_info_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.company_info_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.company_info_id_seq OWNER TO postgres;

--
-- TOC entry 510 (class 1259 OID 45056)
-- Name: contract_parties; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.contract_parties (
    id integer DEFAULT nextval('template.contract_parties_id_seq'::regclass) NOT NULL,
    contract_id integer NOT NULL,
    party_id integer NOT NULL,
    party_type text NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer,
    CONSTRAINT contract_parties_party_type_check CHECK ((party_type = ANY (ARRAY['tenant'::text, 'owner'::text, 'manager'::text, 'other'::text])))
);


ALTER TABLE client_129.contract_parties OWNER TO postgres;

--
-- TOC entry 462 (class 1259 OID 44708)
-- Name: contract_parties_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.contract_parties_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.contract_parties_id_seq OWNER TO postgres;

--
-- TOC entry 503 (class 1259 OID 44967)
-- Name: contracts; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.contracts (
    id integer DEFAULT nextval('template.contracts_id_seq'::regclass) NOT NULL,
    name text NOT NULL,
    type text NOT NULL,
    status text DEFAULT 'draft'::text NOT NULL,
    start_date timestamp without time zone NOT NULL,
    end_date timestamp without time zone,
    property_id integer,
    document_id integer,
    signature_required boolean DEFAULT true,
    automated_renewal boolean DEFAULT false,
    renewal_date timestamp without time zone,
    notification_date timestamp without time zone,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT contracts_status_check CHECK ((status = ANY (ARRAY['draft'::text, 'pending_signature'::text, 'active'::text, 'expired'::text, 'terminated'::text]))),
    CONSTRAINT contracts_type_check CHECK ((type = ANY (ARRAY['rental'::text, 'mandate'::text, 'commercial'::text, 'attestation'::text, 'other'::text])))
);


ALTER TABLE client_129.contracts OWNER TO postgres;

--
-- TOC entry 456 (class 1259 OID 44702)
-- Name: contracts_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.contracts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.contracts_id_seq OWNER TO postgres;

--
-- TOC entry 514 (class 1259 OID 45096)
-- Name: document_templates; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.document_templates (
    id integer DEFAULT nextval('template.document_templates_id_seq'::regclass) NOT NULL,
    name text NOT NULL,
    document_type text NOT NULL,
    field_mappings jsonb NOT NULL,
    user_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_129.document_templates OWNER TO postgres;

--
-- TOC entry 466 (class 1259 OID 44712)
-- Name: document_templates_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.document_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.document_templates_id_seq OWNER TO postgres;

--
-- TOC entry 505 (class 1259 OID 44992)
-- Name: documents; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.documents (
    id integer DEFAULT nextval('template.documents_id_seq'::regclass) NOT NULL,
    title text NOT NULL,
    type text DEFAULT 'lease'::text NOT NULL,
    file_path text NOT NULL,
    original_name text NOT NULL,
    template boolean DEFAULT false,
    user_id integer NOT NULL,
    folder_id integer,
    parent_id integer,
    template_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    form_data jsonb DEFAULT '{}'::jsonb,
    content jsonb DEFAULT '{}'::jsonb,
    theme jsonb DEFAULT '{}'::jsonb,
    file_size numeric DEFAULT 0
);


ALTER TABLE client_129.documents OWNER TO postgres;

--
-- TOC entry 513 (class 1259 OID 45087)
-- Name: documents_access_log; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.documents_access_log (
    id integer DEFAULT nextval('template.documents_access_log_id_seq'::regclass) NOT NULL,
    document_id integer NOT NULL,
    user_id integer NOT NULL,
    access_type text NOT NULL,
    accessed_at timestamp without time zone DEFAULT now() NOT NULL,
    ip_address text,
    user_agent text
);


ALTER TABLE client_129.documents_access_log OWNER TO postgres;

--
-- TOC entry 463 (class 1259 OID 44709)
-- Name: documents_access_log_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.documents_access_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.documents_access_log_id_seq OWNER TO postgres;

--
-- TOC entry 455 (class 1259 OID 44701)
-- Name: documents_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.documents_id_seq OWNER TO postgres;

--
-- TOC entry 449 (class 1259 OID 44695)
-- Name: feedbacks_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.feedbacks_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.feedbacks_id_seq OWNER TO postgres;

--
-- TOC entry 495 (class 1259 OID 44878)
-- Name: feedbacks; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.feedbacks (
    id integer DEFAULT nextval('client_129.feedbacks_id_seq'::regclass) NOT NULL,
    tenant_id integer,
    property_id integer,
    rating integer,
    comment text,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    tenant_info_id integer
);


ALTER TABLE client_129.feedbacks OWNER TO postgres;

--
-- TOC entry 511 (class 1259 OID 45066)
-- Name: financial_entries; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.financial_entries (
    id integer DEFAULT nextval('template.financial_entries_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    date date NOT NULL,
    type text NOT NULL,
    category text NOT NULL,
    amount numeric(10,2) NOT NULL,
    recurring boolean DEFAULT false,
    frequency text,
    description text,
    source text NOT NULL,
    related_entity_id integer,
    related_entity_type text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE client_129.financial_entries OWNER TO postgres;

--
-- TOC entry 464 (class 1259 OID 44710)
-- Name: financial_entries_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.financial_entries_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.financial_entries_id_seq OWNER TO postgres;

--
-- TOC entry 512 (class 1259 OID 45077)
-- Name: folders; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.folders (
    id integer DEFAULT nextval('template.folders_id_seq'::regclass) NOT NULL,
    name text NOT NULL,
    parent_id integer,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_129.folders OWNER TO postgres;

--
-- TOC entry 465 (class 1259 OID 44711)
-- Name: folders_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.folders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.folders_id_seq OWNER TO postgres;

--
-- TOC entry 534 (class 1259 OID 45384)
-- Name: form_field_options_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.form_field_options_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.form_field_options_id_seq OWNER TO postgres;

--
-- TOC entry 535 (class 1259 OID 45385)
-- Name: form_field_options; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.form_field_options (
    id integer DEFAULT nextval('client_129.form_field_options_id_seq'::regclass) NOT NULL,
    form_field_id integer NOT NULL,
    value character varying(255) NOT NULL,
    "position" integer DEFAULT 0,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE client_129.form_field_options OWNER TO postgres;

--
-- TOC entry 532 (class 1259 OID 45372)
-- Name: form_fields_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.form_fields_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.form_fields_id_seq OWNER TO postgres;

--
-- TOC entry 533 (class 1259 OID 45373)
-- Name: form_fields; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.form_fields (
    id integer DEFAULT nextval('client_129.form_fields_id_seq'::regclass) NOT NULL,
    link_id integer NOT NULL,
    field_id character varying(50) NOT NULL,
    type character varying(20) NOT NULL,
    label character varying(255) NOT NULL,
    required boolean DEFAULT false,
    "position" integer DEFAULT 0,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    user_id integer,
    CONSTRAINT form_fields_type_check CHECK (((type)::text = ANY (ARRAY[('text'::character varying)::text, ('textarea'::character varying)::text, ('email'::character varying)::text, ('number'::character varying)::text, ('checkbox'::character varying)::text, ('select'::character varying)::text])))
);


ALTER TABLE client_129.form_fields OWNER TO postgres;

--
-- TOC entry 402 (class 1259 OID 41051)
-- Name: form_responses_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.form_responses_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.form_responses_id_seq OWNER TO postgres;

--
-- TOC entry 530 (class 1259 OID 45335)
-- Name: form_responses; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.form_responses (
    id integer DEFAULT nextval('template.form_responses_id_seq'::regclass) NOT NULL,
    form_id integer NOT NULL,
    response_data jsonb NOT NULL,
    ip_address text,
    user_agent text,
    created_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_129.form_responses OWNER TO postgres;

--
-- TOC entry 482 (class 1259 OID 44728)
-- Name: form_responses_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.form_responses_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.form_responses_id_seq OWNER TO postgres;

--
-- TOC entry 448 (class 1259 OID 44694)
-- Name: form_submissions_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.form_submissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.form_submissions_id_seq OWNER TO postgres;

--
-- TOC entry 489 (class 1259 OID 44795)
-- Name: form_submissions; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.form_submissions (
    id integer DEFAULT nextval('client_129.form_submissions_id_seq'::regclass) NOT NULL,
    link_id integer NOT NULL,
    form_data jsonb NOT NULL,
    ip_address character varying(50),
    user_agent text,
    created_at timestamp without time zone DEFAULT now(),
    form_id integer
);


ALTER TABLE client_129.form_submissions OWNER TO postgres;

--
-- TOC entry 398 (class 1259 OID 41047)
-- Name: forms_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.forms_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.forms_id_seq OWNER TO postgres;

--
-- TOC entry 528 (class 1259 OID 45313)
-- Name: forms; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.forms (
    id integer DEFAULT nextval('template.forms_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    title character varying(100) NOT NULL,
    description text,
    fields jsonb NOT NULL,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_129.forms OWNER TO postgres;

--
-- TOC entry 478 (class 1259 OID 44724)
-- Name: forms_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.forms_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.forms_id_seq OWNER TO postgres;

--
-- TOC entry 401 (class 1259 OID 41050)
-- Name: link_forms_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.link_forms_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.link_forms_id_seq OWNER TO postgres;

--
-- TOC entry 529 (class 1259 OID 45324)
-- Name: link_forms; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.link_forms (
    id integer DEFAULT nextval('template.link_forms_id_seq'::regclass) NOT NULL,
    link_id integer NOT NULL,
    form_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_129.link_forms OWNER TO postgres;

--
-- TOC entry 481 (class 1259 OID 44727)
-- Name: link_forms_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.link_forms_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.link_forms_id_seq OWNER TO postgres;

--
-- TOC entry 399 (class 1259 OID 41048)
-- Name: link_profiles_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.link_profiles_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.link_profiles_id_seq OWNER TO postgres;

--
-- TOC entry 527 (class 1259 OID 45285)
-- Name: link_profiles; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.link_profiles (
    id integer DEFAULT nextval('template.link_profiles_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    slug character varying(100) NOT NULL,
    title character varying(100) NOT NULL,
    description text,
    background_color character varying(20) DEFAULT '#ffffff'::character varying,
    text_color character varying(20) DEFAULT '#000000'::character varying,
    accent_color character varying(20) DEFAULT '#70C7BA'::character varying,
    logo_url text,
    views integer DEFAULT 0,
    background_image text,
    background_pattern text,
    button_style character varying(20) DEFAULT 'rounded'::character varying,
    button_radius integer DEFAULT 8,
    font_family character varying(50) DEFAULT 'Inter'::character varying,
    animation character varying(30) DEFAULT 'fade'::character varying,
    custom_css text,
    custom_theme jsonb,
    background_saturation integer DEFAULT 100,
    background_hue_rotate integer DEFAULT 0,
    background_sepia integer DEFAULT 0,
    background_grayscale integer DEFAULT 0,
    background_invert integer DEFAULT 0,
    background_color_filter character varying(20),
    background_color_filter_opacity real DEFAULT 0.3,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now(),
    is_paused boolean DEFAULT false
);


ALTER TABLE client_129.link_profiles OWNER TO postgres;

--
-- TOC entry 479 (class 1259 OID 44725)
-- Name: link_profiles_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.link_profiles_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.link_profiles_id_seq OWNER TO postgres;

--
-- TOC entry 400 (class 1259 OID 41049)
-- Name: links_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.links_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.links_id_seq OWNER TO postgres;

--
-- TOC entry 526 (class 1259 OID 45268)
-- Name: links; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.links (
    id integer DEFAULT nextval('template.links_id_seq'::regclass) NOT NULL,
    profile_id integer NOT NULL,
    title character varying(100) NOT NULL,
    url text NOT NULL,
    icon character varying(50),
    enabled boolean DEFAULT true,
    clicks integer DEFAULT 0,
    "position" integer DEFAULT 0,
    featured boolean DEFAULT false,
    custom_color character varying(20),
    custom_text_color character varying(20),
    animation character varying(30),
    type character varying(20) DEFAULT 'link'::character varying,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now(),
    button_style character varying(20),
    user_id integer,
    form_definition jsonb
);


ALTER TABLE client_129.links OWNER TO postgres;

--
-- TOC entry 480 (class 1259 OID 44726)
-- Name: links_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.links_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.links_id_seq OWNER TO postgres;

--
-- TOC entry 515 (class 1259 OID 45106)
-- Name: maintenance; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.maintenance (
    id integer DEFAULT nextval('template.maintenance_id_seq'::regclass) NOT NULL,
    title text NOT NULL,
    description text,
    "propertyId" integer NOT NULL,
    status text DEFAULT 'pending'::text,
    "createdAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    user_id integer,
    total_cost numeric(10,2),
    document_id integer,
    document_ids jsonb DEFAULT '[]'::jsonb,
    reported_by text
);


ALTER TABLE client_129.maintenance OWNER TO postgres;

--
-- TOC entry 468 (class 1259 OID 44714)
-- Name: maintenance_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.maintenance_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.maintenance_id_seq OWNER TO postgres;

--
-- TOC entry 520 (class 1259 OID 45164)
-- Name: pdf_configuration; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.pdf_configuration (
    id integer DEFAULT nextval('template.pdf_configuration_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    name character varying(100) NOT NULL,
    orientation character varying(20) DEFAULT 'portrait'::character varying,
    page_size character varying(20) DEFAULT 'A4'::character varying,
    margin_top integer DEFAULT 20,
    margin_right integer DEFAULT 10,
    margin_bottom integer DEFAULT 20,
    margin_left integer DEFAULT 10,
    show_header boolean DEFAULT true,
    show_footer boolean DEFAULT true,
    show_pagination boolean DEFAULT true,
    show_filters boolean DEFAULT true,
    default_config boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    header_color character varying(20) DEFAULT '#f3f4f6'::character varying,
    alternate_row_color character varying(20) DEFAULT '#f9fafb'::character varying,
    items_per_page integer DEFAULT 25,
    custom_title text,
    font_family character varying(100) DEFAULT 'Helvetica'::character varying,
    font_size integer DEFAULT 10,
    theme_id integer,
    accent_color character varying(20),
    watermark_text text,
    watermark_opacity double precision DEFAULT 0.1,
    compress_pdf boolean DEFAULT true,
    password_protection text,
    print_background boolean DEFAULT true,
    scale double precision DEFAULT 1.0,
    landscape_scaling boolean DEFAULT true,
    header_height integer DEFAULT 30,
    footer_height integer DEFAULT 20
);


ALTER TABLE client_129.pdf_configuration OWNER TO postgres;

--
-- TOC entry 472 (class 1259 OID 44718)
-- Name: pdf_configuration_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.pdf_configuration_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.pdf_configuration_id_seq OWNER TO postgres;

--
-- TOC entry 522 (class 1259 OID 45206)
-- Name: pdf_document_preferences; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.pdf_document_preferences (
    id integer DEFAULT nextval('template.pdf_document_preferences_id_seq'::regclass) NOT NULL,
    configuration_id integer NOT NULL,
    document_type character varying(20) NOT NULL,
    enabled boolean DEFAULT true,
    display_order integer DEFAULT 0,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    columns_to_display text[],
    custom_title character varying(255),
    table_header_color character varying(10),
    table_text_color character varying(10),
    table_alternate_color character varying(10),
    max_items_per_page integer DEFAULT 10,
    user_id integer,
    CONSTRAINT pdf_document_preferences_document_type_check CHECK (((document_type)::text = ANY ((ARRAY['visits'::character varying, 'tenants'::character varying, 'maintenance'::character varying, 'transactions'::character varying])::text[])))
);


ALTER TABLE client_129.pdf_document_preferences OWNER TO postgres;

--
-- TOC entry 474 (class 1259 OID 44720)
-- Name: pdf_document_preferences_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.pdf_document_preferences_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.pdf_document_preferences_id_seq OWNER TO postgres;

--
-- TOC entry 523 (class 1259 OID 45223)
-- Name: pdf_logos; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.pdf_logos (
    id integer DEFAULT nextval('template.pdf_logos_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    name character varying(100) NOT NULL,
    image_data text NOT NULL,
    width integer DEFAULT 100,
    height integer DEFAULT 100,
    is_default boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE client_129.pdf_logos OWNER TO postgres;

--
-- TOC entry 475 (class 1259 OID 44721)
-- Name: pdf_logos_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.pdf_logos_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.pdf_logos_id_seq OWNER TO postgres;

--
-- TOC entry 524 (class 1259 OID 45236)
-- Name: pdf_templates; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.pdf_templates (
    id integer DEFAULT nextval('template.pdf_templates_id_seq'::regclass) NOT NULL,
    name character varying(100) NOT NULL,
    type character varying(50) NOT NULL,
    columns jsonb NOT NULL,
    header_template text,
    footer_template text,
    is_default boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    header_color character varying(20) DEFAULT '#f3f4f6'::character varying,
    alternate_row_color character varying(20) DEFAULT '#f9fafb'::character varying,
    items_per_page integer DEFAULT 25,
    default_title text,
    border_style character varying(20) DEFAULT 'solid'::character varying,
    border_width integer DEFAULT 1,
    row_padding integer DEFAULT 8,
    cell_alignment character varying(20) DEFAULT 'left'::character varying,
    user_id integer
);


ALTER TABLE client_129.pdf_templates OWNER TO postgres;

--
-- TOC entry 476 (class 1259 OID 44722)
-- Name: pdf_templates_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.pdf_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.pdf_templates_id_seq OWNER TO postgres;

--
-- TOC entry 525 (class 1259 OID 45254)
-- Name: pdf_themes; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.pdf_themes (
    id integer DEFAULT nextval('template.pdf_themes_id_seq'::regclass) NOT NULL,
    name character varying(100) NOT NULL,
    header_color character varying(20) NOT NULL,
    alternate_row_color character varying(20) NOT NULL,
    text_color character varying(20) DEFAULT '#000000'::character varying,
    border_color character varying(20) DEFAULT '#e5e7eb'::character varying,
    accent_color character varying(20) DEFAULT '#3b82f6'::character varying,
    background_color character varying(20) DEFAULT '#ffffff'::character varying,
    font_family character varying(100) DEFAULT 'Helvetica'::character varying,
    is_default boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    user_id integer
);


ALTER TABLE client_129.pdf_themes OWNER TO postgres;

--
-- TOC entry 477 (class 1259 OID 44723)
-- Name: pdf_themes_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.pdf_themes_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.pdf_themes_id_seq OWNER TO postgres;

--
-- TOC entry 436 (class 1259 OID 44682)
-- Name: properties_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.properties_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.properties_id_seq OWNER TO postgres;

--
-- TOC entry 484 (class 1259 OID 44730)
-- Name: properties; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.properties (
    id integer DEFAULT nextval('client_129.properties_id_seq'::regclass) NOT NULL,
    name text NOT NULL,
    address text NOT NULL,
    description text,
    type text NOT NULL,
    units integer,
    bedrooms integer,
    floors integer,
    bathrooms integer,
    toilets integer,
    energy_class text,
    energy_emissions text,
    living_area integer,
    land_area integer,
    has_parking boolean,
    has_terrace boolean,
    has_garage boolean,
    has_outbuilding boolean,
    has_balcony boolean,
    has_elevator boolean,
    has_cellar boolean,
    has_garden boolean,
    is_new_construction boolean,
    purchase_price numeric,
    monthly_rent numeric,
    monthly_expenses numeric,
    loan_amount numeric,
    monthly_loan_payment numeric,
    loan_duration integer,
    status text,
    construction_year integer,
    purchase_date timestamp without time zone,
    rooms integer,
    isnewconstruction boolean,
    images jsonb,
    user_id integer NOT NULL,
    area integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_129.properties OWNER TO postgres;

--
-- TOC entry 453 (class 1259 OID 44699)
-- Name: property_analyses_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.property_analyses_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.property_analyses_id_seq OWNER TO postgres;

--
-- TOC entry 501 (class 1259 OID 44943)
-- Name: property_analyses; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.property_analyses (
    id integer DEFAULT nextval('client_129.property_analyses_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    analysis_type text NOT NULL,
    analysis_data jsonb,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_129.property_analyses OWNER TO postgres;

--
-- TOC entry 452 (class 1259 OID 44698)
-- Name: property_coordinates_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.property_coordinates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.property_coordinates_id_seq OWNER TO postgres;

--
-- TOC entry 498 (class 1259 OID 44914)
-- Name: property_coordinates; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.property_coordinates (
    id integer DEFAULT nextval('client_129.property_coordinates_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    latitude numeric,
    longitude numeric,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_129.property_coordinates OWNER TO postgres;

--
-- TOC entry 517 (class 1259 OID 45128)
-- Name: property_financial_goals; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.property_financial_goals (
    id integer DEFAULT nextval('template.property_financial_goals_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    title text NOT NULL,
    type text NOT NULL,
    target_value numeric(10,2) NOT NULL,
    current_value numeric(10,2),
    deadline date,
    status text DEFAULT 'pending'::text NOT NULL,
    notes text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE client_129.property_financial_goals OWNER TO postgres;

--
-- TOC entry 469 (class 1259 OID 44715)
-- Name: property_financial_goals_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.property_financial_goals_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.property_financial_goals_id_seq OWNER TO postgres;

--
-- TOC entry 518 (class 1259 OID 45139)
-- Name: property_financial_snapshots; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.property_financial_snapshots (
    id integer DEFAULT nextval('template.property_financial_snapshots_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    snapshot_date date NOT NULL,
    gross_rental_yield numeric(10,2),
    net_rental_yield numeric(10,2),
    cash_on_cash_return numeric(10,2),
    cap_rate numeric(10,2),
    monthly_cash_flow numeric(10,2),
    total_income numeric(10,2),
    total_expenses numeric(10,2),
    occupancy_rate numeric(10,2),
    metadata jsonb DEFAULT '{}'::jsonb,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE client_129.property_financial_snapshots OWNER TO postgres;

--
-- TOC entry 470 (class 1259 OID 44716)
-- Name: property_financial_snapshots_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.property_financial_snapshots_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.property_financial_snapshots_id_seq OWNER TO postgres;

--
-- TOC entry 507 (class 1259 OID 45018)
-- Name: property_history; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.property_history (
    id integer DEFAULT nextval('template.property_history_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    field text NOT NULL,
    old_value text,
    new_value text,
    change_type text NOT NULL,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    metadata jsonb DEFAULT '{}'::jsonb
);


ALTER TABLE client_129.property_history OWNER TO postgres;

--
-- TOC entry 459 (class 1259 OID 44705)
-- Name: property_history_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.property_history_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.property_history_id_seq OWNER TO postgres;

--
-- TOC entry 508 (class 1259 OID 45028)
-- Name: property_works; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.property_works (
    id integer DEFAULT nextval('template.property_works_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    title text NOT NULL,
    description text,
    type text NOT NULL,
    status text DEFAULT 'planned'::text NOT NULL,
    start_date timestamp without time zone,
    end_date timestamp without time zone,
    estimated_cost numeric(10,2),
    actual_cost numeric(10,2),
    contractor text,
    priority text DEFAULT 'medium'::text,
    documents jsonb DEFAULT '[]'::jsonb,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_129.property_works OWNER TO postgres;

--
-- TOC entry 460 (class 1259 OID 44706)
-- Name: property_works_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.property_works_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.property_works_id_seq OWNER TO postgres;

--
-- TOC entry 519 (class 1259 OID 45149)
-- Name: rent_receipts; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.rent_receipts (
    id integer DEFAULT nextval('template.rent_receipts_id_seq'::regclass) NOT NULL,
    tenant_id integer NOT NULL,
    property_id integer NOT NULL,
    transaction_id integer NOT NULL,
    amount real NOT NULL,
    charges real NOT NULL,
    rent_period_start date NOT NULL,
    rent_period_end date NOT NULL,
    status text DEFAULT 'generated'::text NOT NULL,
    document_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE client_129.rent_receipts OWNER TO postgres;

--
-- TOC entry 471 (class 1259 OID 44717)
-- Name: rent_receipts_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.rent_receipts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.rent_receipts_id_seq OWNER TO postgres;

--
-- TOC entry 504 (class 1259 OID 44982)
-- Name: reports; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.reports (
    id integer DEFAULT nextval('template.reports_id_seq'::regclass) NOT NULL,
    title text NOT NULL,
    description text,
    "reportType" text,
    "fileUrl" text,
    "userId" integer,
    "createdAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE client_129.reports OWNER TO postgres;

--
-- TOC entry 457 (class 1259 OID 44703)
-- Name: reports_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.reports_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.reports_id_seq OWNER TO postgres;

--
-- TOC entry 454 (class 1259 OID 44700)
-- Name: storage_management_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.storage_management_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.storage_management_id_seq OWNER TO postgres;

--
-- TOC entry 502 (class 1259 OID 44953)
-- Name: storage_management; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.storage_management (
    id integer DEFAULT nextval('client_129.storage_management_id_seq'::regclass) NOT NULL,
    total_used bigint DEFAULT 0,
    last_calculation timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    storage_categories jsonb DEFAULT '{"other": 0, "images": 0, "documents": 0, "attachments": 0}'::jsonb,
    cleanup_history jsonb DEFAULT '[]'::jsonb,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE client_129.storage_management OWNER TO postgres;

--
-- TOC entry 506 (class 1259 OID 45008)
-- Name: storage_transactions; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.storage_transactions (
    id integer DEFAULT nextval('template.storage_transactions_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    previous_tier character varying(10) NOT NULL,
    new_tier character varying(10) NOT NULL,
    amount_paid numeric(10,2) NOT NULL,
    transaction_date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    expiration_date timestamp without time zone,
    payment_method character varying(50),
    payment_reference character varying(100),
    status character varying(20) DEFAULT 'completed'::character varying,
    notes text
);


ALTER TABLE client_129.storage_transactions OWNER TO postgres;

--
-- TOC entry 458 (class 1259 OID 44704)
-- Name: storage_transactions_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.storage_transactions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.storage_transactions_id_seq OWNER TO postgres;

--
-- TOC entry 473 (class 1259 OID 44719)
-- Name: storage_usage_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.storage_usage_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.storage_usage_id_seq OWNER TO postgres;

--
-- TOC entry 521 (class 1259 OID 45197)
-- Name: storage_usage; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.storage_usage (
    id integer DEFAULT nextval('client_129.storage_usage_id_seq'::regclass) NOT NULL,
    resource_type text NOT NULL,
    resource_id integer NOT NULL,
    filename text,
    file_path text,
    file_type text,
    size_bytes bigint NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    deleted_at timestamp without time zone
);


ALTER TABLE client_129.storage_usage OWNER TO postgres;

--
-- TOC entry 437 (class 1259 OID 44683)
-- Name: tenant_documents_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.tenant_documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.tenant_documents_id_seq OWNER TO postgres;

--
-- TOC entry 486 (class 1259 OID 44758)
-- Name: tenant_documents; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.tenant_documents (
    id integer DEFAULT nextval('client_129.tenant_documents_id_seq'::regclass) NOT NULL,
    tenant_id integer NOT NULL,
    document_id integer NOT NULL,
    document_type text DEFAULT 'lease'::text NOT NULL,
    uploaded_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_129.tenant_documents OWNER TO postgres;

--
-- TOC entry 439 (class 1259 OID 44685)
-- Name: tenant_history_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.tenant_history_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.tenant_history_id_seq OWNER TO postgres;

--
-- TOC entry 496 (class 1259 OID 44888)
-- Name: tenant_history; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.tenant_history (
    id integer DEFAULT nextval('client_129.tenant_history_id_seq'::regclass) NOT NULL,
    rating integer NOT NULL,
    feedback text,
    category text DEFAULT 'general'::text,
    tenant_full_name text,
    original_user_id integer,
    event_type text DEFAULT 'evaluation'::text,
    event_severity integer DEFAULT 0,
    event_details jsonb,
    documents text[],
    bail_status text,
    bail_id integer,
    property_name text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    created_by integer,
    tenant_id integer,
    is_orphaned boolean DEFAULT false,
    tenant_info_id integer,
    updated_at timestamp without time zone DEFAULT now(),
    updated_by integer
);


ALTER TABLE client_129.tenant_history OWNER TO postgres;

--
-- TOC entry 443 (class 1259 OID 44689)
-- Name: tenants_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.tenants_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.tenants_id_seq OWNER TO postgres;

--
-- TOC entry 497 (class 1259 OID 44902)
-- Name: tenants; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.tenants (
    id integer DEFAULT nextval('client_129.tenants_id_seq'::regclass) NOT NULL,
    user_id integer,
    property_id integer NOT NULL,
    lease_start timestamp without time zone NOT NULL,
    lease_end timestamp without time zone NOT NULL,
    rent_amount numeric(10,2) NOT NULL,
    lease_type text NOT NULL,
    active boolean DEFAULT true,
    lease_status text DEFAULT 'actif'::text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    tenant_id integer,
    tenant_info_id integer
);


ALTER TABLE client_129.tenants OWNER TO postgres;

--
-- TOC entry 447 (class 1259 OID 44693)
-- Name: tenants_info_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.tenants_info_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.tenants_info_id_seq OWNER TO postgres;

--
-- TOC entry 494 (class 1259 OID 44868)
-- Name: tenants_info; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.tenants_info (
    id integer DEFAULT nextval('client_129.tenants_info_id_seq'::regclass) NOT NULL,
    full_name text NOT NULL,
    email text,
    phone_number text,
    notes text,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_129.tenants_info OWNER TO postgres;

--
-- TOC entry 500 (class 1259 OID 44934)
-- Name: transaction_attachments; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.transaction_attachments (
    id integer DEFAULT nextval('template.transaction_attachments_id_seq'::regclass) NOT NULL,
    transaction_id integer NOT NULL,
    file_name character varying(255) NOT NULL,
    file_path character varying(255) NOT NULL,
    file_type character varying(100),
    file_size integer,
    uploaded_at timestamp with time zone DEFAULT now()
);


ALTER TABLE client_129.transaction_attachments OWNER TO postgres;

--
-- TOC entry 451 (class 1259 OID 44697)
-- Name: transaction_attachments_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.transaction_attachments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.transaction_attachments_id_seq OWNER TO postgres;

--
-- TOC entry 499 (class 1259 OID 44924)
-- Name: transactions; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.transactions (
    id integer DEFAULT nextval('template.transactions_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    property_id integer,
    tenant_id integer,
    document_id integer,
    document_ids integer[],
    type text NOT NULL,
    category text NOT NULL,
    amount numeric(10,2) NOT NULL,
    description text,
    date timestamp without time zone NOT NULL,
    status text NOT NULL,
    payment_method text,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now()
);


ALTER TABLE client_129.transactions OWNER TO postgres;

--
-- TOC entry 450 (class 1259 OID 44696)
-- Name: transactions_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.transactions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.transactions_id_seq OWNER TO postgres;

--
-- TOC entry 434 (class 1259 OID 44658)
-- Name: users_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.users_id_seq OWNER TO postgres;

--
-- TOC entry 488 (class 1259 OID 44777)
-- Name: users; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.users (
    id integer DEFAULT nextval('template.users_id_seq'::regclass) NOT NULL,
    public_user_id integer NOT NULL,
    client_role text DEFAULT 'user'::text NOT NULL,
    permissions jsonb DEFAULT '{}'::jsonb,
    client_settings jsonb DEFAULT '{}'::jsonb,
    last_login_at timestamp without time zone,
    notes text,
    is_active boolean DEFAULT true,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT users_client_role_check CHECK ((client_role = ANY (ARRAY['user'::text, 'admin'::text, 'manager'::text, 'readonly'::text])))
);


ALTER TABLE client_129.users OWNER TO postgres;

--
-- TOC entry 444 (class 1259 OID 44690)
-- Name: users_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.users_id_seq OWNER TO postgres;

--
-- TOC entry 483 (class 1259 OID 44729)
-- Name: visits_id_seq; Type: SEQUENCE; Schema: client_129; Owner: postgres
--

CREATE SEQUENCE client_129.visits_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE client_129.visits_id_seq OWNER TO postgres;

--
-- TOC entry 531 (class 1259 OID 45345)
-- Name: visits; Type: TABLE; Schema: client_129; Owner: postgres
--

CREATE TABLE client_129.visits (
    id integer DEFAULT nextval('client_129.visits_id_seq'::regclass) NOT NULL,
    first_name text NOT NULL,
    last_name text NOT NULL,
    email text NOT NULL,
    phone text NOT NULL,
    datetime timestamp without time zone NOT NULL,
    visit_type text NOT NULL,
    property_id integer,
    manual_address text,
    message text,
    status text DEFAULT 'pending'::text,
    rating integer,
    feedback text,
    archived boolean DEFAULT false,
    agent_id integer,
    source text DEFAULT 'manual'::text,
    documents jsonb DEFAULT '[]'::jsonb,
    reminder_sent boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE client_129.visits OWNER TO postgres;

--
-- TOC entry 230 (class 1259 OID 18448)
-- Name: billing_transactions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.billing_transactions (
    id integer NOT NULL,
    user_id integer NOT NULL,
    amount numeric NOT NULL,
    description text NOT NULL,
    status character varying(20) NOT NULL,
    payment_method character varying(50),
    transaction_date timestamp without time zone DEFAULT now() NOT NULL,
    next_billing_date timestamp without time zone,
    metadata jsonb
);


ALTER TABLE public.billing_transactions OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 18447)
-- Name: billing_transactions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.billing_transactions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.billing_transactions_id_seq OWNER TO postgres;

--
-- TOC entry 7376 (class 0 OID 0)
-- Dependencies: 229
-- Name: billing_transactions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.billing_transactions_id_seq OWNED BY public.billing_transactions.id;


--
-- TOC entry 537 (class 1259 OID 45399)
-- Name: client_schemas; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.client_schemas (
    id integer NOT NULL,
    schema_name text NOT NULL,
    owner_account_id integer,
    client_name text,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now()
);


ALTER TABLE public.client_schemas OWNER TO postgres;

--
-- TOC entry 536 (class 1259 OID 45398)
-- Name: client_schemas_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.client_schemas_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.client_schemas_id_seq OWNER TO postgres;

--
-- TOC entry 7378 (class 0 OID 0)
-- Dependencies: 536
-- Name: client_schemas_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.client_schemas_id_seq OWNED BY public.client_schemas.id;


--
-- TOC entry 266 (class 1259 OID 28181)
-- Name: folders; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.folders (
    id integer DEFAULT nextval('template.folders_id_seq'::regclass) NOT NULL,
    name text NOT NULL,
    parent_id integer,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE template.folders OWNER TO postgres;

--
-- TOC entry 286 (class 1259 OID 28697)
-- Name: folders; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.folders AS
 SELECT id,
    name,
    parent_id,
    user_id,
    created_at,
    updated_at
   FROM template.folders;


ALTER VIEW public.folders OWNER TO postgres;

--
-- TOC entry 413 (class 1259 OID 41358)
-- Name: marketplace_providers; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.marketplace_providers (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    category character varying(100) NOT NULL,
    description text,
    contact_email character varying(100),
    contact_phone character varying(20),
    website character varying(200),
    logo_url character varying(255),
    address text,
    postal_code character varying(20),
    city character varying(100),
    country character varying(50) DEFAULT 'France'::character varying,
    services text[] DEFAULT '{}'::text[],
    rating numeric(3,2),
    visible_to_all boolean DEFAULT false,
    authorized_clients integer[] DEFAULT '{}'::integer[],
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.marketplace_providers OWNER TO postgres;

--
-- TOC entry 412 (class 1259 OID 41357)
-- Name: marketplace_providers_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.marketplace_providers_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.marketplace_providers_id_seq OWNER TO postgres;

--
-- TOC entry 7379 (class 0 OID 0)
-- Dependencies: 412
-- Name: marketplace_providers_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.marketplace_providers_id_seq OWNED BY public.marketplace_providers.id;


--
-- TOC entry 233 (class 1259 OID 27055)
-- Name: schema_mapping; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.schema_mapping (
    schema_name text NOT NULL,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now()
);


ALTER TABLE public.schema_mapping OWNER TO postgres;

--
-- TOC entry 232 (class 1259 OID 18577)
-- Name: sessions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.sessions (
    id integer NOT NULL,
    user_id integer,
    session_id character varying(255) NOT NULL,
    ip_address character varying(45),
    user_agent text,
    payload text,
    expires_at timestamp without time zone NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.sessions OWNER TO postgres;

--
-- TOC entry 7380 (class 0 OID 0)
-- Dependencies: 232
-- Name: TABLE sessions; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.sessions IS 'Stocke les sessions d''authentification des utilisateurs';


--
-- TOC entry 231 (class 1259 OID 18576)
-- Name: sessions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.sessions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.sessions_id_seq OWNER TO postgres;

--
-- TOC entry 7382 (class 0 OID 0)
-- Dependencies: 231
-- Name: sessions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.sessions_id_seq OWNED BY public.sessions.id;


--
-- TOC entry 243 (class 1259 OID 27727)
-- Name: storage_plans; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.storage_plans (
    id integer NOT NULL,
    name text NOT NULL,
    description text,
    storage_limit bigint NOT NULL,
    price_monthly numeric(10,2),
    price_yearly numeric(10,2),
    is_active boolean DEFAULT true,
    features jsonb,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.storage_plans OWNER TO postgres;

--
-- TOC entry 242 (class 1259 OID 27726)
-- Name: storage_plans_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.storage_plans_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.storage_plans_id_seq OWNER TO postgres;

--
-- TOC entry 7384 (class 0 OID 0)
-- Dependencies: 242
-- Name: storage_plans_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.storage_plans_id_seq OWNED BY public.storage_plans.id;


--
-- TOC entry 245 (class 1259 OID 27739)
-- Name: storage_quotas; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.storage_quotas (
    id integer NOT NULL,
    resource_type text NOT NULL,
    size_limit bigint,
    count_limit integer,
    applies_to text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.storage_quotas OWNER TO postgres;

--
-- TOC entry 244 (class 1259 OID 27738)
-- Name: storage_quotas_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.storage_quotas_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.storage_quotas_id_seq OWNER TO postgres;

--
-- TOC entry 7385 (class 0 OID 0)
-- Dependencies: 244
-- Name: storage_quotas_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.storage_quotas_id_seq OWNED BY public.storage_quotas.id;


--
-- TOC entry 228 (class 1259 OID 17811)
-- Name: user_notification_settings; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.user_notification_settings (
    id integer NOT NULL,
    user_id integer NOT NULL,
    type text NOT NULL,
    channel text DEFAULT 'both'::text NOT NULL,
    enabled boolean DEFAULT true NOT NULL,
    frequency text DEFAULT 'immediate'::text NOT NULL,
    importance text DEFAULT 'all'::text NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL,
    CONSTRAINT user_notification_settings_channel_check CHECK ((channel = ANY (ARRAY['app'::text, 'email'::text, 'both'::text]))),
    CONSTRAINT user_notification_settings_frequency_check CHECK ((frequency = ANY (ARRAY['immediate'::text, 'daily'::text, 'weekly'::text]))),
    CONSTRAINT user_notification_settings_importance_check CHECK ((importance = ANY (ARRAY['all'::text, 'high'::text, 'medium'::text, 'none'::text]))),
    CONSTRAINT user_notification_settings_type_check CHECK ((type = ANY (ARRAY['payment'::text, 'maintenance'::text, 'lease'::text, 'visit'::text])))
);


ALTER TABLE public.user_notification_settings OWNER TO postgres;

--
-- TOC entry 7386 (class 0 OID 0)
-- Dependencies: 228
-- Name: TABLE user_notification_settings; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.user_notification_settings IS 'Stores user preferences for notification deliveries';


--
-- TOC entry 227 (class 1259 OID 17810)
-- Name: user_notification_settings_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.user_notification_settings_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.user_notification_settings_id_seq OWNER TO postgres;

--
-- TOC entry 7388 (class 0 OID 0)
-- Dependencies: 227
-- Name: user_notification_settings_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.user_notification_settings_id_seq OWNED BY public.user_notification_settings.id;


--
-- TOC entry 430 (class 1259 OID 44558)
-- Name: user_storage_subscriptions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.user_storage_subscriptions (
    id integer NOT NULL,
    user_id integer NOT NULL,
    plan_id integer NOT NULL,
    start_date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    end_date timestamp without time zone,
    billing_cycle character varying(20) DEFAULT 'monthly'::character varying NOT NULL,
    next_billing_date timestamp without time zone,
    is_active boolean DEFAULT true,
    payment_status character varying(50) DEFAULT 'pending'::character varying,
    payment_method character varying(50),
    payment_history jsonb DEFAULT '[]'::jsonb,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.user_storage_subscriptions OWNER TO postgres;

--
-- TOC entry 429 (class 1259 OID 44557)
-- Name: user_storage_subscriptions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.user_storage_subscriptions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.user_storage_subscriptions_id_seq OWNER TO postgres;

--
-- TOC entry 7390 (class 0 OID 0)
-- Dependencies: 429
-- Name: user_storage_subscriptions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.user_storage_subscriptions_id_seq OWNED BY public.user_storage_subscriptions.id;


--
-- TOC entry 226 (class 1259 OID 17365)
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.users_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.users_id_seq OWNER TO postgres;

--
-- TOC entry 7391 (class 0 OID 0)
-- Dependencies: 226
-- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;


--
-- TOC entry 248 (class 1259 OID 27881)
-- Name: ai_conversations; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.ai_conversations (
    id integer DEFAULT nextval('template.ai_conversations_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    title text NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    status text DEFAULT 'active'::text NOT NULL,
    category text DEFAULT 'general'::text NOT NULL,
    context jsonb DEFAULT '{}'::jsonb NOT NULL,
    CONSTRAINT ai_conversations_category_check CHECK ((category = ANY (ARRAY['general'::text, 'maintenance'::text, 'lease'::text, 'payment'::text, 'other'::text]))),
    CONSTRAINT ai_conversations_status_check CHECK ((status = ANY (ARRAY['active'::text, 'closed'::text])))
);


ALTER TABLE template.ai_conversations OWNER TO postgres;

--
-- TOC entry 249 (class 1259 OID 27898)
-- Name: ai_messages; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.ai_messages (
    id integer DEFAULT nextval('template.ai_messages_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    role text DEFAULT 'user'::text NOT NULL,
    content text NOT NULL,
    metadata jsonb DEFAULT '{}'::jsonb NOT NULL,
    conversation_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    is_urgent boolean DEFAULT false NOT NULL,
    model_id text DEFAULT 'huggingface'::text,
    provider text DEFAULT 'huggingface'::text,
    CONSTRAINT ai_messages_role_check CHECK ((role = ANY (ARRAY['user'::text, 'assistant'::text, 'system'::text])))
);


ALTER TABLE template.ai_messages OWNER TO postgres;

--
-- TOC entry 250 (class 1259 OID 27917)
-- Name: ai_suggestions; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.ai_suggestions (
    id integer DEFAULT nextval('template.ai_suggestions_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    property_id integer,
    type text NOT NULL,
    suggestion text NOT NULL,
    data jsonb DEFAULT '{}'::jsonb NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    status text DEFAULT 'pending'::text NOT NULL,
    CONSTRAINT ai_suggestions_status_check CHECK ((status = ANY (ARRAY['pending'::text, 'accepted'::text, 'rejected'::text]))),
    CONSTRAINT ai_suggestions_type_check CHECK ((type = ANY (ARRAY['rent_price'::text, 'maintenance'::text, 'tenant_management'::text, 'investment'::text])))
);


ALTER TABLE template.ai_suggestions OWNER TO postgres;

--
-- TOC entry 416 (class 1259 OID 43537)
-- Name: ai_tokens; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.ai_tokens (
    id integer DEFAULT nextval('template.ai_tokens_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    tokens integer DEFAULT 0 NOT NULL,
    plan text DEFAULT 'free'::text NOT NULL,
    expires_at timestamp without time zone,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT ai_tokens_plan_check CHECK ((plan = ANY (ARRAY['free'::text, 'basic'::text, 'premium'::text, 'enterprise'::text])))
);


ALTER TABLE template.ai_tokens OWNER TO postgres;

--
-- TOC entry 417 (class 1259 OID 43548)
-- Name: ai_usage; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.ai_usage (
    id integer DEFAULT nextval('template.ai_usage_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    message_id integer,
    conversation_id integer,
    tokens_used integer NOT NULL,
    model text NOT NULL,
    prompt_tokens integer DEFAULT 0,
    completion_tokens integer DEFAULT 0,
    cost numeric(10,6) DEFAULT '0'::numeric,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT ai_usage_model_check CHECK ((model = ANY (ARRAY['openai-gpt-3.5'::text, 'openai-gpt-4o'::text])))
);


ALTER TABLE template.ai_usage OWNER TO postgres;

--
-- TOC entry 251 (class 1259 OID 27935)
-- Name: analysis_configs; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.analysis_configs (
    id integer DEFAULT nextval('template.analysis_configs_id_seq'::regclass) NOT NULL,
    property_id integer,
    user_id integer,
    name character varying(255) NOT NULL,
    period_type character varying(50) NOT NULL,
    period_value integer NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone
);


ALTER TABLE template.analysis_configs OWNER TO postgres;

--
-- TOC entry 260 (class 1259 OID 28139)
-- Name: automatic_reminders; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.automatic_reminders (
    id integer DEFAULT nextval('template.automatic_reminders_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    type text NOT NULL,
    related_entity_type text NOT NULL,
    related_entity_id integer NOT NULL,
    title text NOT NULL,
    message text NOT NULL,
    next_trigger_date date NOT NULL,
    days_in_advance integer DEFAULT 0 NOT NULL,
    recurrence text,
    status text DEFAULT 'active'::text NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE template.automatic_reminders OWNER TO postgres;

--
-- TOC entry 314 (class 1259 OID 32543)
-- Name: company_info; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.company_info (
    id integer DEFAULT nextval('template.company_info_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    company_name character varying(200),
    company_address text,
    company_phone character varying(50),
    company_email character varying(100),
    company_website character varying(100),
    company_siret character varying(50),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE template.company_info OWNER TO postgres;

--
-- TOC entry 262 (class 1259 OID 28156)
-- Name: contract_parties; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.contract_parties (
    id integer DEFAULT nextval('template.contract_parties_id_seq'::regclass) NOT NULL,
    contract_id integer NOT NULL,
    party_id integer NOT NULL,
    party_type text NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer,
    CONSTRAINT contract_parties_party_type_check CHECK ((party_type = ANY (ARRAY['tenant'::text, 'owner'::text, 'manager'::text, 'other'::text])))
);


ALTER TABLE template.contract_parties OWNER TO postgres;

--
-- TOC entry 256 (class 1259 OID 28068)
-- Name: contracts; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.contracts (
    id integer DEFAULT nextval('template.contracts_id_seq'::regclass) NOT NULL,
    name text NOT NULL,
    type text NOT NULL,
    status text DEFAULT 'draft'::text NOT NULL,
    start_date timestamp without time zone NOT NULL,
    end_date timestamp without time zone,
    property_id integer,
    document_id integer,
    signature_required boolean DEFAULT true,
    automated_renewal boolean DEFAULT false,
    renewal_date timestamp without time zone,
    notification_date timestamp without time zone,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT contracts_status_check CHECK ((status = ANY (ARRAY['draft'::text, 'pending_signature'::text, 'active'::text, 'expired'::text, 'terminated'::text]))),
    CONSTRAINT contracts_type_check CHECK ((type = ANY (ARRAY['rental'::text, 'mandate'::text, 'commercial'::text, 'attestation'::text, 'other'::text])))
);


ALTER TABLE template.contracts OWNER TO postgres;

--
-- TOC entry 312 (class 1259 OID 32532)
-- Name: document_templates; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.document_templates (
    id integer DEFAULT nextval('template.document_templates_id_seq'::regclass) NOT NULL,
    name text NOT NULL,
    document_type text NOT NULL,
    field_mappings jsonb NOT NULL,
    user_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE template.document_templates OWNER TO postgres;

--
-- TOC entry 302 (class 1259 OID 30439)
-- Name: documents; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.documents (
    id integer DEFAULT nextval('template.documents_id_seq'::regclass) NOT NULL,
    title text NOT NULL,
    type text DEFAULT 'lease'::text NOT NULL,
    file_path text NOT NULL,
    original_name text NOT NULL,
    template boolean DEFAULT false,
    user_id integer NOT NULL,
    folder_id integer,
    parent_id integer,
    template_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    form_data jsonb DEFAULT '{}'::jsonb,
    content jsonb DEFAULT '{}'::jsonb,
    theme jsonb DEFAULT '{}'::jsonb,
    file_size numeric DEFAULT 0
);


ALTER TABLE template.documents OWNER TO postgres;

--
-- TOC entry 310 (class 1259 OID 32522)
-- Name: documents_access_log; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.documents_access_log (
    id integer DEFAULT nextval('template.documents_access_log_id_seq'::regclass) NOT NULL,
    document_id integer NOT NULL,
    user_id integer NOT NULL,
    access_type text NOT NULL,
    accessed_at timestamp without time zone DEFAULT now() NOT NULL,
    ip_address text,
    user_agent text
);


ALTER TABLE template.documents_access_log OWNER TO postgres;

--
-- TOC entry 237 (class 1259 OID 27437)
-- Name: feedbacks; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.feedbacks (
    id integer NOT NULL,
    tenant_id integer,
    property_id integer,
    rating integer,
    comment text,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    tenant_info_id integer
);


ALTER TABLE template.feedbacks OWNER TO postgres;

--
-- TOC entry 236 (class 1259 OID 27436)
-- Name: feedbacks_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.feedbacks_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.feedbacks_id_seq OWNER TO postgres;

--
-- TOC entry 7393 (class 0 OID 0)
-- Dependencies: 236
-- Name: feedbacks_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.feedbacks_id_seq OWNED BY template.feedbacks.id;


--
-- TOC entry 264 (class 1259 OID 28168)
-- Name: financial_entries; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.financial_entries (
    id integer DEFAULT nextval('template.financial_entries_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    date date NOT NULL,
    type text NOT NULL,
    category text NOT NULL,
    amount numeric(10,2) NOT NULL,
    recurring boolean DEFAULT false,
    frequency text,
    description text,
    source text NOT NULL,
    related_entity_id integer,
    related_entity_type text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE template.financial_entries OWNER TO postgres;

--
-- TOC entry 407 (class 1259 OID 41128)
-- Name: form_responses; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.form_responses (
    id integer DEFAULT nextval('template.form_responses_id_seq'::regclass) NOT NULL,
    form_id integer NOT NULL,
    response_data jsonb NOT NULL,
    ip_address text,
    user_agent text,
    created_at timestamp without time zone DEFAULT now()
);


ALTER TABLE template.form_responses OWNER TO postgres;

--
-- TOC entry 7394 (class 0 OID 0)
-- Dependencies: 407
-- Name: TABLE form_responses; Type: COMMENT; Schema: template; Owner: postgres
--

COMMENT ON TABLE template.form_responses IS 'Réponses soumises aux formulaires';


--
-- TOC entry 411 (class 1259 OID 41305)
-- Name: form_submissions; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.form_submissions (
    id integer NOT NULL,
    link_id integer NOT NULL,
    form_data jsonb NOT NULL,
    ip_address character varying(50),
    user_agent text,
    created_at timestamp without time zone DEFAULT now(),
    form_id integer
);


ALTER TABLE template.form_submissions OWNER TO postgres;

--
-- TOC entry 410 (class 1259 OID 41304)
-- Name: form_submissions_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.form_submissions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.form_submissions_id_seq OWNER TO postgres;

--
-- TOC entry 7395 (class 0 OID 0)
-- Dependencies: 410
-- Name: form_submissions_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.form_submissions_id_seq OWNED BY template.form_submissions.id;


--
-- TOC entry 404 (class 1259 OID 41079)
-- Name: forms; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.forms (
    id integer DEFAULT nextval('template.forms_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    title character varying(100) NOT NULL,
    description text,
    fields jsonb NOT NULL,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now()
);


ALTER TABLE template.forms OWNER TO postgres;

--
-- TOC entry 7396 (class 0 OID 0)
-- Dependencies: 404
-- Name: TABLE forms; Type: COMMENT; Schema: template; Owner: postgres
--

COMMENT ON TABLE template.forms IS 'Formulaires créés par les utilisateurs';


--
-- TOC entry 406 (class 1259 OID 41109)
-- Name: link_forms; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.link_forms (
    id integer DEFAULT nextval('template.link_forms_id_seq'::regclass) NOT NULL,
    link_id integer NOT NULL,
    form_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now()
);


ALTER TABLE template.link_forms OWNER TO postgres;

--
-- TOC entry 7397 (class 0 OID 0)
-- Dependencies: 406
-- Name: TABLE link_forms; Type: COMMENT; Schema: template; Owner: postgres
--

COMMENT ON TABLE template.link_forms IS 'Association entre liens et formulaires';


--
-- TOC entry 403 (class 1259 OID 41052)
-- Name: link_profiles; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.link_profiles (
    id integer DEFAULT nextval('template.link_profiles_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    slug character varying(100) NOT NULL,
    title character varying(100) NOT NULL,
    description text,
    background_color character varying(20) DEFAULT '#ffffff'::character varying,
    text_color character varying(20) DEFAULT '#000000'::character varying,
    accent_color character varying(20) DEFAULT '#70C7BA'::character varying,
    logo_url text,
    views integer DEFAULT 0,
    background_image text,
    background_pattern text,
    button_style character varying(20) DEFAULT 'rounded'::character varying,
    button_radius integer DEFAULT 8,
    font_family character varying(50) DEFAULT 'Inter'::character varying,
    animation character varying(30) DEFAULT 'fade'::character varying,
    custom_css text,
    custom_theme jsonb,
    background_saturation integer DEFAULT 100,
    background_hue_rotate integer DEFAULT 0,
    background_sepia integer DEFAULT 0,
    background_grayscale integer DEFAULT 0,
    background_invert integer DEFAULT 0,
    background_color_filter character varying(20),
    background_color_filter_opacity real DEFAULT 0.3,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now(),
    is_paused boolean DEFAULT false
);


ALTER TABLE template.link_profiles OWNER TO postgres;

--
-- TOC entry 7398 (class 0 OID 0)
-- Dependencies: 403
-- Name: TABLE link_profiles; Type: COMMENT; Schema: template; Owner: postgres
--

COMMENT ON TABLE template.link_profiles IS 'Profils de liens des utilisateurs';


--
-- TOC entry 405 (class 1259 OID 41089)
-- Name: links; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.links (
    id integer DEFAULT nextval('template.links_id_seq'::regclass) NOT NULL,
    profile_id integer NOT NULL,
    title character varying(100) NOT NULL,
    url text NOT NULL,
    icon character varying(50),
    enabled boolean DEFAULT true,
    clicks integer DEFAULT 0,
    "position" integer DEFAULT 0,
    featured boolean DEFAULT false,
    custom_color character varying(20),
    custom_text_color character varying(20),
    animation character varying(30),
    type character varying(20) DEFAULT 'link'::character varying,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now(),
    button_style character varying(20),
    user_id integer,
    form_definition jsonb
);


ALTER TABLE template.links OWNER TO postgres;

--
-- TOC entry 7399 (class 0 OID 0)
-- Dependencies: 405
-- Name: TABLE links; Type: COMMENT; Schema: template; Owner: postgres
--

COMMENT ON TABLE template.links IS 'Liens des profils';


--
-- TOC entry 268 (class 1259 OID 28242)
-- Name: maintenance; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.maintenance (
    id integer DEFAULT nextval('template.maintenance_id_seq'::regclass) NOT NULL,
    title text NOT NULL,
    description text,
    "propertyId" integer NOT NULL,
    status text DEFAULT 'pending'::text,
    "createdAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    user_id integer,
    total_cost numeric(10,2),
    document_id integer,
    document_ids jsonb DEFAULT '[]'::jsonb,
    reported_by text
);


ALTER TABLE template.maintenance OWNER TO postgres;

--
-- TOC entry 276 (class 1259 OID 28309)
-- Name: pdf_configuration; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.pdf_configuration (
    id integer DEFAULT nextval('template.pdf_configuration_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    name character varying(100) NOT NULL,
    orientation character varying(20) DEFAULT 'portrait'::character varying,
    page_size character varying(20) DEFAULT 'A4'::character varying,
    margin_top integer DEFAULT 20,
    margin_right integer DEFAULT 10,
    margin_bottom integer DEFAULT 20,
    margin_left integer DEFAULT 10,
    show_header boolean DEFAULT true,
    show_footer boolean DEFAULT true,
    show_pagination boolean DEFAULT true,
    show_filters boolean DEFAULT true,
    default_config boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    header_color character varying(20) DEFAULT '#f3f4f6'::character varying,
    alternate_row_color character varying(20) DEFAULT '#f9fafb'::character varying,
    items_per_page integer DEFAULT 25,
    custom_title text,
    font_family character varying(100) DEFAULT 'Helvetica'::character varying,
    font_size integer DEFAULT 10,
    theme_id integer,
    accent_color character varying(20),
    watermark_text text,
    watermark_opacity double precision DEFAULT 0.1,
    compress_pdf boolean DEFAULT true,
    password_protection text,
    print_background boolean DEFAULT true,
    scale double precision DEFAULT 1.0,
    landscape_scaling boolean DEFAULT true,
    header_height integer DEFAULT 30,
    footer_height integer DEFAULT 20
);


ALTER TABLE template.pdf_configuration OWNER TO postgres;

--
-- TOC entry 278 (class 1259 OID 28344)
-- Name: pdf_document_preferences; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.pdf_document_preferences (
    id integer DEFAULT nextval('template.pdf_document_preferences_id_seq'::regclass) NOT NULL,
    configuration_id integer NOT NULL,
    document_type character varying(20) NOT NULL,
    enabled boolean DEFAULT true,
    display_order integer DEFAULT 0,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    columns_to_display text[],
    custom_title character varying(255),
    table_header_color character varying(10),
    table_text_color character varying(10),
    table_alternate_color character varying(10),
    max_items_per_page integer DEFAULT 10,
    user_id integer,
    CONSTRAINT pdf_document_preferences_document_type_check CHECK (((document_type)::text = ANY ((ARRAY['visits'::character varying, 'tenants'::character varying, 'maintenance'::character varying, 'transactions'::character varying])::text[])))
);


ALTER TABLE template.pdf_document_preferences OWNER TO postgres;

--
-- TOC entry 280 (class 1259 OID 28363)
-- Name: pdf_logos; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.pdf_logos (
    id integer DEFAULT nextval('template.pdf_logos_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    name character varying(100) NOT NULL,
    image_data text NOT NULL,
    width integer DEFAULT 100,
    height integer DEFAULT 100,
    is_default boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE template.pdf_logos OWNER TO postgres;

--
-- TOC entry 282 (class 1259 OID 28378)
-- Name: pdf_templates; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.pdf_templates (
    id integer DEFAULT nextval('template.pdf_templates_id_seq'::regclass) NOT NULL,
    name character varying(100) NOT NULL,
    type character varying(50) NOT NULL,
    columns jsonb NOT NULL,
    header_template text,
    footer_template text,
    is_default boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    header_color character varying(20) DEFAULT '#f3f4f6'::character varying,
    alternate_row_color character varying(20) DEFAULT '#f9fafb'::character varying,
    items_per_page integer DEFAULT 25,
    default_title text,
    border_style character varying(20) DEFAULT 'solid'::character varying,
    border_width integer DEFAULT 1,
    row_padding integer DEFAULT 8,
    cell_alignment character varying(20) DEFAULT 'left'::character varying,
    user_id integer
);


ALTER TABLE template.pdf_templates OWNER TO postgres;

--
-- TOC entry 284 (class 1259 OID 28398)
-- Name: pdf_themes; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.pdf_themes (
    id integer DEFAULT nextval('template.pdf_themes_id_seq'::regclass) NOT NULL,
    name character varying(100) NOT NULL,
    header_color character varying(20) NOT NULL,
    alternate_row_color character varying(20) NOT NULL,
    text_color character varying(20) DEFAULT '#000000'::character varying,
    border_color character varying(20) DEFAULT '#e5e7eb'::character varying,
    accent_color character varying(20) DEFAULT '#3b82f6'::character varying,
    background_color character varying(20) DEFAULT '#ffffff'::character varying,
    font_family character varying(100) DEFAULT 'Helvetica'::character varying,
    is_default boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    user_id integer
);


ALTER TABLE template.pdf_themes OWNER TO postgres;

--
-- TOC entry 235 (class 1259 OID 27265)
-- Name: properties; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.properties (
    id integer NOT NULL,
    name text NOT NULL,
    address text NOT NULL,
    description text,
    type text NOT NULL,
    units integer,
    bedrooms integer,
    floors integer,
    bathrooms integer,
    toilets integer,
    energy_class text,
    energy_emissions text,
    living_area integer,
    land_area integer,
    has_parking boolean,
    has_terrace boolean,
    has_garage boolean,
    has_outbuilding boolean,
    has_balcony boolean,
    has_elevator boolean,
    has_cellar boolean,
    has_garden boolean,
    is_new_construction boolean,
    purchase_price numeric,
    monthly_rent numeric,
    monthly_expenses numeric,
    loan_amount numeric,
    monthly_loan_payment numeric,
    loan_duration integer,
    status text,
    construction_year integer,
    purchase_date timestamp without time zone,
    rooms integer,
    isnewconstruction boolean,
    images jsonb,
    user_id integer NOT NULL,
    area integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE template.properties OWNER TO postgres;

--
-- TOC entry 234 (class 1259 OID 27264)
-- Name: properties_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.properties_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.properties_id_seq OWNER TO postgres;

--
-- TOC entry 7400 (class 0 OID 0)
-- Dependencies: 234
-- Name: properties_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.properties_id_seq OWNED BY template.properties.id;


--
-- TOC entry 241 (class 1259 OID 27565)
-- Name: property_analyses; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.property_analyses (
    id integer NOT NULL,
    property_id integer NOT NULL,
    analysis_type text NOT NULL,
    analysis_data jsonb,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE template.property_analyses OWNER TO postgres;

--
-- TOC entry 240 (class 1259 OID 27564)
-- Name: property_analyses_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.property_analyses_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.property_analyses_id_seq OWNER TO postgres;

--
-- TOC entry 7401 (class 0 OID 0)
-- Dependencies: 240
-- Name: property_analyses_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.property_analyses_id_seq OWNED BY template.property_analyses.id;


--
-- TOC entry 239 (class 1259 OID 27549)
-- Name: property_coordinates; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.property_coordinates (
    id integer NOT NULL,
    property_id integer NOT NULL,
    latitude numeric,
    longitude numeric,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE template.property_coordinates OWNER TO postgres;

--
-- TOC entry 238 (class 1259 OID 27548)
-- Name: property_coordinates_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.property_coordinates_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.property_coordinates_id_seq OWNER TO postgres;

--
-- TOC entry 7402 (class 0 OID 0)
-- Dependencies: 238
-- Name: property_coordinates_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.property_coordinates_id_seq OWNED BY template.property_coordinates.id;


--
-- TOC entry 270 (class 1259 OID 28255)
-- Name: property_financial_goals; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.property_financial_goals (
    id integer DEFAULT nextval('template.property_financial_goals_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    title text NOT NULL,
    type text NOT NULL,
    target_value numeric(10,2) NOT NULL,
    current_value numeric(10,2),
    deadline date,
    status text DEFAULT 'pending'::text NOT NULL,
    notes text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE template.property_financial_goals OWNER TO postgres;

--
-- TOC entry 272 (class 1259 OID 28268)
-- Name: property_financial_snapshots; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.property_financial_snapshots (
    id integer DEFAULT nextval('template.property_financial_snapshots_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    snapshot_date date NOT NULL,
    gross_rental_yield numeric(10,2),
    net_rental_yield numeric(10,2),
    cash_on_cash_return numeric(10,2),
    cap_rate numeric(10,2),
    monthly_cash_flow numeric(10,2),
    total_income numeric(10,2),
    total_expenses numeric(10,2),
    occupancy_rate numeric(10,2),
    metadata jsonb DEFAULT '{}'::jsonb,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE template.property_financial_snapshots OWNER TO postgres;

--
-- TOC entry 306 (class 1259 OID 32470)
-- Name: property_history; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.property_history (
    id integer DEFAULT nextval('template.property_history_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    field text NOT NULL,
    old_value text,
    new_value text,
    change_type text NOT NULL,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    metadata jsonb DEFAULT '{}'::jsonb
);


ALTER TABLE template.property_history OWNER TO postgres;

--
-- TOC entry 308 (class 1259 OID 32481)
-- Name: property_works; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.property_works (
    id integer DEFAULT nextval('template.property_works_id_seq'::regclass) NOT NULL,
    property_id integer NOT NULL,
    title text NOT NULL,
    description text,
    type text NOT NULL,
    status text DEFAULT 'planned'::text NOT NULL,
    start_date timestamp without time zone,
    end_date timestamp without time zone,
    estimated_cost numeric(10,2),
    actual_cost numeric(10,2),
    contractor text,
    priority text DEFAULT 'medium'::text,
    documents jsonb DEFAULT '[]'::jsonb,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE template.property_works OWNER TO postgres;

--
-- TOC entry 274 (class 1259 OID 28280)
-- Name: rent_receipts; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.rent_receipts (
    id integer DEFAULT nextval('template.rent_receipts_id_seq'::regclass) NOT NULL,
    tenant_id integer NOT NULL,
    property_id integer NOT NULL,
    transaction_id integer NOT NULL,
    amount real NOT NULL,
    charges real NOT NULL,
    rent_period_start date NOT NULL,
    rent_period_end date NOT NULL,
    status text DEFAULT 'generated'::text NOT NULL,
    document_id integer,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    user_id integer
);


ALTER TABLE template.rent_receipts OWNER TO postgres;

--
-- TOC entry 257 (class 1259 OID 28083)
-- Name: reports; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.reports (
    id integer DEFAULT nextval('template.reports_id_seq'::regclass) NOT NULL,
    title text NOT NULL,
    description text,
    "reportType" text,
    "fileUrl" text,
    "userId" integer,
    "createdAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE template.reports OWNER TO postgres;

--
-- TOC entry 426 (class 1259 OID 44448)
-- Name: storage_management; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.storage_management (
    id integer NOT NULL,
    total_used bigint DEFAULT 0,
    last_calculation timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    storage_categories jsonb DEFAULT '{"other": 0, "images": 0, "documents": 0, "attachments": 0}'::jsonb,
    cleanup_history jsonb DEFAULT '[]'::jsonb,
    user_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE template.storage_management OWNER TO postgres;

--
-- TOC entry 425 (class 1259 OID 44447)
-- Name: storage_management_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.storage_management_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.storage_management_id_seq OWNER TO postgres;

--
-- TOC entry 7403 (class 0 OID 0)
-- Dependencies: 425
-- Name: storage_management_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.storage_management_id_seq OWNED BY template.storage_management.id;


--
-- TOC entry 304 (class 1259 OID 32448)
-- Name: storage_transactions; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.storage_transactions (
    id integer DEFAULT nextval('template.storage_transactions_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    previous_tier character varying(10) NOT NULL,
    new_tier character varying(10) NOT NULL,
    amount_paid numeric(10,2) NOT NULL,
    transaction_date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    expiration_date timestamp without time zone,
    payment_method character varying(50),
    payment_reference character varying(100),
    status character varying(20) DEFAULT 'completed'::character varying,
    notes text
);


ALTER TABLE template.storage_transactions OWNER TO postgres;

--
-- TOC entry 247 (class 1259 OID 27750)
-- Name: storage_usage; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.storage_usage (
    id integer NOT NULL,
    resource_type text NOT NULL,
    resource_id integer NOT NULL,
    filename text,
    file_path text,
    file_type text,
    size_bytes bigint NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    deleted_at timestamp without time zone
);


ALTER TABLE template.storage_usage OWNER TO postgres;

--
-- TOC entry 246 (class 1259 OID 27749)
-- Name: storage_usage_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.storage_usage_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.storage_usage_id_seq OWNER TO postgres;

--
-- TOC entry 7404 (class 0 OID 0)
-- Dependencies: 246
-- Name: storage_usage_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.storage_usage_id_seq OWNED BY template.storage_usage.id;


--
-- TOC entry 289 (class 1259 OID 30068)
-- Name: tenant_documents; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.tenant_documents (
    id integer NOT NULL,
    tenant_id integer NOT NULL,
    document_id integer NOT NULL,
    document_type text DEFAULT 'lease'::text NOT NULL,
    uploaded_at timestamp without time zone DEFAULT now()
);


ALTER TABLE template.tenant_documents OWNER TO postgres;

--
-- TOC entry 290 (class 1259 OID 30075)
-- Name: tenant_documents_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.tenant_documents_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.tenant_documents_id_seq OWNER TO postgres;

--
-- TOC entry 7405 (class 0 OID 0)
-- Dependencies: 290
-- Name: tenant_documents_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.tenant_documents_id_seq OWNED BY template.tenant_documents.id;


--
-- TOC entry 291 (class 1259 OID 30076)
-- Name: tenant_history; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.tenant_history (
    id integer NOT NULL,
    rating integer NOT NULL,
    feedback text,
    category text DEFAULT 'general'::text,
    tenant_full_name text,
    original_user_id integer,
    event_type text DEFAULT 'evaluation'::text,
    event_severity integer DEFAULT 0,
    event_details jsonb,
    documents text[],
    bail_status text,
    bail_id integer,
    property_name text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    created_by integer,
    tenant_id integer,
    is_orphaned boolean DEFAULT false,
    tenant_info_id integer,
    updated_at timestamp without time zone DEFAULT now(),
    updated_by integer
);


ALTER TABLE template.tenant_history OWNER TO postgres;

--
-- TOC entry 292 (class 1259 OID 30086)
-- Name: tenant_history_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.tenant_history_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.tenant_history_id_seq OWNER TO postgres;

--
-- TOC entry 7406 (class 0 OID 0)
-- Dependencies: 292
-- Name: tenant_history_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.tenant_history_id_seq OWNED BY template.tenant_history.id;


--
-- TOC entry 293 (class 1259 OID 30087)
-- Name: tenants; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.tenants (
    id integer NOT NULL,
    user_id integer,
    property_id integer NOT NULL,
    lease_start timestamp without time zone NOT NULL,
    lease_end timestamp without time zone NOT NULL,
    rent_amount numeric(10,2) NOT NULL,
    lease_type text NOT NULL,
    active boolean DEFAULT true,
    lease_status text DEFAULT 'actif'::text,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    tenant_id integer,
    tenant_info_id integer
);

ALTER TABLE ONLY template.tenants FORCE ROW LEVEL SECURITY;


ALTER TABLE template.tenants OWNER TO postgres;

--
-- TOC entry 294 (class 1259 OID 30096)
-- Name: tenants_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.tenants_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.tenants_id_seq OWNER TO postgres;

--
-- TOC entry 7407 (class 0 OID 0)
-- Dependencies: 294
-- Name: tenants_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.tenants_id_seq OWNED BY template.tenants.id;


--
-- TOC entry 296 (class 1259 OID 30293)
-- Name: tenants_info; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.tenants_info (
    id integer NOT NULL,
    full_name text NOT NULL,
    email text,
    phone_number text,
    notes text,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now()
);


ALTER TABLE template.tenants_info OWNER TO postgres;

--
-- TOC entry 295 (class 1259 OID 30292)
-- Name: tenants_info_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.tenants_info_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.tenants_info_id_seq OWNER TO postgres;

--
-- TOC entry 7408 (class 0 OID 0)
-- Dependencies: 295
-- Name: tenants_info_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.tenants_info_id_seq OWNED BY template.tenants_info.id;


--
-- TOC entry 300 (class 1259 OID 30397)
-- Name: transaction_attachments; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.transaction_attachments (
    id integer DEFAULT nextval('template.transaction_attachments_id_seq'::regclass) NOT NULL,
    transaction_id integer NOT NULL,
    file_name character varying(255) NOT NULL,
    file_path character varying(255) NOT NULL,
    file_type character varying(100),
    file_size integer,
    uploaded_at timestamp with time zone DEFAULT now()
);


ALTER TABLE template.transaction_attachments OWNER TO postgres;

--
-- TOC entry 298 (class 1259 OID 30386)
-- Name: transactions; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.transactions (
    id integer DEFAULT nextval('template.transactions_id_seq'::regclass) NOT NULL,
    user_id integer NOT NULL,
    property_id integer,
    tenant_id integer,
    document_id integer,
    document_ids integer[],
    type text NOT NULL,
    category text NOT NULL,
    amount numeric(10,2) NOT NULL,
    description text,
    date timestamp without time zone NOT NULL,
    status text NOT NULL,
    payment_method text,
    created_at timestamp without time zone DEFAULT now(),
    updated_at timestamp without time zone DEFAULT now()
);


ALTER TABLE template.transactions OWNER TO postgres;

--
-- TOC entry 435 (class 1259 OID 44659)
-- Name: users; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.users (
    id integer DEFAULT nextval('template.users_id_seq'::regclass) NOT NULL,
    public_user_id integer NOT NULL,
    client_role text DEFAULT 'user'::text NOT NULL,
    permissions jsonb DEFAULT '{}'::jsonb,
    client_settings jsonb DEFAULT '{}'::jsonb,
    last_login_at timestamp without time zone,
    notes text,
    is_active boolean DEFAULT true,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT users_client_role_check CHECK ((client_role = ANY (ARRAY['user'::text, 'admin'::text, 'manager'::text, 'readonly'::text])))
);


ALTER TABLE template.users OWNER TO postgres;

--
-- TOC entry 287 (class 1259 OID 29334)
-- Name: visits; Type: TABLE; Schema: template; Owner: postgres
--

CREATE TABLE template.visits (
    id integer NOT NULL,
    first_name text NOT NULL,
    last_name text NOT NULL,
    email text NOT NULL,
    phone text NOT NULL,
    datetime timestamp without time zone NOT NULL,
    visit_type text NOT NULL,
    property_id integer,
    manual_address text,
    message text,
    status text DEFAULT 'pending'::text,
    rating integer,
    feedback text,
    archived boolean DEFAULT false,
    agent_id integer,
    source text DEFAULT 'manual'::text,
    documents jsonb DEFAULT '[]'::jsonb,
    reminder_sent boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE template.visits OWNER TO postgres;

--
-- TOC entry 288 (class 1259 OID 29346)
-- Name: visits_id_seq; Type: SEQUENCE; Schema: template; Owner: postgres
--

CREATE SEQUENCE template.visits_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE template.visits_id_seq OWNER TO postgres;

--
-- TOC entry 7409 (class 0 OID 0)
-- Dependencies: 288
-- Name: visits_id_seq; Type: SEQUENCE OWNED BY; Schema: template; Owner: postgres
--

ALTER SEQUENCE template.visits_id_seq OWNED BY template.visits.id;


--
-- TOC entry 5977 (class 2604 OID 41235)
-- Name: form_submissions id; Type: DEFAULT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.form_submissions ALTER COLUMN id SET DEFAULT nextval('client_109.form_submissions_id_seq'::regclass);


--
-- TOC entry 6016 (class 2604 OID 44470)
-- Name: storage_management id; Type: DEFAULT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.storage_management ALTER COLUMN id SET DEFAULT nextval('client_109.storage_management_id_seq'::regclass);


--
-- TOC entry 6031 (class 2604 OID 44623)
-- Name: users id; Type: DEFAULT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.users ALTER COLUMN id SET DEFAULT nextval('client_109.users_id_seq'::regclass);


--
-- TOC entry 5518 (class 2604 OID 18451)
-- Name: billing_transactions id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.billing_transactions ALTER COLUMN id SET DEFAULT nextval('public.billing_transactions_id_seq'::regclass);


--
-- TOC entry 6300 (class 2604 OID 45402)
-- Name: client_schemas id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.client_schemas ALTER COLUMN id SET DEFAULT nextval('public.client_schemas_id_seq'::regclass);


--
-- TOC entry 5981 (class 2604 OID 41361)
-- Name: marketplace_providers id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.marketplace_providers ALTER COLUMN id SET DEFAULT nextval('public.marketplace_providers_id_seq'::regclass);


--
-- TOC entry 5520 (class 2604 OID 18580)
-- Name: sessions id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sessions ALTER COLUMN id SET DEFAULT nextval('public.sessions_id_seq'::regclass);


--
-- TOC entry 5536 (class 2604 OID 27730)
-- Name: storage_plans id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.storage_plans ALTER COLUMN id SET DEFAULT nextval('public.storage_plans_id_seq'::regclass);


--
-- TOC entry 5540 (class 2604 OID 27742)
-- Name: storage_quotas id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.storage_quotas ALTER COLUMN id SET DEFAULT nextval('public.storage_quotas_id_seq'::regclass);


--
-- TOC entry 5511 (class 2604 OID 17814)
-- Name: user_notification_settings id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_notification_settings ALTER COLUMN id SET DEFAULT nextval('public.user_notification_settings_id_seq'::regclass);


--
-- TOC entry 6023 (class 2604 OID 44561)
-- Name: user_storage_subscriptions id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_storage_subscriptions ALTER COLUMN id SET DEFAULT nextval('public.user_storage_subscriptions_id_seq'::regclass);


--
-- TOC entry 5495 (class 2604 OID 17399)
-- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);


--
-- TOC entry 5527 (class 2604 OID 27440)
-- Name: feedbacks id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.feedbacks ALTER COLUMN id SET DEFAULT nextval('template.feedbacks_id_seq'::regclass);


--
-- TOC entry 5979 (class 2604 OID 41308)
-- Name: form_submissions id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.form_submissions ALTER COLUMN id SET DEFAULT nextval('template.form_submissions_id_seq'::regclass);


--
-- TOC entry 5524 (class 2604 OID 27268)
-- Name: properties id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.properties ALTER COLUMN id SET DEFAULT nextval('template.properties_id_seq'::regclass);


--
-- TOC entry 5533 (class 2604 OID 27568)
-- Name: property_analyses id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.property_analyses ALTER COLUMN id SET DEFAULT nextval('template.property_analyses_id_seq'::regclass);


--
-- TOC entry 5530 (class 2604 OID 27552)
-- Name: property_coordinates id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.property_coordinates ALTER COLUMN id SET DEFAULT nextval('template.property_coordinates_id_seq'::regclass);


--
-- TOC entry 6009 (class 2604 OID 44451)
-- Name: storage_management id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.storage_management ALTER COLUMN id SET DEFAULT nextval('template.storage_management_id_seq'::regclass);


--
-- TOC entry 5543 (class 2604 OID 27753)
-- Name: storage_usage id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.storage_usage ALTER COLUMN id SET DEFAULT nextval('template.storage_usage_id_seq'::regclass);


--
-- TOC entry 5669 (class 2604 OID 30112)
-- Name: tenant_documents id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.tenant_documents ALTER COLUMN id SET DEFAULT nextval('template.tenant_documents_id_seq'::regclass);


--
-- TOC entry 5672 (class 2604 OID 30113)
-- Name: tenant_history id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.tenant_history ALTER COLUMN id SET DEFAULT nextval('template.tenant_history_id_seq'::regclass);


--
-- TOC entry 5679 (class 2604 OID 30114)
-- Name: tenants id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.tenants ALTER COLUMN id SET DEFAULT nextval('template.tenants_id_seq'::regclass);


--
-- TOC entry 5684 (class 2604 OID 30296)
-- Name: tenants_info id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.tenants_info ALTER COLUMN id SET DEFAULT nextval('template.tenants_info_id_seq'::regclass);


--
-- TOC entry 5661 (class 2604 OID 29347)
-- Name: visits id; Type: DEFAULT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.visits ALTER COLUMN id SET DEFAULT nextval('template.visits_id_seq'::regclass);


--
-- TOC entry 7121 (class 0 OID 39905)
-- Dependencies: 350
-- Data for Name: ai_conversations; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.ai_conversations (id, user_id, title, created_at, updated_at, status, category, context) FROM stdin;
2	109	4848	2025-05-11 22:11:38.471882	2025-05-11 22:11:38.49043	active	general	{}
3	109	15418	2025-05-11 22:38:57.942343	2025-05-11 22:38:57.959129	active	general	{}
4	109	55	2025-05-11 22:46:43.21011	2025-05-11 22:47:01.777964	active	general	{}
5	109	fdsf	2025-05-11 22:50:22.395292	2025-05-11 22:50:22.409523	active	general	{}
6	109	Comment calculer un préavis de départ pour un loca...	2025-05-11 22:52:26.511749	2025-05-11 22:52:26.525746	active	general	{}
7	109	285	2025-05-11 23:19:41.432795	2025-05-11 23:20:55.464742	active	general	{}
8	109	595	2025-05-11 23:33:02.416203	2025-05-11 23:33:51.132093	active	general	{}
9	109	teste	2025-05-12 00:12:30.544694	2025-05-12 00:12:30.563714	active	general	{}
10	109	Comment gérer une demande de travaux d'un locatair...	2025-05-12 00:30:46.59795	2025-05-12 00:30:46.61363	active	general	{}
11	109	511815	2025-05-12 01:53:28.010928	2025-05-12 01:53:28.023964	active	general	{}
12	109	12515	2025-05-12 01:57:09.598564	2025-05-12 01:57:39.237033	active	general	{}
13	109	5	2025-05-12 02:58:47.277243	2025-05-12 02:58:47.300055	active	general	{}
\.


--
-- TOC entry 7122 (class 0 OID 39922)
-- Dependencies: 351
-- Data for Name: ai_messages; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.ai_messages (id, user_id, role, content, metadata, conversation_id, created_at, is_urgent, model_id, provider) FROM stdin;
2	109	user	4848	{}	2	2025-05-11 22:11:38.482577	f	huggingface	huggingface
3	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	2	2025-05-11 22:11:39.085987	f	huggingface	huggingface
4	109	user	15418	{}	3	2025-05-11 22:38:57.952612	f	huggingface	huggingface
5	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	3	2025-05-11 22:38:58.497531	f	huggingface	huggingface
6	109	user	55	{}	4	2025-05-11 22:46:43.224558	f	huggingface	huggingface
7	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	4	2025-05-11 22:46:43.707898	f	huggingface	huggingface
8	109	user	41841	{}	4	2025-05-11 22:47:01.772026	f	huggingface	huggingface
9	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	4	2025-05-11 22:47:02.115164	f	huggingface	huggingface
10	109	user	fdsf	{}	5	2025-05-11 22:50:22.403238	f	huggingface	huggingface
11	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	5	2025-05-11 22:50:22.740901	f	huggingface	huggingface
12	109	user	Comment calculer un préavis de départ pour un locataire ?	{}	6	2025-05-11 22:52:26.52194	f	huggingface	huggingface
13	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	6	2025-05-11 22:52:26.873036	f	huggingface	huggingface
14	109	user	285	{}	7	2025-05-11 23:19:41.445004	f	huggingface	huggingface
15	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	7	2025-05-11 23:19:42.059604	f	huggingface	huggingface
16	109	user	fgfgd	{}	7	2025-05-11 23:20:05.088165	f	huggingface	huggingface
17	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	7	2025-05-11 23:20:05.489104	f	huggingface	huggingface
18	109	user	5852	{}	7	2025-05-11 23:20:55.454555	f	huggingface	huggingface
19	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	7	2025-05-11 23:20:55.968843	f	huggingface	huggingface
20	109	user	595	{}	8	2025-05-11 23:33:02.427138	f	huggingface	huggingface
21	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	8	2025-05-11 23:33:03.067146	f	huggingface	huggingface
22	109	user	15851	{}	8	2025-05-11 23:33:25.616464	f	huggingface	huggingface
23	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	8	2025-05-11 23:33:25.951362	f	huggingface	huggingface
24	109	user	5	{}	8	2025-05-11 23:33:51.124968	f	huggingface	huggingface
25	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	8	2025-05-11 23:33:51.472219	f	huggingface	huggingface
26	109	user	teste	{}	9	2025-05-12 00:12:30.557254	f	huggingface	huggingface
27	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	9	2025-05-12 00:12:31.100653	f	huggingface	huggingface
28	109	user	Comment gérer une demande de travaux d'un locataire ?	{}	10	2025-05-12 00:30:46.607796	f	huggingface	huggingface
29	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	10	2025-05-12 00:30:47.087095	f	huggingface	huggingface
30	109	user	511815	{}	11	2025-05-12 01:53:28.017417	f	huggingface	huggingface
31	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	11	2025-05-12 01:53:28.536697	f	huggingface	huggingface
32	109	user	12515	{}	12	2025-05-12 01:57:09.642829	f	huggingface	huggingface
33	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	12	2025-05-12 01:57:10.214729	f	huggingface	huggingface
34	109	user	Quelles sont les étapes pour vendre un bien immobilier ?	{}	12	2025-05-12 01:57:39.222243	f	huggingface	huggingface
35	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	12	2025-05-12 01:57:39.606636	f	huggingface	huggingface
36	109	user	5	{}	13	2025-05-12 02:58:47.293687	f	huggingface	huggingface
37	109	assistant	Une erreur s'est produite lors de la génération de la réponse. Veuillez réessayer plus tard.	{}	13	2025-05-12 02:58:47.993848	f	huggingface	huggingface
\.


--
-- TOC entry 7124 (class 0 OID 39951)
-- Dependencies: 353
-- Data for Name: ai_suggestions; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.ai_suggestions (id, user_id, property_id, type, suggestion, data, created_at, status) FROM stdin;
\.


--
-- TOC entry 7189 (class 0 OID 43583)
-- Dependencies: 418
-- Data for Name: ai_tokens; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.ai_tokens (id, user_id, tokens, plan, expires_at, created_at, updated_at) FROM stdin;
1	109	100	free	\N	2025-05-11 21:17:49.198674	2025-05-12 02:58:48.00439
\.


--
-- TOC entry 7190 (class 0 OID 43594)
-- Dependencies: 419
-- Data for Name: ai_usage; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.ai_usage (id, user_id, message_id, conversation_id, tokens_used, model, prompt_tokens, completion_tokens, cost, created_at) FROM stdin;
2	109	3	2	24	openai-gpt-3.5	1	23	0.000047	2025-05-11 22:11:39.094137
3	109	5	3	25	openai-gpt-3.5	2	23	0.000048	2025-05-11 22:38:58.50977
4	109	7	4	24	openai-gpt-3.5	1	23	0.000047	2025-05-11 22:46:43.746628
5	109	9	4	25	openai-gpt-3.5	2	23	0.000048	2025-05-11 22:47:02.161213
6	109	11	5	24	openai-gpt-3.5	1	23	0.000047	2025-05-11 22:50:22.787019
7	109	13	6	38	openai-gpt-3.5	15	23	0.000061	2025-05-11 22:52:26.910369
8	109	15	7	24	openai-gpt-3.5	1	23	0.000047	2025-05-11 23:19:42.103817
9	109	17	7	25	openai-gpt-3.5	2	23	0.000048	2025-05-11 23:20:05.527581
10	109	19	7	24	openai-gpt-3.5	1	23	0.000047	2025-05-11 23:20:56.018937
11	109	21	8	24	openai-gpt-3.5	1	23	0.000047	2025-05-11 23:33:03.082047
12	109	23	8	25	openai-gpt-3.5	2	23	0.000048	2025-05-11 23:33:25.991638
13	109	25	8	24	openai-gpt-3.5	1	23	0.000047	2025-05-11 23:33:51.517721
14	109	27	9	25	openai-gpt-4o	2	23	0.000710	2025-05-12 00:12:31.144104
15	109	29	10	37	openai-gpt-3.5	14	23	0.000060	2025-05-12 00:30:47.14168
16	109	31	11	25	openai-gpt-4o	2	23	0.000710	2025-05-12 01:53:28.580258
17	109	33	12	25	openai-gpt-4o	2	23	0.000710	2025-05-12 01:57:10.258242
18	109	35	12	37	openai-gpt-4o	14	23	0.000830	2025-05-12 01:57:39.649914
19	109	37	13	24	openai-gpt-4o	1	23	0.000700	2025-05-12 02:58:48.060218
\.


--
-- TOC entry 7126 (class 0 OID 39979)
-- Dependencies: 355
-- Data for Name: analysis_configs; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.analysis_configs (id, property_id, user_id, name, period_type, period_value, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7141 (class 0 OID 40165)
-- Dependencies: 370
-- Data for Name: automatic_reminders; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.automatic_reminders (id, user_id, type, related_entity_type, related_entity_id, title, message, next_trigger_date, days_in_advance, recurrence, status, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7148 (class 0 OID 40268)
-- Dependencies: 377
-- Data for Name: company_info; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.company_info (id, user_id, company_name, company_address, company_phone, company_email, company_website, company_siret, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7142 (class 0 OID 40180)
-- Dependencies: 371
-- Data for Name: contract_parties; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.contract_parties (id, contract_id, party_id, party_type, created_at, user_id) FROM stdin;
\.


--
-- TOC entry 7135 (class 0 OID 40091)
-- Dependencies: 364
-- Data for Name: contracts; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.contracts (id, name, type, status, start_date, end_date, property_id, document_id, signature_required, automated_renewal, renewal_date, notification_date, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7146 (class 0 OID 40246)
-- Dependencies: 375
-- Data for Name: document_templates; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.document_templates (id, name, document_type, field_mappings, user_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7137 (class 0 OID 40116)
-- Dependencies: 366
-- Data for Name: documents; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.documents (id, title, type, file_path, original_name, template, user_id, folder_id, parent_id, template_id, created_at, updated_at, form_data, content, theme, file_size) FROM stdin;
5	Mesure taille-poignet-montre EN (2).pdf	invoice	Mesure_taille-poignet-montre_EN__2_-1747080154625-275593397.pdf	Mesure taille-poignet-montre EN (2).pdf	f	109	\N	\N	\N	2025-05-12 20:02:34.637	2025-05-12 20:02:34.637	{"source": "maintenance", "section": "maintenance", "description": "Document de maintenance associé à une demande: gfh", "uploadMethod": "form", "uploadSource": "maintenance_form", "uploadContext": "maintenance", "customFileName": "Mesure taille-poignet-montre EN (2).pdf", "documentCategory": "maintenance", "originalFileName": "Mesure taille-poignet-montre EN (2).pdf", "documentTypeLabel": "Facture"}	{}	{}	0
\.


--
-- TOC entry 7145 (class 0 OID 40237)
-- Dependencies: 374
-- Data for Name: documents_access_log; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.documents_access_log (id, document_id, user_id, access_type, accessed_at, ip_address, user_agent) FROM stdin;
\.


--
-- TOC entry 7128 (class 0 OID 39998)
-- Dependencies: 357
-- Data for Name: feedbacks; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.feedbacks (id, tenant_id, property_id, rating, comment, user_id, created_at, updated_at, tenant_info_id) FROM stdin;
\.


--
-- TOC entry 7143 (class 0 OID 40190)
-- Dependencies: 372
-- Data for Name: financial_entries; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.financial_entries (id, property_id, date, type, category, amount, recurring, frequency, description, source, related_entity_id, related_entity_type, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7144 (class 0 OID 40201)
-- Dependencies: 373
-- Data for Name: folders; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.folders (id, name, parent_id, user_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7168 (class 0 OID 41023)
-- Dependencies: 397
-- Data for Name: form_responses; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.form_responses (id, form_id, response_data, ip_address, user_agent, created_at, link_id) FROM stdin;
3	1	{"1746916857724": "testeeee"}	::1	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36	2025-05-11 00:41:17.719463	11
4	1	{"1746916857724": "testeeee"}	::1	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36	2025-05-11 02:47:13.884907	11
5	1	{"1746916857724": "testeeee"}	::1	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36	2025-05-11 03:15:32.788406	11
6	1	{"1746916857724": "testeeee"}	::1	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36	2025-05-11 03:16:16.228118	11
7	1	{"1746916857724": "testeeee"}	::1	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36	2025-05-11 03:18:52.465093	11
\.


--
-- TOC entry 7180 (class 0 OID 41232)
-- Dependencies: 409
-- Data for Name: form_submissions; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.form_submissions (id, link_id, form_data, ip_address, user_agent, created_at, form_id) FROM stdin;
3	11	{"1746916857724": "testeeee"}	::1	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36	2025-05-11 00:41:17.730274	1
4	11	{"1746916857724": "testeeee"}	::1	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36	2025-05-11 02:47:13.889681	1
5	11	{"1746916857724": "testeeee"}	::1	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36	2025-05-11 03:15:32.793205	1
6	11	{"1746916857724": "testeeee"}	::1	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36	2025-05-11 03:16:16.23962	1
7	11	{"1746916857724": "testeeee"}	::1	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36	2025-05-11 03:18:52.475603	1
\.


--
-- TOC entry 7165 (class 0 OID 40974)
-- Dependencies: 394
-- Data for Name: forms; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.forms (id, user_id, title, description, fields, created_at, updated_at) FROM stdin;
1	109	teste	Formulaire créé automatiquement	[{"id": "1746893940780", "type": "text", "label": "1515", "options": [], "required": false}]	2025-05-10 18:40:33.082756	2025-05-10 18:40:33.082756
2	109	rtert	Formulaire créé automatiquement	[{"id": "1746895090994", "type": "text", "label": "ert", "options": [], "required": false}]	2025-05-10 18:40:33.082756	2025-05-10 18:40:33.082756
3	109	teste1	Formulaire créé automatiquement	[{"id": "1746896182728", "type": "text", "label": "551", "options": [], "required": false}]	2025-05-10 18:56:30.810513	2025-05-10 18:56:30.810513
\.


--
-- TOC entry 7167 (class 0 OID 41004)
-- Dependencies: 396
-- Data for Name: link_forms; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.link_forms (id, link_id, form_id, created_at) FROM stdin;
\.


--
-- TOC entry 7164 (class 0 OID 40947)
-- Dependencies: 393
-- Data for Name: link_profiles; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.link_profiles (id, user_id, slug, title, description, background_color, text_color, accent_color, logo_url, views, background_image, background_pattern, button_style, button_radius, font_family, animation, custom_css, custom_theme, background_saturation, background_hue_rotate, background_sepia, background_grayscale, background_invert, background_color_filter, background_color_filter_opacity, created_at, updated_at, is_paused) FROM stdin;
1	109	vbcvb	Mon Linktree	Tous mes liens professionnels en un seul endroit	#ffffff	#1f2937	#10b981	/uploads/client_109/logos/user-109-logo-1746925617792-861407810.jpg	324	/uploads/client_109/backgrounds/user-109-background-1746929036206-747438996.png	\N	neon	8	Inter	bounce	\N	\N	100	0	0	10	10	#14b8a6	0.3	2025-05-10 10:23:53.649963	2025-05-12 13:54:37.917768	t
\.


--
-- TOC entry 7166 (class 0 OID 40984)
-- Dependencies: 395
-- Data for Name: links; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.links (id, profile_id, title, url, icon, enabled, clicks, "position", featured, custom_color, custom_text_color, animation, type, created_at, updated_at, button_style, user_id, form_definition) FROM stdin;
5	1	 teste formularrezerzerzerire	https://facebook.com	\N	t	0	4	f	\N	\N	\N	link	2025-05-10 20:34:31.756831	2025-05-11 04:10:03.876406	\N	\N	\N
4	1	Nouvelle maison 120 m2	https://facebook.com	\N	t	0	3	f	\N	\N	\N	link	2025-05-10 20:34:07.416595	2025-05-11 04:10:03.878945	\N	\N	\N
11	1	fhjfhjfhj		\N	t	6	2	f	\N	\N	\N	form	2025-05-11 00:41:04.607227	2025-05-11 04:10:03.881003	\N	\N	[{"id": "1746916857724", "type": "text", "label": "tzere", "options": [], "required": false}]
12	1	Nouvelle maison 120 m2	https://facebook.com	/uploads/client_109/link-images/user-109-link-image-1746924687701-174582856.jpg	t	2	3	f	\N	\N	\N	link	2025-05-11 02:51:33.240376	2025-05-11 04:23:13.472243	\N	\N	\N
\.


--
-- TOC entry 7147 (class 0 OID 40256)
-- Dependencies: 376
-- Data for Name: maintenance; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.maintenance (id, title, description, "propertyId", status, "createdAt", "updatedAt", user_id, total_cost, document_id, document_ids, reported_by) FROM stdin;
9	gfh	fgh	1	open	2025-05-12 22:02:34.93362	2025-05-12 22:02:34.93362	109	561.97	5	[5]	h
10	H	JHJ	1	open	2025-05-13 23:17:49.032057	2025-05-13 23:17:49.032057	109	50.00	\N	[]	HJHJ
\.


--
-- TOC entry 7152 (class 0 OID 40331)
-- Dependencies: 381
-- Data for Name: pdf_configuration; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.pdf_configuration (id, user_id, name, orientation, page_size, margin_top, margin_right, margin_bottom, margin_left, show_header, show_footer, show_pagination, show_filters, default_config, created_at, updated_at, header_color, alternate_row_color, items_per_page, custom_title, font_family, font_size, theme_id, accent_color, watermark_text, watermark_opacity, compress_pdf, password_protection, print_background, scale, landscape_scaling, header_height, footer_height) FROM stdin;
\.


--
-- TOC entry 7154 (class 0 OID 40373)
-- Dependencies: 383
-- Data for Name: pdf_document_preferences; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.pdf_document_preferences (id, configuration_id, document_type, enabled, display_order, created_at, updated_at, columns_to_display, custom_title, table_header_color, table_text_color, table_alternate_color, max_items_per_page, user_id) FROM stdin;
\.


--
-- TOC entry 7155 (class 0 OID 40390)
-- Dependencies: 384
-- Data for Name: pdf_logos; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.pdf_logos (id, user_id, name, image_data, width, height, is_default, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7156 (class 0 OID 40403)
-- Dependencies: 385
-- Data for Name: pdf_templates; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.pdf_templates (id, name, type, columns, header_template, footer_template, is_default, created_at, updated_at, header_color, alternate_row_color, items_per_page, default_title, border_style, border_width, row_padding, cell_alignment, user_id) FROM stdin;
\.


--
-- TOC entry 7157 (class 0 OID 40421)
-- Dependencies: 386
-- Data for Name: pdf_themes; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.pdf_themes (id, name, header_color, alternate_row_color, text_color, border_color, accent_color, background_color, font_family, is_default, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7123 (class 0 OID 39941)
-- Dependencies: 352
-- Data for Name: properties; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.properties (id, name, address, description, type, units, bedrooms, floors, bathrooms, toilets, energy_class, energy_emissions, living_area, land_area, has_parking, has_terrace, has_garage, has_outbuilding, has_balcony, has_elevator, has_cellar, has_garden, is_new_construction, purchase_price, monthly_rent, monthly_expenses, loan_amount, monthly_loan_payment, loan_duration, status, construction_year, purchase_date, rooms, isnewconstruction, images, user_id, area, created_at, updated_at) FROM stdin;
1	la parlfferne	64 Rue Pasteur 33200 Bordeaux	\N	apartment	0	0	0	0	0	D	D	0	0	f	f	f	f	f	f	f	f	f	0	0	\N	0	0	20	maintenance	\N	\N	0	\N	[]	109	0	2025-05-12 22:01:40.943	2025-05-12 22:01:40.943
\.


--
-- TOC entry 7134 (class 0 OID 40073)
-- Dependencies: 363
-- Data for Name: property_analyses; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.property_analyses (id, property_id, analysis_type, analysis_data, user_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7131 (class 0 OID 40044)
-- Dependencies: 360
-- Data for Name: property_coordinates; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.property_coordinates (id, property_id, latitude, longitude, created_at, updated_at) FROM stdin;
1	1	44.844463	-0.604005	2025-05-12 22:01:40.955612	2025-05-12 22:01:40.955612
\.


--
-- TOC entry 7149 (class 0 OID 40295)
-- Dependencies: 378
-- Data for Name: property_financial_goals; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.property_financial_goals (id, property_id, title, type, target_value, current_value, deadline, status, notes, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7150 (class 0 OID 40306)
-- Dependencies: 379
-- Data for Name: property_financial_snapshots; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.property_financial_snapshots (id, property_id, snapshot_date, gross_rental_yield, net_rental_yield, cash_on_cash_return, cap_rate, monthly_cash_flow, total_income, total_expenses, occupancy_rate, metadata, created_at, user_id) FROM stdin;
\.


--
-- TOC entry 7139 (class 0 OID 40142)
-- Dependencies: 368
-- Data for Name: property_history; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.property_history (id, property_id, field, old_value, new_value, change_type, user_id, created_at, metadata) FROM stdin;
\.


--
-- TOC entry 7140 (class 0 OID 40152)
-- Dependencies: 369
-- Data for Name: property_works; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.property_works (id, property_id, title, description, type, status, start_date, end_date, estimated_cost, actual_cost, contractor, priority, documents, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7151 (class 0 OID 40316)
-- Dependencies: 380
-- Data for Name: rent_receipts; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.rent_receipts (id, tenant_id, property_id, transaction_id, amount, charges, rent_period_start, rent_period_end, status, document_id, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7136 (class 0 OID 40106)
-- Dependencies: 365
-- Data for Name: reports; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.reports (id, title, description, "reportType", "fileUrl", "userId", "createdAt", "updatedAt") FROM stdin;
\.


--
-- TOC entry 7199 (class 0 OID 44467)
-- Dependencies: 428
-- Data for Name: storage_management; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.storage_management (id, total_used, last_calculation, storage_categories, cleanup_history, user_id, created_at, updated_at) FROM stdin;
6	1531904	2025-05-13 00:05:58.668408	{"total": 1531904, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 32768, "table_name": "storage_management", "size_formatted": "32.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1531904}	[]	109	2025-05-13 00:05:58.668408	2025-05-13 00:05:58.668408
7	1531904	2025-05-13 00:06:06.579897	{"total": 1531904, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 32768, "table_name": "storage_management", "size_formatted": "32.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1531904}	[]	109	2025-05-13 00:06:06.579897	2025-05-13 00:06:06.579897
1	0	2025-05-12 23:24:19.649007	{"other": "0", "images": "0", "documents": "0", "attachments": "0"}	[{"date": "2025-05-12T20:58:44.166Z", "space_freed": 1531904, "files_removed": 0}, {"date": "2025-05-12T21:24:19.665Z", "space_freed": 0, "files_removed": 0}]	109	2025-05-12 20:33:33.751387	2025-05-12 23:24:19.649007
2	1531904	2025-05-12 23:58:55.450727	{"total": 1531904, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 32768, "table_name": "storage_management", "size_formatted": "32.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1531904}	[]	109	2025-05-12 23:58:55.450727	2025-05-12 23:58:55.450727
3	1531904	2025-05-13 00:01:37.889055	{"total": 1531904, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 32768, "table_name": "storage_management", "size_formatted": "32.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1531904}	[]	109	2025-05-13 00:01:37.889055	2025-05-13 00:01:37.889055
4	1531904	2025-05-13 00:01:48.623814	{"total": 1531904, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 32768, "table_name": "storage_management", "size_formatted": "32.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1531904}	[]	109	2025-05-13 00:01:48.623814	2025-05-13 00:01:48.623814
5	1531904	2025-05-13 00:01:57.903885	{"total": 1531904, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 32768, "table_name": "storage_management", "size_formatted": "32.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1531904}	[]	109	2025-05-13 00:01:57.903885	2025-05-13 00:01:57.903885
8	1531904	2025-05-13 00:08:25.484777	{"total": 1531904, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 32768, "table_name": "storage_management", "size_formatted": "32.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1531904}	[]	109	2025-05-13 00:08:25.484777	2025-05-13 00:08:25.484777
9	1564672	2025-05-13 00:08:33.723452	{"total": 1564672, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 65536, "table_name": "storage_management", "size_formatted": "64.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1564672}	[]	109	2025-05-13 00:08:33.723452	2025-05-13 00:08:33.723452
10	1564672	2025-05-13 00:10:15.71759	{"total": 1564672, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 65536, "table_name": "storage_management", "size_formatted": "64.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1564672}	[]	109	2025-05-13 00:10:15.71759	2025-05-13 00:10:15.71759
11	1564672	2025-05-13 00:10:29.544932	{"total": 1564672, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 65536, "table_name": "storage_management", "size_formatted": "64.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1564672}	[]	109	2025-05-13 00:10:29.544932	2025-05-13 00:10:29.544932
12	1564672	2025-05-13 02:05:02.292085	{"total": 1564672, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 65536, "table_name": "storage_management", "size_formatted": "64.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1564672}	[]	109	2025-05-13 02:05:02.292085	2025-05-13 02:05:02.292085
13	1564672	2025-05-13 02:09:18.654088	{"total": 1564672, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 65536, "table_name": "storage_management", "size_formatted": "64.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1564672}	[]	109	2025-05-13 02:09:18.654088	2025-05-13 02:09:18.654088
14	1564672	2025-05-13 02:09:35.120682	{"total": 1564672, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 65536, "table_name": "storage_management", "size_formatted": "64.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1564672}	[]	109	2025-05-13 02:09:35.120682	2025-05-13 02:09:35.120682
15	1572864	2025-05-13 02:27:06.64885	{"total": 1572864, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 73728, "table_name": "storage_management", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1572864}	[]	109	2025-05-13 02:27:06.64885	2025-05-13 02:27:06.64885
16	1572864	2025-05-13 03:00:43.08566	{"total": 1572864, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 73728, "table_name": "storage_management", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1572864}	[]	109	2025-05-13 03:00:43.08566	2025-05-13 03:00:43.08566
17	1572864	2025-05-13 03:58:50.161926	{"total": 1572864, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 73728, "table_name": "storage_management", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1572864}	[]	109	2025-05-13 03:58:50.161926	2025-05-13 03:58:50.161926
18	1572864	2025-05-13 05:24:14.548189	{"total": 1572864, "tables": [{"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 73728, "table_name": "storage_management", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1572864}	[]	109	2025-05-13 05:24:14.548189	2025-05-13 05:24:14.548189
19	1589248	2025-05-13 16:48:39.690889	{"total": 1589248, "tables": [{"size_bytes": 16384, "table_name": "users", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 73728, "table_name": "storage_management", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1589248}	[]	109	2025-05-13 16:48:39.690889	2025-05-13 16:48:39.690889
20	1589248	2025-05-13 16:49:37.846911	{"total": 1589248, "tables": [{"size_bytes": 16384, "table_name": "users", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 73728, "table_name": "storage_management", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1589248}	[]	109	2025-05-13 16:49:37.846911	2025-05-13 16:49:37.846911
21	1613824	2025-05-13 22:06:45.327426	{"total": 1613824, "tables": [{"size_bytes": 16384, "table_name": "users", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "form_submissions", "size_formatted": "32.00 KB"}, {"size_bytes": 49152, "table_name": "ai_tokens", "size_formatted": "48.00 KB"}, {"size_bytes": 81920, "table_name": "ai_usage", "size_formatted": "80.00 KB"}, {"size_bytes": 81920, "table_name": "storage_management", "size_formatted": "80.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 73728, "table_name": "link_forms", "size_formatted": "72.00 KB"}, {"size_bytes": 65536, "table_name": "forms", "size_formatted": "64.00 KB"}, {"size_bytes": 98304, "table_name": "links", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "form_responses", "size_formatted": "64.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 32768, "table_name": "visits", "size_formatted": "32.00 KB"}, {"size_bytes": 98304, "table_name": "ai_messages", "size_formatted": "96.00 KB"}, {"size_bytes": 65536, "table_name": "ai_conversations", "size_formatted": "64.00 KB"}, {"size_bytes": 32768, "table_name": "properties", "size_formatted": "32.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "tenant_history", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "property_coordinates", "size_formatted": "32.00 KB"}, {"size_bytes": 32768, "table_name": "transactions", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "documents", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "maintenance", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}], "uploads": 0, "database": 1613824}	[]	109	2025-05-13 22:06:45.327426	2025-05-13 22:06:45.327426
\.


--
-- TOC entry 7138 (class 0 OID 40132)
-- Dependencies: 367
-- Data for Name: storage_transactions; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.storage_transactions (id, user_id, previous_tier, new_tier, amount_paid, transaction_date, expiration_date, payment_method, payment_reference, status, notes) FROM stdin;
\.


--
-- TOC entry 7153 (class 0 OID 40364)
-- Dependencies: 382
-- Data for Name: storage_usage; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.storage_usage (id, resource_type, resource_id, filename, file_path, file_type, size_bytes, created_at, deleted_at) FROM stdin;
\.


--
-- TOC entry 7125 (class 0 OID 39969)
-- Dependencies: 354
-- Data for Name: tenant_documents; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.tenant_documents (id, tenant_id, document_id, document_type, uploaded_at) FROM stdin;
\.


--
-- TOC entry 7129 (class 0 OID 40008)
-- Dependencies: 358
-- Data for Name: tenant_history; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.tenant_history (id, rating, feedback, category, tenant_full_name, original_user_id, event_type, event_severity, event_details, documents, bail_status, bail_id, property_name, created_at, created_by, tenant_id, is_orphaned, tenant_info_id, updated_at, updated_by) FROM stdin;
1	4	gh	general	bcvbcvb	\N	general	0	{}	{}	\N	\N	\N	2025-05-09 15:15:56.422066	109	\N	f	\N	2025-05-09 15:15:56.422066	\N
\.


--
-- TOC entry 7130 (class 0 OID 40022)
-- Dependencies: 359
-- Data for Name: tenants; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.tenants (id, user_id, property_id, lease_start, lease_end, rent_amount, lease_type, active, lease_status, created_at, updated_at, tenant_id, tenant_info_id) FROM stdin;
\.


--
-- TOC entry 7127 (class 0 OID 39988)
-- Dependencies: 356
-- Data for Name: tenants_info; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.tenants_info (id, full_name, email, phone_number, notes, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7133 (class 0 OID 40064)
-- Dependencies: 362
-- Data for Name: transaction_attachments; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.transaction_attachments (id, transaction_id, file_name, file_path, file_type, file_size, uploaded_at) FROM stdin;
\.


--
-- TOC entry 7132 (class 0 OID 40054)
-- Dependencies: 361
-- Data for Name: transactions; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.transactions (id, user_id, property_id, tenant_id, document_id, document_ids, type, category, amount, description, date, status, payment_method, created_at, updated_at) FROM stdin;
4	109	\N	\N	\N	{}	income	rent	0.00		2025-05-11 22:00:00	pending	bank_transfer	2025-05-12 18:49:32.116144	2025-05-12 18:49:32.116144
5	109	\N	\N	\N	{}	income	rent	0.00		2025-05-11 22:00:00	pending	bank_transfer	2025-05-12 22:00:54.258705	2025-05-12 22:00:54.258705
6	109	\N	\N	\N	{}	income	rent	0.00		2025-05-11 22:00:00	pending	bank_transfer	2025-05-12 22:00:54.834296	2025-05-12 22:00:54.834296
7	109	\N	\N	\N	{}	income	rent	0.00		2025-05-11 22:00:00	pending	bank_transfer	2025-05-12 22:00:55.745065	2025-05-12 22:00:55.745065
8	109	\N	\N	\N	{}	income	rent	0.00		2025-05-11 22:00:00	pending	bank_transfer	2025-05-12 22:00:55.987568	2025-05-12 22:00:55.987568
9	109	\N	\N	\N	{}	income	rent	0.00		2025-05-11 22:00:00	pending	bank_transfer	2025-05-12 22:00:56.205944	2025-05-12 22:00:56.205944
10	109	\N	\N	\N	{}	income	rent	0.00		2025-05-11 22:00:00	pending	bank_transfer	2025-05-12 22:00:56.329819	2025-05-12 22:00:56.329819
11	109	\N	\N	\N	{}	income	rent	0.00		2025-05-11 22:00:00	pending	bank_transfer	2025-05-12 22:00:56.496975	2025-05-12 22:00:56.496975
12	109	\N	\N	\N	{}	income	rent	0.00		2025-05-11 22:00:00	pending	bank_transfer	2025-05-12 22:00:56.653306	2025-05-12 22:00:56.653306
13	109	\N	\N	\N	{}	income	rent	0.00		2025-05-11 22:00:00	pending	bank_transfer	2025-05-12 22:01:43.997754	2025-05-12 22:01:43.997754
14	109	\N	\N	\N	{}	income	rent	0.00		2025-05-12 22:00:00	pending	bank_transfer	2025-05-13 17:13:22.933576	2025-05-13 17:13:22.933576
15	109	\N	\N	\N	{}	income	rent	0.00		2025-05-12 22:00:00	pending	bank_transfer	2025-05-13 17:21:47.718931	2025-05-13 17:21:47.718931
16	109	\N	\N	\N	{}	income	rent	0.00		2025-05-12 22:00:00	pending	bank_transfer	2025-05-13 17:27:35.503224	2025-05-13 17:27:35.503224
17	109	\N	\N	\N	{}	income	rent	0.00		2025-05-12 22:00:00	pending	bank_transfer	2025-05-13 17:28:16.935583	2025-05-13 17:28:16.935583
18	109	1	\N	\N	{}	income	rent	0.00		2025-05-12 22:00:00	pending	bank_transfer	2025-05-13 23:18:03.795578	2025-05-13 23:18:03.795578
\.


--
-- TOC entry 7203 (class 0 OID 44620)
-- Dependencies: 432
-- Data for Name: users; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.users (id, public_user_id, client_role, permissions, client_settings, last_client_access, client_created_at, client_updated_at) FROM stdin;
\.


--
-- TOC entry 7158 (class 0 OID 40470)
-- Dependencies: 387
-- Data for Name: visits; Type: TABLE DATA; Schema: client_109; Owner: postgres
--

COPY client_109.visits (id, first_name, last_name, email, phone, datetime, visit_type, property_id, manual_address, message, status, rating, feedback, archived, agent_id, source, documents, reminder_sent, created_at, updated_at) FROM stdin;
1	doulma	fgfg	c4000plug@gmail.com	0659818847	2025-05-23 19:46:00	physical	1	\N	\N	pending	\N	\N	f	109	manual	[]	f	2025-05-13 17:46:18.04446	2025-05-13 17:46:18.04446
2	6666	gf	hgfgh1482@tutamail.com	0659818847	2025-05-02 00:29:00	physical	\N	dfdfdf	\N	pending	\N	\N	f	109	manual	[]	f	2025-05-13 22:29:37.177096	2025-05-13 22:29:37.177096
\.


--
-- TOC entry 7263 (class 0 OID 44851)
-- Dependencies: 493
-- Data for Name: ai_conversations; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.ai_conversations (id, user_id, title, created_at, updated_at, status, category, context) FROM stdin;
\.


--
-- TOC entry 7262 (class 0 OID 44832)
-- Dependencies: 492
-- Data for Name: ai_messages; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.ai_messages (id, user_id, role, content, metadata, conversation_id, created_at, is_urgent, model_id, provider) FROM stdin;
\.


--
-- TOC entry 7255 (class 0 OID 44740)
-- Dependencies: 485
-- Data for Name: ai_suggestions; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.ai_suggestions (id, user_id, property_id, type, suggestion, data, created_at, status) FROM stdin;
\.


--
-- TOC entry 7260 (class 0 OID 44802)
-- Dependencies: 490
-- Data for Name: ai_tokens; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.ai_tokens (id, user_id, tokens, plan, expires_at, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7261 (class 0 OID 44816)
-- Dependencies: 491
-- Data for Name: ai_usage; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.ai_usage (id, user_id, message_id, conversation_id, tokens_used, model, prompt_tokens, completion_tokens, cost, created_at) FROM stdin;
\.


--
-- TOC entry 7257 (class 0 OID 44768)
-- Dependencies: 487
-- Data for Name: analysis_configs; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.analysis_configs (id, property_id, user_id, name, period_type, period_value, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7279 (class 0 OID 45041)
-- Dependencies: 509
-- Data for Name: automatic_reminders; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.automatic_reminders (id, user_id, type, related_entity_type, related_entity_id, title, message, next_trigger_date, days_in_advance, recurrence, status, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7286 (class 0 OID 45118)
-- Dependencies: 516
-- Data for Name: company_info; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.company_info (id, user_id, company_name, company_address, company_phone, company_email, company_website, company_siret, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7280 (class 0 OID 45056)
-- Dependencies: 510
-- Data for Name: contract_parties; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.contract_parties (id, contract_id, party_id, party_type, created_at, user_id) FROM stdin;
\.


--
-- TOC entry 7273 (class 0 OID 44967)
-- Dependencies: 503
-- Data for Name: contracts; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.contracts (id, name, type, status, start_date, end_date, property_id, document_id, signature_required, automated_renewal, renewal_date, notification_date, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7284 (class 0 OID 45096)
-- Dependencies: 514
-- Data for Name: document_templates; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.document_templates (id, name, document_type, field_mappings, user_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7275 (class 0 OID 44992)
-- Dependencies: 505
-- Data for Name: documents; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.documents (id, title, type, file_path, original_name, template, user_id, folder_id, parent_id, template_id, created_at, updated_at, form_data, content, theme, file_size) FROM stdin;
\.


--
-- TOC entry 7283 (class 0 OID 45087)
-- Dependencies: 513
-- Data for Name: documents_access_log; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.documents_access_log (id, document_id, user_id, access_type, accessed_at, ip_address, user_agent) FROM stdin;
\.


--
-- TOC entry 7265 (class 0 OID 44878)
-- Dependencies: 495
-- Data for Name: feedbacks; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.feedbacks (id, tenant_id, property_id, rating, comment, user_id, created_at, updated_at, tenant_info_id) FROM stdin;
\.


--
-- TOC entry 7281 (class 0 OID 45066)
-- Dependencies: 511
-- Data for Name: financial_entries; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.financial_entries (id, property_id, date, type, category, amount, recurring, frequency, description, source, related_entity_id, related_entity_type, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7282 (class 0 OID 45077)
-- Dependencies: 512
-- Data for Name: folders; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.folders (id, name, parent_id, user_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7305 (class 0 OID 45385)
-- Dependencies: 535
-- Data for Name: form_field_options; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.form_field_options (id, form_field_id, value, "position", created_at) FROM stdin;
\.


--
-- TOC entry 7303 (class 0 OID 45373)
-- Dependencies: 533
-- Data for Name: form_fields; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.form_fields (id, link_id, field_id, type, label, required, "position", created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7300 (class 0 OID 45335)
-- Dependencies: 530
-- Data for Name: form_responses; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.form_responses (id, form_id, response_data, ip_address, user_agent, created_at) FROM stdin;
\.


--
-- TOC entry 7259 (class 0 OID 44795)
-- Dependencies: 489
-- Data for Name: form_submissions; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.form_submissions (id, link_id, form_data, ip_address, user_agent, created_at, form_id) FROM stdin;
\.


--
-- TOC entry 7298 (class 0 OID 45313)
-- Dependencies: 528
-- Data for Name: forms; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.forms (id, user_id, title, description, fields, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7299 (class 0 OID 45324)
-- Dependencies: 529
-- Data for Name: link_forms; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.link_forms (id, link_id, form_id, created_at) FROM stdin;
\.


--
-- TOC entry 7297 (class 0 OID 45285)
-- Dependencies: 527
-- Data for Name: link_profiles; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.link_profiles (id, user_id, slug, title, description, background_color, text_color, accent_color, logo_url, views, background_image, background_pattern, button_style, button_radius, font_family, animation, custom_css, custom_theme, background_saturation, background_hue_rotate, background_sepia, background_grayscale, background_invert, background_color_filter, background_color_filter_opacity, created_at, updated_at, is_paused) FROM stdin;
3	129	astro1	Mon Profil	Tous mes liens professionnels en un seul endroit	#ffffff	#000000	#70C7BA	\N	0	\N	\N	rounded	8	Inter	fade	\N	\N	100	0	0	0	0	\N	0.3	2025-05-13 14:49:36.217251	2025-05-13 14:49:36.217251	f
\.


--
-- TOC entry 7296 (class 0 OID 45268)
-- Dependencies: 526
-- Data for Name: links; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.links (id, profile_id, title, url, icon, enabled, clicks, "position", featured, custom_color, custom_text_color, animation, type, created_at, updated_at, button_style, user_id, form_definition) FROM stdin;
\.


--
-- TOC entry 7285 (class 0 OID 45106)
-- Dependencies: 515
-- Data for Name: maintenance; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.maintenance (id, title, description, "propertyId", status, "createdAt", "updatedAt", user_id, total_cost, document_id, document_ids, reported_by) FROM stdin;
\.


--
-- TOC entry 7290 (class 0 OID 45164)
-- Dependencies: 520
-- Data for Name: pdf_configuration; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.pdf_configuration (id, user_id, name, orientation, page_size, margin_top, margin_right, margin_bottom, margin_left, show_header, show_footer, show_pagination, show_filters, default_config, created_at, updated_at, header_color, alternate_row_color, items_per_page, custom_title, font_family, font_size, theme_id, accent_color, watermark_text, watermark_opacity, compress_pdf, password_protection, print_background, scale, landscape_scaling, header_height, footer_height) FROM stdin;
\.


--
-- TOC entry 7292 (class 0 OID 45206)
-- Dependencies: 522
-- Data for Name: pdf_document_preferences; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.pdf_document_preferences (id, configuration_id, document_type, enabled, display_order, created_at, updated_at, columns_to_display, custom_title, table_header_color, table_text_color, table_alternate_color, max_items_per_page, user_id) FROM stdin;
\.


--
-- TOC entry 7293 (class 0 OID 45223)
-- Dependencies: 523
-- Data for Name: pdf_logos; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.pdf_logos (id, user_id, name, image_data, width, height, is_default, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7294 (class 0 OID 45236)
-- Dependencies: 524
-- Data for Name: pdf_templates; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.pdf_templates (id, name, type, columns, header_template, footer_template, is_default, created_at, updated_at, header_color, alternate_row_color, items_per_page, default_title, border_style, border_width, row_padding, cell_alignment, user_id) FROM stdin;
\.


--
-- TOC entry 7295 (class 0 OID 45254)
-- Dependencies: 525
-- Data for Name: pdf_themes; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.pdf_themes (id, name, header_color, alternate_row_color, text_color, border_color, accent_color, background_color, font_family, is_default, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7254 (class 0 OID 44730)
-- Dependencies: 484
-- Data for Name: properties; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.properties (id, name, address, description, type, units, bedrooms, floors, bathrooms, toilets, energy_class, energy_emissions, living_area, land_area, has_parking, has_terrace, has_garage, has_outbuilding, has_balcony, has_elevator, has_cellar, has_garden, is_new_construction, purchase_price, monthly_rent, monthly_expenses, loan_amount, monthly_loan_payment, loan_duration, status, construction_year, purchase_date, rooms, isnewconstruction, images, user_id, area, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7271 (class 0 OID 44943)
-- Dependencies: 501
-- Data for Name: property_analyses; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.property_analyses (id, property_id, analysis_type, analysis_data, user_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7268 (class 0 OID 44914)
-- Dependencies: 498
-- Data for Name: property_coordinates; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.property_coordinates (id, property_id, latitude, longitude, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7287 (class 0 OID 45128)
-- Dependencies: 517
-- Data for Name: property_financial_goals; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.property_financial_goals (id, property_id, title, type, target_value, current_value, deadline, status, notes, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7288 (class 0 OID 45139)
-- Dependencies: 518
-- Data for Name: property_financial_snapshots; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.property_financial_snapshots (id, property_id, snapshot_date, gross_rental_yield, net_rental_yield, cash_on_cash_return, cap_rate, monthly_cash_flow, total_income, total_expenses, occupancy_rate, metadata, created_at, user_id) FROM stdin;
\.


--
-- TOC entry 7277 (class 0 OID 45018)
-- Dependencies: 507
-- Data for Name: property_history; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.property_history (id, property_id, field, old_value, new_value, change_type, user_id, created_at, metadata) FROM stdin;
\.


--
-- TOC entry 7278 (class 0 OID 45028)
-- Dependencies: 508
-- Data for Name: property_works; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.property_works (id, property_id, title, description, type, status, start_date, end_date, estimated_cost, actual_cost, contractor, priority, documents, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7289 (class 0 OID 45149)
-- Dependencies: 519
-- Data for Name: rent_receipts; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.rent_receipts (id, tenant_id, property_id, transaction_id, amount, charges, rent_period_start, rent_period_end, status, document_id, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7274 (class 0 OID 44982)
-- Dependencies: 504
-- Data for Name: reports; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.reports (id, title, description, "reportType", "fileUrl", "userId", "createdAt", "updatedAt") FROM stdin;
\.


--
-- TOC entry 7272 (class 0 OID 44953)
-- Dependencies: 502
-- Data for Name: storage_management; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.storage_management (id, total_used, last_calculation, storage_categories, cleanup_history, user_id, created_at, updated_at) FROM stdin;
1	\N	2025-05-13 14:49:46.254533	{"total": null, "tables": [{"size_bytes": 16384, "table_name": "properties", "size_formatted": "16.00 KB"}, {"size_bytes": 57344, "table_name": "ai_suggestions", "size_formatted": "56.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_documents", "size_formatted": "16.00 KB"}, {"size_bytes": 24576, "table_name": "analysis_configs", "size_formatted": "24.00 KB"}, {"size_bytes": 32768, "table_name": "users", "size_formatted": "32.00 KB"}, {"size_bytes": 8192, "table_name": "form_submissions", "size_formatted": "8.00 KB"}, {"size_bytes": 24576, "table_name": "ai_tokens", "size_formatted": "24.00 KB"}, {"size_bytes": 40960, "table_name": "ai_usage", "size_formatted": "40.00 KB"}, {"size_bytes": 49152, "table_name": "ai_messages", "size_formatted": "48.00 KB"}, {"size_bytes": 32768, "table_name": "ai_conversations", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "tenants_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "feedbacks", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "tenant_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "tenants", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_coordinates", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "transaction_attachments", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_analyses", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_management", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "contracts", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "reports", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_transactions", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_history", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_works", "size_formatted": "16.00 KB"}, {"size_bytes": 40960, "table_name": "automatic_reminders", "size_formatted": "40.00 KB"}, {"size_bytes": 16384, "table_name": "contract_parties", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "financial_entries", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "folders", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "documents_access_log", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "document_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "maintenance", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "company_info", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_goals", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "property_financial_snapshots", "size_formatted": "16.00 KB"}, {"size_bytes": 49152, "table_name": "rent_receipts", "size_formatted": "48.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_configuration", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "storage_usage", "size_formatted": "16.00 KB"}, {"size_bytes": 32768, "table_name": "pdf_document_preferences", "size_formatted": "32.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_logos", "size_formatted": "16.00 KB"}, {"size_bytes": 16384, "table_name": "pdf_templates", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "pdf_themes", "size_formatted": "8.00 KB"}, {"size_bytes": 32768, "table_name": "links", "size_formatted": "32.00 KB"}, {"size_bytes": 65536, "table_name": "link_profiles", "size_formatted": "64.00 KB"}, {"size_bytes": 24576, "table_name": "forms", "size_formatted": "24.00 KB"}, {"size_bytes": 32768, "table_name": "link_forms", "size_formatted": "32.00 KB"}, {"size_bytes": 24576, "table_name": "form_responses", "size_formatted": "24.00 KB"}, {"size_bytes": 16384, "table_name": "visits", "size_formatted": "16.00 KB"}, {"size_bytes": 8192, "table_name": "form_fields", "size_formatted": "8.00 KB"}, {"size_bytes": 8192, "table_name": "form_field_options", "size_formatted": "8.00 KB"}], "uploads": null, "database": 1105920}	[]	129	2025-05-13 14:49:46.254533	2025-05-13 14:49:46.254533
\.


--
-- TOC entry 7276 (class 0 OID 45008)
-- Dependencies: 506
-- Data for Name: storage_transactions; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.storage_transactions (id, user_id, previous_tier, new_tier, amount_paid, transaction_date, expiration_date, payment_method, payment_reference, status, notes) FROM stdin;
\.


--
-- TOC entry 7291 (class 0 OID 45197)
-- Dependencies: 521
-- Data for Name: storage_usage; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.storage_usage (id, resource_type, resource_id, filename, file_path, file_type, size_bytes, created_at, deleted_at) FROM stdin;
\.


--
-- TOC entry 7256 (class 0 OID 44758)
-- Dependencies: 486
-- Data for Name: tenant_documents; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.tenant_documents (id, tenant_id, document_id, document_type, uploaded_at) FROM stdin;
\.


--
-- TOC entry 7266 (class 0 OID 44888)
-- Dependencies: 496
-- Data for Name: tenant_history; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.tenant_history (id, rating, feedback, category, tenant_full_name, original_user_id, event_type, event_severity, event_details, documents, bail_status, bail_id, property_name, created_at, created_by, tenant_id, is_orphaned, tenant_info_id, updated_at, updated_by) FROM stdin;
\.


--
-- TOC entry 7267 (class 0 OID 44902)
-- Dependencies: 497
-- Data for Name: tenants; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.tenants (id, user_id, property_id, lease_start, lease_end, rent_amount, lease_type, active, lease_status, created_at, updated_at, tenant_id, tenant_info_id) FROM stdin;
\.


--
-- TOC entry 7264 (class 0 OID 44868)
-- Dependencies: 494
-- Data for Name: tenants_info; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.tenants_info (id, full_name, email, phone_number, notes, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7270 (class 0 OID 44934)
-- Dependencies: 500
-- Data for Name: transaction_attachments; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.transaction_attachments (id, transaction_id, file_name, file_path, file_type, file_size, uploaded_at) FROM stdin;
\.


--
-- TOC entry 7269 (class 0 OID 44924)
-- Dependencies: 499
-- Data for Name: transactions; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.transactions (id, user_id, property_id, tenant_id, document_id, document_ids, type, category, amount, description, date, status, payment_method, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7258 (class 0 OID 44777)
-- Dependencies: 488
-- Data for Name: users; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.users (id, public_user_id, client_role, permissions, client_settings, last_login_at, notes, is_active, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7301 (class 0 OID 45345)
-- Dependencies: 531
-- Data for Name: visits; Type: TABLE DATA; Schema: client_129; Owner: postgres
--

COPY client_129.visits (id, first_name, last_name, email, phone, datetime, visit_type, property_id, manual_address, message, status, rating, feedback, archived, agent_id, source, documents, reminder_sent, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7002 (class 0 OID 18448)
-- Dependencies: 230
-- Data for Name: billing_transactions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.billing_transactions (id, user_id, amount, description, status, payment_method, transaction_date, next_billing_date, metadata) FROM stdin;
\.


--
-- TOC entry 7307 (class 0 OID 45399)
-- Dependencies: 537
-- Data for Name: client_schemas; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.client_schemas (id, schema_name, owner_account_id, client_name, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7184 (class 0 OID 41358)
-- Dependencies: 413
-- Data for Name: marketplace_providers; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.marketplace_providers (id, name, category, description, contact_email, contact_phone, website, logo_url, address, postal_code, city, country, services, rating, visible_to_all, authorized_clients, is_active, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7005 (class 0 OID 27055)
-- Dependencies: 233
-- Data for Name: schema_mapping; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.schema_mapping (schema_name, user_id, created_at) FROM stdin;
\.


--
-- TOC entry 7004 (class 0 OID 18577)
-- Dependencies: 232
-- Data for Name: sessions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.sessions (id, user_id, session_id, ip_address, user_agent, payload, expires_at, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7015 (class 0 OID 27727)
-- Dependencies: 243
-- Data for Name: storage_plans; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.storage_plans (id, name, description, storage_limit, price_monthly, price_yearly, is_active, features, created_at, updated_at) FROM stdin;
1	Gratuit	Plan gratuit avec stockage limité	536870912	0.00	0.00	t	{"max_properties": 3, "image_enhancement": false}	2025-05-06 20:53:40.970584	2025-05-06 20:53:40.970584
2	Standard	Plan standard pour les propriétaires	5368709120	9.99	99.99	t	{"max_properties": 15, "image_enhancement": true}	2025-05-06 20:53:40.970584	2025-05-06 20:53:40.970584
3	Professionnel	Plan avancé pour les professionnels	53687091200	29.99	299.99	t	{"ai_assistant": true, "max_properties": -1, "image_enhancement": true}	2025-05-06 20:53:40.970584	2025-05-06 20:53:40.970584
4	basic	\N	5368709120	0.00	0.00	t	["Stockage de 5 GB", "Formats de fichiers standards", "Support par email"]	2025-05-12 23:56:55.78868	2025-05-12 23:56:55.78868
5	standard	\N	10737418240	9.99	99.90	t	["Stockage de 10 GB", "Formats de fichiers avancés", "Sauvegarde automatique", "Support prioritaire"]	2025-05-12 23:56:55.78868	2025-05-12 23:56:55.78868
6	pro	\N	21474836480	19.99	199.90	t	["Stockage de 20 GB", "Tous les formats de fichiers", "Analyse avancée des données", "Support prioritaire 24/7"]	2025-05-12 23:56:55.78868	2025-05-12 23:56:55.78868
7	premium	\N	53687091200	39.99	399.90	t	["Stockage de 50 GB", "Analyse de documents avancée", "Accès à toutes les fonctionnalités premium", "Support dédié"]	2025-05-12 23:56:55.78868	2025-05-12 23:56:55.78868
8	enterprise	\N	107374182400	79.99	799.90	t	["Stockage de 100 GB", "API dédiée", "Gestion multi-utilisateurs", "Conformité RGPD avancée", "Support prioritaire avec SLA"]	2025-05-12 23:56:55.78868	2025-05-12 23:56:55.78868
9	basic	\N	5368709120	0.00	0.00	t	["Stockage de 5 GB", "Formats de fichiers standards", "Support par email"]	2025-05-13 00:11:44.00195	2025-05-13 00:11:44.00195
10	standard	\N	10737418240	9.99	99.90	t	["Stockage de 10 GB", "Formats de fichiers avancés", "Sauvegarde automatique", "Support prioritaire"]	2025-05-13 00:11:44.00195	2025-05-13 00:11:44.00195
11	pro	\N	21474836480	19.99	199.90	t	["Stockage de 20 GB", "Tous les formats de fichiers", "Analyse avancée des données", "Support prioritaire 24/7"]	2025-05-13 00:11:44.00195	2025-05-13 00:11:44.00195
12	premium	\N	53687091200	39.99	399.90	t	["Stockage de 50 GB", "Analyse de documents avancée", "Accès à toutes les fonctionnalités premium", "Support dédié"]	2025-05-13 00:11:44.00195	2025-05-13 00:11:44.00195
13	enterprise	\N	107374182400	79.99	799.90	t	["Stockage de 100 GB", "API dédiée", "Gestion multi-utilisateurs", "Conformité RGPD avancée", "Support prioritaire avec SLA"]	2025-05-13 00:11:44.00195	2025-05-13 00:11:44.00195
\.


--
-- TOC entry 7017 (class 0 OID 27739)
-- Dependencies: 245
-- Data for Name: storage_quotas; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.storage_quotas (id, resource_type, size_limit, count_limit, applies_to, created_at, updated_at) FROM stdin;
1	document	10485760	50	free	2025-05-06 20:53:40.970584	2025-05-06 20:53:40.970584
2	image	5242880	20	free	2025-05-06 20:53:40.970584	2025-05-06 20:53:40.970584
3	document	52428800	-1	premium	2025-05-06 20:53:40.970584	2025-05-06 20:53:40.970584
4	image	20971520	-1	premium	2025-05-06 20:53:40.970584	2025-05-06 20:53:40.970584
\.


--
-- TOC entry 7000 (class 0 OID 17811)
-- Dependencies: 228
-- Data for Name: user_notification_settings; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.user_notification_settings (id, user_id, type, channel, enabled, frequency, importance, created_at, updated_at) FROM stdin;
1	2	payment	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
2	4	payment	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
3	8	payment	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
4	19	payment	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
5	3	payment	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
6	10	payment	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
7	5	payment	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
8	6	payment	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
9	7	payment	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
10	11	payment	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
12	2	maintenance	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
13	4	maintenance	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
14	8	maintenance	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
15	19	maintenance	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
16	3	maintenance	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
17	10	maintenance	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
18	5	maintenance	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
19	6	maintenance	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
20	7	maintenance	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
21	11	maintenance	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
23	2	lease	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
24	4	lease	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
25	8	lease	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
26	19	lease	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
27	3	lease	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
28	10	lease	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
29	5	lease	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
30	6	lease	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
31	7	lease	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
32	11	lease	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
34	2	visit	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
35	4	visit	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
36	8	visit	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
37	19	visit	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
38	3	visit	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
39	10	visit	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
40	5	visit	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
41	6	visit	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
42	7	visit	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
43	11	visit	both	t	immediate	all	2025-04-21 16:46:28.050222+02	2025-04-21 16:46:28.050222+02
\.


--
-- TOC entry 7201 (class 0 OID 44558)
-- Dependencies: 430
-- Data for Name: user_storage_subscriptions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.user_storage_subscriptions (id, user_id, plan_id, start_date, end_date, billing_cycle, next_billing_date, is_active, payment_status, payment_method, payment_history, created_at, updated_at) FROM stdin;
1	109	8	2025-05-13 02:27:29.827359	\N	yearly	2026-05-13 00:00:00	t	pending	\N	[{"date": "2025-05-13T02:27:29.827359+02:00", "amount": 799.90, "status": "pending"}]	2025-05-13 02:27:29.827359	2025-05-13 02:27:29.827359
\.


--
-- TOC entry 6997 (class 0 OID 16853)
-- Dependencies: 225
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (id, username, password, full_name, email, phone_number, role, profile_image, archived, account_type, parent_account_id, settings, created_at, updated_at, is_premium, request_count, request_limit, preferred_ai_model, storage_used, storage_limit, storage_tier, last_reset_date, storage_last_calculated) FROM stdin;
129	astro1	$2b$10$gDEdtIgwtHpJjpT/HOn/xuezZgNJJbUHZFUNdey01RbkjUjFKGcLG	Kiian polm	hgfgh1482@tutamail.com	\N	clients	\N	f	individual	\N	{}	2025-05-13 12:49:35.537	2025-05-13 14:49:46.254533	f	0	100	openai-gpt-3.5	\N	5368709120.00	basic	2025-05-13 14:49:35.539444	2025-05-13 14:49:46.254533
128	albert11	$2b$10$gTW3Z/p8Azj/5gNxlx7rjeAmW2pzYaffNjn7EVe6XYeS0r17M0O7W	albert11	f@gmail.com	\N	clients	\N	f	individual	\N	{}	2025-05-11 20:48:12.827	2025-05-11 22:48:12.833326	f	0	100	openai-gpt-3.5	0.00	5368709120.00	basic	2025-05-11 23:13:51.634092	2025-05-12 23:56:55.78868
109	testuser	$2b$10$EYcKPWDNT3OQUfqV/Ii3Seh.9nAcnEaDH94QmDHmvBJxLFQXw3/im	Killian polm	hgfgh1482@tutamail.com	\N	clients	\N	f	individual	\N	{}	2025-05-09 13:13:44.232	2025-05-13 22:06:45.327426	f	18	100	openai-gpt-4o	1613824.00	107374182400.00	enterprise	2025-06-11 22:35:55.717	2025-05-13 22:06:45.327426
\.


--
-- TOC entry 7020 (class 0 OID 27881)
-- Dependencies: 248
-- Data for Name: ai_conversations; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.ai_conversations (id, user_id, title, created_at, updated_at, status, category, context) FROM stdin;
\.


--
-- TOC entry 7021 (class 0 OID 27898)
-- Dependencies: 249
-- Data for Name: ai_messages; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.ai_messages (id, user_id, role, content, metadata, conversation_id, created_at, is_urgent, model_id, provider) FROM stdin;
\.


--
-- TOC entry 7022 (class 0 OID 27917)
-- Dependencies: 250
-- Data for Name: ai_suggestions; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.ai_suggestions (id, user_id, property_id, type, suggestion, data, created_at, status) FROM stdin;
\.


--
-- TOC entry 7187 (class 0 OID 43537)
-- Dependencies: 416
-- Data for Name: ai_tokens; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.ai_tokens (id, user_id, tokens, plan, expires_at, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7188 (class 0 OID 43548)
-- Dependencies: 417
-- Data for Name: ai_usage; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.ai_usage (id, user_id, message_id, conversation_id, tokens_used, model, prompt_tokens, completion_tokens, cost, created_at) FROM stdin;
\.


--
-- TOC entry 7023 (class 0 OID 27935)
-- Dependencies: 251
-- Data for Name: analysis_configs; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.analysis_configs (id, property_id, user_id, name, period_type, period_value, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7032 (class 0 OID 28139)
-- Dependencies: 260
-- Data for Name: automatic_reminders; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.automatic_reminders (id, user_id, type, related_entity_type, related_entity_id, title, message, next_trigger_date, days_in_advance, recurrence, status, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7085 (class 0 OID 32543)
-- Dependencies: 314
-- Data for Name: company_info; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.company_info (id, user_id, company_name, company_address, company_phone, company_email, company_website, company_siret, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7034 (class 0 OID 28156)
-- Dependencies: 262
-- Data for Name: contract_parties; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.contract_parties (id, contract_id, party_id, party_type, created_at, user_id) FROM stdin;
\.


--
-- TOC entry 7028 (class 0 OID 28068)
-- Dependencies: 256
-- Data for Name: contracts; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.contracts (id, name, type, status, start_date, end_date, property_id, document_id, signature_required, automated_renewal, renewal_date, notification_date, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7083 (class 0 OID 32532)
-- Dependencies: 312
-- Data for Name: document_templates; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.document_templates (id, name, document_type, field_mappings, user_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7073 (class 0 OID 30439)
-- Dependencies: 302
-- Data for Name: documents; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.documents (id, title, type, file_path, original_name, template, user_id, folder_id, parent_id, template_id, created_at, updated_at, form_data, content, theme, file_size) FROM stdin;
\.


--
-- TOC entry 7081 (class 0 OID 32522)
-- Dependencies: 310
-- Data for Name: documents_access_log; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.documents_access_log (id, document_id, user_id, access_type, accessed_at, ip_address, user_agent) FROM stdin;
\.


--
-- TOC entry 7009 (class 0 OID 27437)
-- Dependencies: 237
-- Data for Name: feedbacks; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.feedbacks (id, tenant_id, property_id, rating, comment, user_id, created_at, updated_at, tenant_info_id) FROM stdin;
\.


--
-- TOC entry 7036 (class 0 OID 28168)
-- Dependencies: 264
-- Data for Name: financial_entries; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.financial_entries (id, property_id, date, type, category, amount, recurring, frequency, description, source, related_entity_id, related_entity_type, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7038 (class 0 OID 28181)
-- Dependencies: 266
-- Data for Name: folders; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.folders (id, name, parent_id, user_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7178 (class 0 OID 41128)
-- Dependencies: 407
-- Data for Name: form_responses; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.form_responses (id, form_id, response_data, ip_address, user_agent, created_at) FROM stdin;
\.


--
-- TOC entry 7182 (class 0 OID 41305)
-- Dependencies: 411
-- Data for Name: form_submissions; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.form_submissions (id, link_id, form_data, ip_address, user_agent, created_at, form_id) FROM stdin;
\.


--
-- TOC entry 7175 (class 0 OID 41079)
-- Dependencies: 404
-- Data for Name: forms; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.forms (id, user_id, title, description, fields, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7177 (class 0 OID 41109)
-- Dependencies: 406
-- Data for Name: link_forms; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.link_forms (id, link_id, form_id, created_at) FROM stdin;
\.


--
-- TOC entry 7174 (class 0 OID 41052)
-- Dependencies: 403
-- Data for Name: link_profiles; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.link_profiles (id, user_id, slug, title, description, background_color, text_color, accent_color, logo_url, views, background_image, background_pattern, button_style, button_radius, font_family, animation, custom_css, custom_theme, background_saturation, background_hue_rotate, background_sepia, background_grayscale, background_invert, background_color_filter, background_color_filter_opacity, created_at, updated_at, is_paused) FROM stdin;
\.


--
-- TOC entry 7176 (class 0 OID 41089)
-- Dependencies: 405
-- Data for Name: links; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.links (id, profile_id, title, url, icon, enabled, clicks, "position", featured, custom_color, custom_text_color, animation, type, created_at, updated_at, button_style, user_id, form_definition) FROM stdin;
\.


--
-- TOC entry 7040 (class 0 OID 28242)
-- Dependencies: 268
-- Data for Name: maintenance; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.maintenance (id, title, description, "propertyId", status, "createdAt", "updatedAt", user_id, total_cost, document_id, document_ids, reported_by) FROM stdin;
\.


--
-- TOC entry 7048 (class 0 OID 28309)
-- Dependencies: 276
-- Data for Name: pdf_configuration; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.pdf_configuration (id, user_id, name, orientation, page_size, margin_top, margin_right, margin_bottom, margin_left, show_header, show_footer, show_pagination, show_filters, default_config, created_at, updated_at, header_color, alternate_row_color, items_per_page, custom_title, font_family, font_size, theme_id, accent_color, watermark_text, watermark_opacity, compress_pdf, password_protection, print_background, scale, landscape_scaling, header_height, footer_height) FROM stdin;
\.


--
-- TOC entry 7050 (class 0 OID 28344)
-- Dependencies: 278
-- Data for Name: pdf_document_preferences; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.pdf_document_preferences (id, configuration_id, document_type, enabled, display_order, created_at, updated_at, columns_to_display, custom_title, table_header_color, table_text_color, table_alternate_color, max_items_per_page, user_id) FROM stdin;
\.


--
-- TOC entry 7052 (class 0 OID 28363)
-- Dependencies: 280
-- Data for Name: pdf_logos; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.pdf_logos (id, user_id, name, image_data, width, height, is_default, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7054 (class 0 OID 28378)
-- Dependencies: 282
-- Data for Name: pdf_templates; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.pdf_templates (id, name, type, columns, header_template, footer_template, is_default, created_at, updated_at, header_color, alternate_row_color, items_per_page, default_title, border_style, border_width, row_padding, cell_alignment, user_id) FROM stdin;
\.


--
-- TOC entry 7056 (class 0 OID 28398)
-- Dependencies: 284
-- Data for Name: pdf_themes; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.pdf_themes (id, name, header_color, alternate_row_color, text_color, border_color, accent_color, background_color, font_family, is_default, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7007 (class 0 OID 27265)
-- Dependencies: 235
-- Data for Name: properties; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.properties (id, name, address, description, type, units, bedrooms, floors, bathrooms, toilets, energy_class, energy_emissions, living_area, land_area, has_parking, has_terrace, has_garage, has_outbuilding, has_balcony, has_elevator, has_cellar, has_garden, is_new_construction, purchase_price, monthly_rent, monthly_expenses, loan_amount, monthly_loan_payment, loan_duration, status, construction_year, purchase_date, rooms, isnewconstruction, images, user_id, area, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7013 (class 0 OID 27565)
-- Dependencies: 241
-- Data for Name: property_analyses; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.property_analyses (id, property_id, analysis_type, analysis_data, user_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7011 (class 0 OID 27549)
-- Dependencies: 239
-- Data for Name: property_coordinates; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.property_coordinates (id, property_id, latitude, longitude, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7042 (class 0 OID 28255)
-- Dependencies: 270
-- Data for Name: property_financial_goals; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.property_financial_goals (id, property_id, title, type, target_value, current_value, deadline, status, notes, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7044 (class 0 OID 28268)
-- Dependencies: 272
-- Data for Name: property_financial_snapshots; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.property_financial_snapshots (id, property_id, snapshot_date, gross_rental_yield, net_rental_yield, cash_on_cash_return, cap_rate, monthly_cash_flow, total_income, total_expenses, occupancy_rate, metadata, created_at, user_id) FROM stdin;
\.


--
-- TOC entry 7077 (class 0 OID 32470)
-- Dependencies: 306
-- Data for Name: property_history; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.property_history (id, property_id, field, old_value, new_value, change_type, user_id, created_at, metadata) FROM stdin;
\.


--
-- TOC entry 7079 (class 0 OID 32481)
-- Dependencies: 308
-- Data for Name: property_works; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.property_works (id, property_id, title, description, type, status, start_date, end_date, estimated_cost, actual_cost, contractor, priority, documents, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7046 (class 0 OID 28280)
-- Dependencies: 274
-- Data for Name: rent_receipts; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.rent_receipts (id, tenant_id, property_id, transaction_id, amount, charges, rent_period_start, rent_period_end, status, document_id, created_at, updated_at, user_id) FROM stdin;
\.


--
-- TOC entry 7029 (class 0 OID 28083)
-- Dependencies: 257
-- Data for Name: reports; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.reports (id, title, description, "reportType", "fileUrl", "userId", "createdAt", "updatedAt") FROM stdin;
\.


--
-- TOC entry 7197 (class 0 OID 44448)
-- Dependencies: 426
-- Data for Name: storage_management; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.storage_management (id, total_used, last_calculation, storage_categories, cleanup_history, user_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7075 (class 0 OID 32448)
-- Dependencies: 304
-- Data for Name: storage_transactions; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.storage_transactions (id, user_id, previous_tier, new_tier, amount_paid, transaction_date, expiration_date, payment_method, payment_reference, status, notes) FROM stdin;
\.


--
-- TOC entry 7019 (class 0 OID 27750)
-- Dependencies: 247
-- Data for Name: storage_usage; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.storage_usage (id, resource_type, resource_id, filename, file_path, file_type, size_bytes, created_at, deleted_at) FROM stdin;
\.


--
-- TOC entry 7060 (class 0 OID 30068)
-- Dependencies: 289
-- Data for Name: tenant_documents; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.tenant_documents (id, tenant_id, document_id, document_type, uploaded_at) FROM stdin;
\.


--
-- TOC entry 7062 (class 0 OID 30076)
-- Dependencies: 291
-- Data for Name: tenant_history; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.tenant_history (id, rating, feedback, category, tenant_full_name, original_user_id, event_type, event_severity, event_details, documents, bail_status, bail_id, property_name, created_at, created_by, tenant_id, is_orphaned, tenant_info_id, updated_at, updated_by) FROM stdin;
\.


--
-- TOC entry 7064 (class 0 OID 30087)
-- Dependencies: 293
-- Data for Name: tenants; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.tenants (id, user_id, property_id, lease_start, lease_end, rent_amount, lease_type, active, lease_status, created_at, updated_at, tenant_id, tenant_info_id) FROM stdin;
\.


--
-- TOC entry 7067 (class 0 OID 30293)
-- Dependencies: 296
-- Data for Name: tenants_info; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.tenants_info (id, full_name, email, phone_number, notes, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7071 (class 0 OID 30397)
-- Dependencies: 300
-- Data for Name: transaction_attachments; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.transaction_attachments (id, transaction_id, file_name, file_path, file_type, file_size, uploaded_at) FROM stdin;
\.


--
-- TOC entry 7069 (class 0 OID 30386)
-- Dependencies: 298
-- Data for Name: transactions; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.transactions (id, user_id, property_id, tenant_id, document_id, document_ids, type, category, amount, description, date, status, payment_method, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7205 (class 0 OID 44659)
-- Dependencies: 435
-- Data for Name: users; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.users (id, public_user_id, client_role, permissions, client_settings, last_login_at, notes, is_active, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7058 (class 0 OID 29334)
-- Dependencies: 287
-- Data for Name: visits; Type: TABLE DATA; Schema: template; Owner: postgres
--

COPY template.visits (id, first_name, last_name, email, phone, datetime, visit_type, property_id, manual_address, message, status, rating, feedback, archived, agent_id, source, documents, reminder_sent, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7410 (class 0 OID 0)
-- Dependencies: 422
-- Name: ai_conversations_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.ai_conversations_id_seq', 13, true);


--
-- TOC entry 7411 (class 0 OID 0)
-- Dependencies: 423
-- Name: ai_messages_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.ai_messages_id_seq', 37, true);


--
-- TOC entry 7412 (class 0 OID 0)
-- Dependencies: 424
-- Name: ai_suggestions_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.ai_suggestions_id_seq', 1, true);


--
-- TOC entry 7413 (class 0 OID 0)
-- Dependencies: 420
-- Name: ai_tokens_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.ai_tokens_id_seq', 2, true);


--
-- TOC entry 7414 (class 0 OID 0)
-- Dependencies: 421
-- Name: ai_usage_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.ai_usage_id_seq', 19, true);


--
-- TOC entry 7415 (class 0 OID 0)
-- Dependencies: 318
-- Name: analysis_configs_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.analysis_configs_id_seq', 1, false);


--
-- TOC entry 7416 (class 0 OID 0)
-- Dependencies: 332
-- Name: automatic_reminders_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.automatic_reminders_id_seq', 1, false);


--
-- TOC entry 7417 (class 0 OID 0)
-- Dependencies: 338
-- Name: company_info_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.company_info_id_seq', 1, false);


--
-- TOC entry 7418 (class 0 OID 0)
-- Dependencies: 333
-- Name: contract_parties_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.contract_parties_id_seq', 1, false);


--
-- TOC entry 7419 (class 0 OID 0)
-- Dependencies: 327
-- Name: contracts_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.contracts_id_seq', 1, false);


--
-- TOC entry 7420 (class 0 OID 0)
-- Dependencies: 337
-- Name: document_templates_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.document_templates_id_seq', 1, false);


--
-- TOC entry 7421 (class 0 OID 0)
-- Dependencies: 334
-- Name: documents_access_log_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.documents_access_log_id_seq', 1, false);


--
-- TOC entry 7422 (class 0 OID 0)
-- Dependencies: 326
-- Name: documents_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.documents_id_seq', 1, false);


--
-- TOC entry 7423 (class 0 OID 0)
-- Dependencies: 321
-- Name: feedbacks_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.feedbacks_id_seq', 1, false);


--
-- TOC entry 7424 (class 0 OID 0)
-- Dependencies: 335
-- Name: financial_entries_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.financial_entries_id_seq', 1, false);


--
-- TOC entry 7425 (class 0 OID 0)
-- Dependencies: 336
-- Name: folders_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.folders_id_seq', 1, false);


--
-- TOC entry 7426 (class 0 OID 0)
-- Dependencies: 392
-- Name: form_responses_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.form_responses_id_seq', 7, true);


--
-- TOC entry 7427 (class 0 OID 0)
-- Dependencies: 408
-- Name: form_submissions_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.form_submissions_id_seq', 7, true);


--
-- TOC entry 7428 (class 0 OID 0)
-- Dependencies: 388
-- Name: forms_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.forms_id_seq', 1, false);


--
-- TOC entry 7429 (class 0 OID 0)
-- Dependencies: 391
-- Name: link_forms_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.link_forms_id_seq', 6, true);


--
-- TOC entry 7430 (class 0 OID 0)
-- Dependencies: 389
-- Name: link_profiles_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.link_profiles_id_seq', 1, true);


--
-- TOC entry 7431 (class 0 OID 0)
-- Dependencies: 390
-- Name: links_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.links_id_seq', 12, true);


--
-- TOC entry 7432 (class 0 OID 0)
-- Dependencies: 339
-- Name: maintenance_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.maintenance_id_seq', 1, false);


--
-- TOC entry 7433 (class 0 OID 0)
-- Dependencies: 343
-- Name: pdf_configuration_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.pdf_configuration_id_seq', 1, false);


--
-- TOC entry 7434 (class 0 OID 0)
-- Dependencies: 345
-- Name: pdf_document_preferences_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.pdf_document_preferences_id_seq', 1, false);


--
-- TOC entry 7435 (class 0 OID 0)
-- Dependencies: 346
-- Name: pdf_logos_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.pdf_logos_id_seq', 1, false);


--
-- TOC entry 7436 (class 0 OID 0)
-- Dependencies: 347
-- Name: pdf_templates_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.pdf_templates_id_seq', 1, false);


--
-- TOC entry 7437 (class 0 OID 0)
-- Dependencies: 348
-- Name: pdf_themes_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.pdf_themes_id_seq', 1, false);


--
-- TOC entry 7438 (class 0 OID 0)
-- Dependencies: 315
-- Name: properties_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.properties_id_seq', 1, true);


--
-- TOC entry 7439 (class 0 OID 0)
-- Dependencies: 325
-- Name: property_analyses_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.property_analyses_id_seq', 1, false);


--
-- TOC entry 7440 (class 0 OID 0)
-- Dependencies: 324
-- Name: property_coordinates_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.property_coordinates_id_seq', 1, true);


--
-- TOC entry 7441 (class 0 OID 0)
-- Dependencies: 340
-- Name: property_financial_goals_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.property_financial_goals_id_seq', 1, false);


--
-- TOC entry 7442 (class 0 OID 0)
-- Dependencies: 341
-- Name: property_financial_snapshots_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.property_financial_snapshots_id_seq', 1, false);


--
-- TOC entry 7443 (class 0 OID 0)
-- Dependencies: 330
-- Name: property_history_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.property_history_id_seq', 1, false);


--
-- TOC entry 7444 (class 0 OID 0)
-- Dependencies: 331
-- Name: property_works_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.property_works_id_seq', 1, false);


--
-- TOC entry 7445 (class 0 OID 0)
-- Dependencies: 342
-- Name: rent_receipts_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.rent_receipts_id_seq', 1, false);


--
-- TOC entry 7446 (class 0 OID 0)
-- Dependencies: 328
-- Name: reports_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.reports_id_seq', 1, false);


--
-- TOC entry 7447 (class 0 OID 0)
-- Dependencies: 427
-- Name: storage_management_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.storage_management_id_seq', 21, true);


--
-- TOC entry 7448 (class 0 OID 0)
-- Dependencies: 329
-- Name: storage_transactions_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.storage_transactions_id_seq', 1, false);


--
-- TOC entry 7449 (class 0 OID 0)
-- Dependencies: 344
-- Name: storage_usage_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.storage_usage_id_seq', 1, false);


--
-- TOC entry 7450 (class 0 OID 0)
-- Dependencies: 316
-- Name: tenant_documents_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.tenant_documents_id_seq', 1, false);


--
-- TOC entry 7451 (class 0 OID 0)
-- Dependencies: 317
-- Name: tenant_history_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.tenant_history_id_seq', 1, true);


--
-- TOC entry 7452 (class 0 OID 0)
-- Dependencies: 319
-- Name: tenants_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.tenants_id_seq', 1, false);


--
-- TOC entry 7453 (class 0 OID 0)
-- Dependencies: 320
-- Name: tenants_info_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.tenants_info_id_seq', 1, false);


--
-- TOC entry 7454 (class 0 OID 0)
-- Dependencies: 323
-- Name: transaction_attachments_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.transaction_attachments_id_seq', 1, false);


--
-- TOC entry 7455 (class 0 OID 0)
-- Dependencies: 322
-- Name: transactions_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.transactions_id_seq', 1, false);


--
-- TOC entry 7456 (class 0 OID 0)
-- Dependencies: 431
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.users_id_seq', 1, false);


--
-- TOC entry 7457 (class 0 OID 0)
-- Dependencies: 349
-- Name: visits_id_seq; Type: SEQUENCE SET; Schema: client_109; Owner: postgres
--

SELECT pg_catalog.setval('client_109.visits_id_seq', 2, true);


--
-- TOC entry 7458 (class 0 OID 0)
-- Dependencies: 438
-- Name: ai_conversations_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.ai_conversations_id_seq', 1, false);


--
-- TOC entry 7459 (class 0 OID 0)
-- Dependencies: 440
-- Name: ai_messages_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.ai_messages_id_seq', 1, false);


--
-- TOC entry 7460 (class 0 OID 0)
-- Dependencies: 441
-- Name: ai_suggestions_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.ai_suggestions_id_seq', 1, false);


--
-- TOC entry 7461 (class 0 OID 0)
-- Dependencies: 445
-- Name: ai_tokens_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.ai_tokens_id_seq', 1, false);


--
-- TOC entry 7462 (class 0 OID 0)
-- Dependencies: 446
-- Name: ai_usage_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.ai_usage_id_seq', 1, false);


--
-- TOC entry 7463 (class 0 OID 0)
-- Dependencies: 442
-- Name: analysis_configs_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.analysis_configs_id_seq', 1, false);


--
-- TOC entry 7464 (class 0 OID 0)
-- Dependencies: 461
-- Name: automatic_reminders_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.automatic_reminders_id_seq', 1, false);


--
-- TOC entry 7465 (class 0 OID 0)
-- Dependencies: 467
-- Name: company_info_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.company_info_id_seq', 1, false);


--
-- TOC entry 7466 (class 0 OID 0)
-- Dependencies: 462
-- Name: contract_parties_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.contract_parties_id_seq', 1, false);


--
-- TOC entry 7467 (class 0 OID 0)
-- Dependencies: 456
-- Name: contracts_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.contracts_id_seq', 1, false);


--
-- TOC entry 7468 (class 0 OID 0)
-- Dependencies: 466
-- Name: document_templates_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.document_templates_id_seq', 1, false);


--
-- TOC entry 7469 (class 0 OID 0)
-- Dependencies: 463
-- Name: documents_access_log_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.documents_access_log_id_seq', 1, false);


--
-- TOC entry 7470 (class 0 OID 0)
-- Dependencies: 455
-- Name: documents_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.documents_id_seq', 1, false);


--
-- TOC entry 7471 (class 0 OID 0)
-- Dependencies: 449
-- Name: feedbacks_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.feedbacks_id_seq', 1, false);


--
-- TOC entry 7472 (class 0 OID 0)
-- Dependencies: 464
-- Name: financial_entries_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.financial_entries_id_seq', 1, false);


--
-- TOC entry 7473 (class 0 OID 0)
-- Dependencies: 465
-- Name: folders_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.folders_id_seq', 1, false);


--
-- TOC entry 7474 (class 0 OID 0)
-- Dependencies: 534
-- Name: form_field_options_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.form_field_options_id_seq', 1, false);


--
-- TOC entry 7475 (class 0 OID 0)
-- Dependencies: 532
-- Name: form_fields_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.form_fields_id_seq', 1, false);


--
-- TOC entry 7476 (class 0 OID 0)
-- Dependencies: 482
-- Name: form_responses_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.form_responses_id_seq', 1, false);


--
-- TOC entry 7477 (class 0 OID 0)
-- Dependencies: 448
-- Name: form_submissions_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.form_submissions_id_seq', 1, false);


--
-- TOC entry 7478 (class 0 OID 0)
-- Dependencies: 478
-- Name: forms_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.forms_id_seq', 1, false);


--
-- TOC entry 7479 (class 0 OID 0)
-- Dependencies: 481
-- Name: link_forms_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.link_forms_id_seq', 1, false);


--
-- TOC entry 7480 (class 0 OID 0)
-- Dependencies: 479
-- Name: link_profiles_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.link_profiles_id_seq', 1, false);


--
-- TOC entry 7481 (class 0 OID 0)
-- Dependencies: 480
-- Name: links_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.links_id_seq', 1, false);


--
-- TOC entry 7482 (class 0 OID 0)
-- Dependencies: 468
-- Name: maintenance_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.maintenance_id_seq', 1, false);


--
-- TOC entry 7483 (class 0 OID 0)
-- Dependencies: 472
-- Name: pdf_configuration_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.pdf_configuration_id_seq', 1, false);


--
-- TOC entry 7484 (class 0 OID 0)
-- Dependencies: 474
-- Name: pdf_document_preferences_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.pdf_document_preferences_id_seq', 1, false);


--
-- TOC entry 7485 (class 0 OID 0)
-- Dependencies: 475
-- Name: pdf_logos_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.pdf_logos_id_seq', 1, false);


--
-- TOC entry 7486 (class 0 OID 0)
-- Dependencies: 476
-- Name: pdf_templates_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.pdf_templates_id_seq', 1, false);


--
-- TOC entry 7487 (class 0 OID 0)
-- Dependencies: 477
-- Name: pdf_themes_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.pdf_themes_id_seq', 1, false);


--
-- TOC entry 7488 (class 0 OID 0)
-- Dependencies: 436
-- Name: properties_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.properties_id_seq', 1, false);


--
-- TOC entry 7489 (class 0 OID 0)
-- Dependencies: 453
-- Name: property_analyses_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.property_analyses_id_seq', 1, false);


--
-- TOC entry 7490 (class 0 OID 0)
-- Dependencies: 452
-- Name: property_coordinates_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.property_coordinates_id_seq', 1, false);


--
-- TOC entry 7491 (class 0 OID 0)
-- Dependencies: 469
-- Name: property_financial_goals_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.property_financial_goals_id_seq', 1, false);


--
-- TOC entry 7492 (class 0 OID 0)
-- Dependencies: 470
-- Name: property_financial_snapshots_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.property_financial_snapshots_id_seq', 1, false);


--
-- TOC entry 7493 (class 0 OID 0)
-- Dependencies: 459
-- Name: property_history_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.property_history_id_seq', 1, false);


--
-- TOC entry 7494 (class 0 OID 0)
-- Dependencies: 460
-- Name: property_works_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.property_works_id_seq', 1, false);


--
-- TOC entry 7495 (class 0 OID 0)
-- Dependencies: 471
-- Name: rent_receipts_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.rent_receipts_id_seq', 1, false);


--
-- TOC entry 7496 (class 0 OID 0)
-- Dependencies: 457
-- Name: reports_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.reports_id_seq', 1, false);


--
-- TOC entry 7497 (class 0 OID 0)
-- Dependencies: 454
-- Name: storage_management_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.storage_management_id_seq', 1, true);


--
-- TOC entry 7498 (class 0 OID 0)
-- Dependencies: 458
-- Name: storage_transactions_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.storage_transactions_id_seq', 1, false);


--
-- TOC entry 7499 (class 0 OID 0)
-- Dependencies: 473
-- Name: storage_usage_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.storage_usage_id_seq', 1, false);


--
-- TOC entry 7500 (class 0 OID 0)
-- Dependencies: 437
-- Name: tenant_documents_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.tenant_documents_id_seq', 1, false);


--
-- TOC entry 7501 (class 0 OID 0)
-- Dependencies: 439
-- Name: tenant_history_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.tenant_history_id_seq', 1, false);


--
-- TOC entry 7502 (class 0 OID 0)
-- Dependencies: 443
-- Name: tenants_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.tenants_id_seq', 1, false);


--
-- TOC entry 7503 (class 0 OID 0)
-- Dependencies: 447
-- Name: tenants_info_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.tenants_info_id_seq', 1, false);


--
-- TOC entry 7504 (class 0 OID 0)
-- Dependencies: 451
-- Name: transaction_attachments_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.transaction_attachments_id_seq', 1, false);


--
-- TOC entry 7505 (class 0 OID 0)
-- Dependencies: 450
-- Name: transactions_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.transactions_id_seq', 1, false);


--
-- TOC entry 7506 (class 0 OID 0)
-- Dependencies: 444
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.users_id_seq', 1, false);


--
-- TOC entry 7507 (class 0 OID 0)
-- Dependencies: 483
-- Name: visits_id_seq; Type: SEQUENCE SET; Schema: client_129; Owner: postgres
--

SELECT pg_catalog.setval('client_129.visits_id_seq', 1, false);


--
-- TOC entry 7508 (class 0 OID 0)
-- Dependencies: 229
-- Name: billing_transactions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.billing_transactions_id_seq', 2, true);


--
-- TOC entry 7509 (class 0 OID 0)
-- Dependencies: 536
-- Name: client_schemas_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.client_schemas_id_seq', 1, false);


--
-- TOC entry 7510 (class 0 OID 0)
-- Dependencies: 412
-- Name: marketplace_providers_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.marketplace_providers_id_seq', 1, false);


--
-- TOC entry 7511 (class 0 OID 0)
-- Dependencies: 231
-- Name: sessions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.sessions_id_seq', 1, false);


--
-- TOC entry 7512 (class 0 OID 0)
-- Dependencies: 242
-- Name: storage_plans_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.storage_plans_id_seq', 13, true);


--
-- TOC entry 7513 (class 0 OID 0)
-- Dependencies: 244
-- Name: storage_quotas_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.storage_quotas_id_seq', 4, true);


--
-- TOC entry 7514 (class 0 OID 0)
-- Dependencies: 227
-- Name: user_notification_settings_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.user_notification_settings_id_seq', 44, true);


--
-- TOC entry 7515 (class 0 OID 0)
-- Dependencies: 429
-- Name: user_storage_subscriptions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.user_storage_subscriptions_id_seq', 1, true);


--
-- TOC entry 7516 (class 0 OID 0)
-- Dependencies: 226
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_id_seq', 129, true);


--
-- TOC entry 7517 (class 0 OID 0)
-- Dependencies: 252
-- Name: ai_conversations_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.ai_conversations_id_seq', 2, true);


--
-- TOC entry 7518 (class 0 OID 0)
-- Dependencies: 253
-- Name: ai_messages_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.ai_messages_id_seq', 2, true);


--
-- TOC entry 7519 (class 0 OID 0)
-- Dependencies: 254
-- Name: ai_suggestions_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.ai_suggestions_id_seq', 2, true);


--
-- TOC entry 7520 (class 0 OID 0)
-- Dependencies: 414
-- Name: ai_tokens_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.ai_tokens_id_seq', 1, true);


--
-- TOC entry 7521 (class 0 OID 0)
-- Dependencies: 415
-- Name: ai_usage_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.ai_usage_id_seq', 1, false);


--
-- TOC entry 7522 (class 0 OID 0)
-- Dependencies: 255
-- Name: analysis_configs_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.analysis_configs_id_seq', 2, true);


--
-- TOC entry 7523 (class 0 OID 0)
-- Dependencies: 261
-- Name: automatic_reminders_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.automatic_reminders_id_seq', 2, true);


--
-- TOC entry 7524 (class 0 OID 0)
-- Dependencies: 313
-- Name: company_info_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.company_info_id_seq', 2, true);


--
-- TOC entry 7525 (class 0 OID 0)
-- Dependencies: 263
-- Name: contract_parties_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.contract_parties_id_seq', 2, true);


--
-- TOC entry 7526 (class 0 OID 0)
-- Dependencies: 258
-- Name: contracts_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.contracts_id_seq', 2, true);


--
-- TOC entry 7527 (class 0 OID 0)
-- Dependencies: 311
-- Name: document_templates_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.document_templates_id_seq', 2, true);


--
-- TOC entry 7528 (class 0 OID 0)
-- Dependencies: 309
-- Name: documents_access_log_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.documents_access_log_id_seq', 2, true);


--
-- TOC entry 7529 (class 0 OID 0)
-- Dependencies: 301
-- Name: documents_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.documents_id_seq', 6, true);


--
-- TOC entry 7530 (class 0 OID 0)
-- Dependencies: 236
-- Name: feedbacks_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.feedbacks_id_seq', 2, true);


--
-- TOC entry 7531 (class 0 OID 0)
-- Dependencies: 265
-- Name: financial_entries_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.financial_entries_id_seq', 2, true);


--
-- TOC entry 7532 (class 0 OID 0)
-- Dependencies: 267
-- Name: folders_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.folders_id_seq', 3, true);


--
-- TOC entry 7533 (class 0 OID 0)
-- Dependencies: 402
-- Name: form_responses_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.form_responses_id_seq', 1, false);


--
-- TOC entry 7534 (class 0 OID 0)
-- Dependencies: 410
-- Name: form_submissions_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.form_submissions_id_seq', 1, false);


--
-- TOC entry 7535 (class 0 OID 0)
-- Dependencies: 398
-- Name: forms_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.forms_id_seq', 1, false);


--
-- TOC entry 7536 (class 0 OID 0)
-- Dependencies: 401
-- Name: link_forms_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.link_forms_id_seq', 1, false);


--
-- TOC entry 7537 (class 0 OID 0)
-- Dependencies: 399
-- Name: link_profiles_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.link_profiles_id_seq', 3, true);


--
-- TOC entry 7538 (class 0 OID 0)
-- Dependencies: 400
-- Name: links_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.links_id_seq', 1, false);


--
-- TOC entry 7539 (class 0 OID 0)
-- Dependencies: 269
-- Name: maintenance_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.maintenance_id_seq', 10, true);


--
-- TOC entry 7540 (class 0 OID 0)
-- Dependencies: 277
-- Name: pdf_configuration_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.pdf_configuration_id_seq', 2, true);


--
-- TOC entry 7541 (class 0 OID 0)
-- Dependencies: 279
-- Name: pdf_document_preferences_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.pdf_document_preferences_id_seq', 2, true);


--
-- TOC entry 7542 (class 0 OID 0)
-- Dependencies: 281
-- Name: pdf_logos_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.pdf_logos_id_seq', 2, true);


--
-- TOC entry 7543 (class 0 OID 0)
-- Dependencies: 283
-- Name: pdf_templates_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.pdf_templates_id_seq', 2, true);


--
-- TOC entry 7544 (class 0 OID 0)
-- Dependencies: 285
-- Name: pdf_themes_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.pdf_themes_id_seq', 2, true);


--
-- TOC entry 7545 (class 0 OID 0)
-- Dependencies: 234
-- Name: properties_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.properties_id_seq', 11, true);


--
-- TOC entry 7546 (class 0 OID 0)
-- Dependencies: 240
-- Name: property_analyses_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.property_analyses_id_seq', 2, true);


--
-- TOC entry 7547 (class 0 OID 0)
-- Dependencies: 238
-- Name: property_coordinates_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.property_coordinates_id_seq', 9, true);


--
-- TOC entry 7548 (class 0 OID 0)
-- Dependencies: 271
-- Name: property_financial_goals_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.property_financial_goals_id_seq', 2, true);


--
-- TOC entry 7549 (class 0 OID 0)
-- Dependencies: 273
-- Name: property_financial_snapshots_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.property_financial_snapshots_id_seq', 2, true);


--
-- TOC entry 7550 (class 0 OID 0)
-- Dependencies: 305
-- Name: property_history_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.property_history_id_seq', 2, true);


--
-- TOC entry 7551 (class 0 OID 0)
-- Dependencies: 307
-- Name: property_works_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.property_works_id_seq', 2, true);


--
-- TOC entry 7552 (class 0 OID 0)
-- Dependencies: 275
-- Name: rent_receipts_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.rent_receipts_id_seq', 2, true);


--
-- TOC entry 7553 (class 0 OID 0)
-- Dependencies: 259
-- Name: reports_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.reports_id_seq', 2, true);


--
-- TOC entry 7554 (class 0 OID 0)
-- Dependencies: 425
-- Name: storage_management_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.storage_management_id_seq', 1, false);


--
-- TOC entry 7555 (class 0 OID 0)
-- Dependencies: 303
-- Name: storage_transactions_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.storage_transactions_id_seq', 2, true);


--
-- TOC entry 7556 (class 0 OID 0)
-- Dependencies: 246
-- Name: storage_usage_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.storage_usage_id_seq', 2, true);


--
-- TOC entry 7557 (class 0 OID 0)
-- Dependencies: 290
-- Name: tenant_documents_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.tenant_documents_id_seq', 2, true);


--
-- TOC entry 7558 (class 0 OID 0)
-- Dependencies: 292
-- Name: tenant_history_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.tenant_history_id_seq', 2, true);


--
-- TOC entry 7559 (class 0 OID 0)
-- Dependencies: 294
-- Name: tenants_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.tenants_id_seq', 2, true);


--
-- TOC entry 7560 (class 0 OID 0)
-- Dependencies: 295
-- Name: tenants_info_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.tenants_info_id_seq', 2, true);


--
-- TOC entry 7561 (class 0 OID 0)
-- Dependencies: 299
-- Name: transaction_attachments_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.transaction_attachments_id_seq', 2, true);


--
-- TOC entry 7562 (class 0 OID 0)
-- Dependencies: 297
-- Name: transactions_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.transactions_id_seq', 18, true);


--
-- TOC entry 7563 (class 0 OID 0)
-- Dependencies: 434
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.users_id_seq', 1, false);


--
-- TOC entry 7564 (class 0 OID 0)
-- Dependencies: 288
-- Name: visits_id_seq; Type: SEQUENCE SET; Schema: template; Owner: postgres
--

SELECT pg_catalog.setval('template.visits_id_seq', 9, true);


--
-- TOC entry 6471 (class 2606 OID 39919)
-- Name: ai_conversations ai_conversations_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_conversations
    ADD CONSTRAINT ai_conversations_pkey PRIMARY KEY (id);


--
-- TOC entry 6478 (class 2606 OID 39936)
-- Name: ai_messages ai_messages_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_messages
    ADD CONSTRAINT ai_messages_pkey PRIMARY KEY (id);


--
-- TOC entry 6483 (class 2606 OID 39963)
-- Name: ai_suggestions ai_suggestions_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_suggestions
    ADD CONSTRAINT ai_suggestions_pkey PRIMARY KEY (id);


--
-- TOC entry 6627 (class 2606 OID 43606)
-- Name: ai_tokens ai_tokens_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_tokens
    ADD CONSTRAINT ai_tokens_pkey PRIMARY KEY (id);


--
-- TOC entry 6630 (class 2606 OID 43608)
-- Name: ai_usage ai_usage_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_usage
    ADD CONSTRAINT ai_usage_pkey PRIMARY KEY (id);


--
-- TOC entry 6492 (class 2606 OID 39985)
-- Name: analysis_configs analysis_configs_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.analysis_configs
    ADD CONSTRAINT analysis_configs_pkey PRIMARY KEY (id);


--
-- TOC entry 6525 (class 2606 OID 40176)
-- Name: automatic_reminders automatic_reminders_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.automatic_reminders
    ADD CONSTRAINT automatic_reminders_pkey PRIMARY KEY (id);


--
-- TOC entry 6541 (class 2606 OID 40277)
-- Name: company_info company_info_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.company_info
    ADD CONSTRAINT company_info_pkey PRIMARY KEY (id);


--
-- TOC entry 6529 (class 2606 OID 40189)
-- Name: contract_parties contract_parties_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.contract_parties
    ADD CONSTRAINT contract_parties_pkey PRIMARY KEY (id);


--
-- TOC entry 6512 (class 2606 OID 40105)
-- Name: contracts contracts_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.contracts
    ADD CONSTRAINT contracts_pkey PRIMARY KEY (id);


--
-- TOC entry 6537 (class 2606 OID 40255)
-- Name: document_templates document_templates_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.document_templates
    ADD CONSTRAINT document_templates_pkey PRIMARY KEY (id);


--
-- TOC entry 6535 (class 2606 OID 40245)
-- Name: documents_access_log documents_access_log_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.documents_access_log
    ADD CONSTRAINT documents_access_log_pkey PRIMARY KEY (id);


--
-- TOC entry 6516 (class 2606 OID 40131)
-- Name: documents documents_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.documents
    ADD CONSTRAINT documents_pkey PRIMARY KEY (id);


--
-- TOC entry 6498 (class 2606 OID 40007)
-- Name: feedbacks feedbacks_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.feedbacks
    ADD CONSTRAINT feedbacks_pkey PRIMARY KEY (id);


--
-- TOC entry 6531 (class 2606 OID 40200)
-- Name: financial_entries financial_entries_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.financial_entries
    ADD CONSTRAINT financial_entries_pkey PRIMARY KEY (id);


--
-- TOC entry 6533 (class 2606 OID 40210)
-- Name: folders folders_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.folders
    ADD CONSTRAINT folders_pkey PRIMARY KEY (id);


--
-- TOC entry 6589 (class 2606 OID 41031)
-- Name: form_responses form_responses_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.form_responses
    ADD CONSTRAINT form_responses_pkey PRIMARY KEY (id);


--
-- TOC entry 6614 (class 2606 OID 41240)
-- Name: form_submissions form_submissions_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.form_submissions
    ADD CONSTRAINT form_submissions_pkey PRIMARY KEY (id);


--
-- TOC entry 6575 (class 2606 OID 40983)
-- Name: forms forms_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.forms
    ADD CONSTRAINT forms_pkey PRIMARY KEY (id);


--
-- TOC entry 6585 (class 2606 OID 41012)
-- Name: link_forms link_forms_link_id_form_id_key; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.link_forms
    ADD CONSTRAINT link_forms_link_id_form_id_key UNIQUE (link_id, form_id);


--
-- TOC entry 6587 (class 2606 OID 41010)
-- Name: link_forms link_forms_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.link_forms
    ADD CONSTRAINT link_forms_pkey PRIMARY KEY (id);


--
-- TOC entry 6571 (class 2606 OID 40971)
-- Name: link_profiles link_profiles_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.link_profiles
    ADD CONSTRAINT link_profiles_pkey PRIMARY KEY (id);


--
-- TOC entry 6573 (class 2606 OID 40973)
-- Name: link_profiles link_profiles_slug_key; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.link_profiles
    ADD CONSTRAINT link_profiles_slug_key UNIQUE (slug);


--
-- TOC entry 6581 (class 2606 OID 40998)
-- Name: links links_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.links
    ADD CONSTRAINT links_pkey PRIMARY KEY (id);


--
-- TOC entry 6539 (class 2606 OID 40267)
-- Name: maintenance maintenance_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.maintenance
    ADD CONSTRAINT maintenance_pkey PRIMARY KEY (id);


--
-- TOC entry 6553 (class 2606 OID 40363)
-- Name: pdf_configuration pdf_configuration_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.pdf_configuration
    ADD CONSTRAINT pdf_configuration_pkey PRIMARY KEY (id);


--
-- TOC entry 6557 (class 2606 OID 40388)
-- Name: pdf_document_preferences pdf_document_preferences_configuration_id_document_type_key; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.pdf_document_preferences
    ADD CONSTRAINT pdf_document_preferences_configuration_id_document_type_key UNIQUE (configuration_id, document_type);


--
-- TOC entry 6560 (class 2606 OID 40386)
-- Name: pdf_document_preferences pdf_document_preferences_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.pdf_document_preferences
    ADD CONSTRAINT pdf_document_preferences_pkey PRIMARY KEY (id);


--
-- TOC entry 6562 (class 2606 OID 40402)
-- Name: pdf_logos pdf_logos_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.pdf_logos
    ADD CONSTRAINT pdf_logos_pkey PRIMARY KEY (id);


--
-- TOC entry 6564 (class 2606 OID 40420)
-- Name: pdf_templates pdf_templates_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.pdf_templates
    ADD CONSTRAINT pdf_templates_pkey PRIMARY KEY (id);


--
-- TOC entry 6566 (class 2606 OID 40434)
-- Name: pdf_themes pdf_themes_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.pdf_themes
    ADD CONSTRAINT pdf_themes_pkey PRIMARY KEY (id);


--
-- TOC entry 6481 (class 2606 OID 39950)
-- Name: properties properties_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.properties
    ADD CONSTRAINT properties_pkey PRIMARY KEY (id);


--
-- TOC entry 6510 (class 2606 OID 40082)
-- Name: property_analyses property_analyses_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.property_analyses
    ADD CONSTRAINT property_analyses_pkey PRIMARY KEY (id);


--
-- TOC entry 6504 (class 2606 OID 40053)
-- Name: property_coordinates property_coordinates_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.property_coordinates
    ADD CONSTRAINT property_coordinates_pkey PRIMARY KEY (id);


--
-- TOC entry 6543 (class 2606 OID 40305)
-- Name: property_financial_goals property_financial_goals_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.property_financial_goals
    ADD CONSTRAINT property_financial_goals_pkey PRIMARY KEY (id);


--
-- TOC entry 6545 (class 2606 OID 40315)
-- Name: property_financial_snapshots property_financial_snapshots_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.property_financial_snapshots
    ADD CONSTRAINT property_financial_snapshots_pkey PRIMARY KEY (id);


--
-- TOC entry 6520 (class 2606 OID 40151)
-- Name: property_history property_history_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.property_history
    ADD CONSTRAINT property_history_pkey PRIMARY KEY (id);


--
-- TOC entry 6522 (class 2606 OID 40164)
-- Name: property_works property_works_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.property_works
    ADD CONSTRAINT property_works_pkey PRIMARY KEY (id);


--
-- TOC entry 6547 (class 2606 OID 40326)
-- Name: rent_receipts rent_receipts_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.rent_receipts
    ADD CONSTRAINT rent_receipts_pkey PRIMARY KEY (id);


--
-- TOC entry 6514 (class 2606 OID 40115)
-- Name: reports reports_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.reports
    ADD CONSTRAINT reports_pkey PRIMARY KEY (id);


--
-- TOC entry 6637 (class 2606 OID 44480)
-- Name: storage_management storage_management_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.storage_management
    ADD CONSTRAINT storage_management_pkey PRIMARY KEY (id);


--
-- TOC entry 6518 (class 2606 OID 40141)
-- Name: storage_transactions storage_transactions_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.storage_transactions
    ADD CONSTRAINT storage_transactions_pkey PRIMARY KEY (id);


--
-- TOC entry 6555 (class 2606 OID 40372)
-- Name: storage_usage storage_usage_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.storage_usage
    ADD CONSTRAINT storage_usage_pkey PRIMARY KEY (id);


--
-- TOC entry 6490 (class 2606 OID 39978)
-- Name: tenant_documents tenant_documents_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.tenant_documents
    ADD CONSTRAINT tenant_documents_pkey PRIMARY KEY (id);


--
-- TOC entry 6500 (class 2606 OID 40021)
-- Name: tenant_history tenant_history_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.tenant_history
    ADD CONSTRAINT tenant_history_pkey PRIMARY KEY (id);


--
-- TOC entry 6496 (class 2606 OID 39997)
-- Name: tenants_info tenants_info_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.tenants_info
    ADD CONSTRAINT tenants_info_pkey PRIMARY KEY (id);


--
-- TOC entry 6502 (class 2606 OID 40033)
-- Name: tenants tenants_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.tenants
    ADD CONSTRAINT tenants_pkey PRIMARY KEY (id);


--
-- TOC entry 6508 (class 2606 OID 40072)
-- Name: transaction_attachments transaction_attachments_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.transaction_attachments
    ADD CONSTRAINT transaction_attachments_pkey PRIMARY KEY (id);


--
-- TOC entry 6506 (class 2606 OID 40063)
-- Name: transactions transactions_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.transactions
    ADD CONSTRAINT transactions_pkey PRIMARY KEY (id);


--
-- TOC entry 6643 (class 2606 OID 44631)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 6568 (class 2606 OID 40484)
-- Name: visits visits_pkey; Type: CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.visits
    ADD CONSTRAINT visits_pkey PRIMARY KEY (id);


--
-- TOC entry 6684 (class 2606 OID 44865)
-- Name: ai_conversations ai_conversations_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.ai_conversations
    ADD CONSTRAINT ai_conversations_pkey PRIMARY KEY (id);


--
-- TOC entry 6681 (class 2606 OID 44846)
-- Name: ai_messages ai_messages_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.ai_messages
    ADD CONSTRAINT ai_messages_pkey PRIMARY KEY (id);


--
-- TOC entry 6652 (class 2606 OID 44752)
-- Name: ai_suggestions ai_suggestions_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.ai_suggestions
    ADD CONSTRAINT ai_suggestions_pkey PRIMARY KEY (id);


--
-- TOC entry 6670 (class 2606 OID 44814)
-- Name: ai_tokens ai_tokens_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.ai_tokens
    ADD CONSTRAINT ai_tokens_pkey PRIMARY KEY (id);


--
-- TOC entry 6675 (class 2606 OID 44828)
-- Name: ai_usage ai_usage_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.ai_usage
    ADD CONSTRAINT ai_usage_pkey PRIMARY KEY (id);


--
-- TOC entry 6661 (class 2606 OID 44774)
-- Name: analysis_configs analysis_configs_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.analysis_configs
    ADD CONSTRAINT analysis_configs_pkey PRIMARY KEY (id);


--
-- TOC entry 6719 (class 2606 OID 45052)
-- Name: automatic_reminders automatic_reminders_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.automatic_reminders
    ADD CONSTRAINT automatic_reminders_pkey PRIMARY KEY (id);


--
-- TOC entry 6735 (class 2606 OID 45127)
-- Name: company_info company_info_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.company_info
    ADD CONSTRAINT company_info_pkey PRIMARY KEY (id);


--
-- TOC entry 6723 (class 2606 OID 45065)
-- Name: contract_parties contract_parties_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.contract_parties
    ADD CONSTRAINT contract_parties_pkey PRIMARY KEY (id);


--
-- TOC entry 6706 (class 2606 OID 44981)
-- Name: contracts contracts_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.contracts
    ADD CONSTRAINT contracts_pkey PRIMARY KEY (id);


--
-- TOC entry 6731 (class 2606 OID 45105)
-- Name: document_templates document_templates_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.document_templates
    ADD CONSTRAINT document_templates_pkey PRIMARY KEY (id);


--
-- TOC entry 6729 (class 2606 OID 45095)
-- Name: documents_access_log documents_access_log_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.documents_access_log
    ADD CONSTRAINT documents_access_log_pkey PRIMARY KEY (id);


--
-- TOC entry 6710 (class 2606 OID 45007)
-- Name: documents documents_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.documents
    ADD CONSTRAINT documents_pkey PRIMARY KEY (id);


--
-- TOC entry 6690 (class 2606 OID 44887)
-- Name: feedbacks feedbacks_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.feedbacks
    ADD CONSTRAINT feedbacks_pkey PRIMARY KEY (id);


--
-- TOC entry 6725 (class 2606 OID 45076)
-- Name: financial_entries financial_entries_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.financial_entries
    ADD CONSTRAINT financial_entries_pkey PRIMARY KEY (id);


--
-- TOC entry 6727 (class 2606 OID 45086)
-- Name: folders folders_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.folders
    ADD CONSTRAINT folders_pkey PRIMARY KEY (id);


--
-- TOC entry 6787 (class 2606 OID 45392)
-- Name: form_field_options form_field_options_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.form_field_options
    ADD CONSTRAINT form_field_options_pkey PRIMARY KEY (id);


--
-- TOC entry 6785 (class 2606 OID 45383)
-- Name: form_fields form_fields_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.form_fields
    ADD CONSTRAINT form_fields_pkey PRIMARY KEY (id);


--
-- TOC entry 6781 (class 2606 OID 45343)
-- Name: form_responses form_responses_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.form_responses
    ADD CONSTRAINT form_responses_pkey PRIMARY KEY (id);


--
-- TOC entry 6771 (class 2606 OID 45322)
-- Name: forms forms_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.forms
    ADD CONSTRAINT forms_pkey PRIMARY KEY (id);


--
-- TOC entry 6775 (class 2606 OID 45332)
-- Name: link_forms link_forms_link_id_form_id_key; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.link_forms
    ADD CONSTRAINT link_forms_link_id_form_id_key UNIQUE (link_id, form_id);


--
-- TOC entry 6778 (class 2606 OID 45330)
-- Name: link_forms link_forms_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.link_forms
    ADD CONSTRAINT link_forms_pkey PRIMARY KEY (id);


--
-- TOC entry 6766 (class 2606 OID 45309)
-- Name: link_profiles link_profiles_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.link_profiles
    ADD CONSTRAINT link_profiles_pkey PRIMARY KEY (id);


--
-- TOC entry 6768 (class 2606 OID 45311)
-- Name: link_profiles link_profiles_slug_key; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.link_profiles
    ADD CONSTRAINT link_profiles_slug_key UNIQUE (slug);


--
-- TOC entry 6762 (class 2606 OID 45282)
-- Name: links links_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.links
    ADD CONSTRAINT links_pkey PRIMARY KEY (id);


--
-- TOC entry 6733 (class 2606 OID 45117)
-- Name: maintenance maintenance_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.maintenance
    ADD CONSTRAINT maintenance_pkey PRIMARY KEY (id);


--
-- TOC entry 6747 (class 2606 OID 45196)
-- Name: pdf_configuration pdf_configuration_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.pdf_configuration
    ADD CONSTRAINT pdf_configuration_pkey PRIMARY KEY (id);


--
-- TOC entry 6751 (class 2606 OID 45221)
-- Name: pdf_document_preferences pdf_document_preferences_configuration_id_document_type_key; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.pdf_document_preferences
    ADD CONSTRAINT pdf_document_preferences_configuration_id_document_type_key UNIQUE (configuration_id, document_type);


--
-- TOC entry 6754 (class 2606 OID 45219)
-- Name: pdf_document_preferences pdf_document_preferences_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.pdf_document_preferences
    ADD CONSTRAINT pdf_document_preferences_pkey PRIMARY KEY (id);


--
-- TOC entry 6756 (class 2606 OID 45235)
-- Name: pdf_logos pdf_logos_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.pdf_logos
    ADD CONSTRAINT pdf_logos_pkey PRIMARY KEY (id);


--
-- TOC entry 6758 (class 2606 OID 45253)
-- Name: pdf_templates pdf_templates_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.pdf_templates
    ADD CONSTRAINT pdf_templates_pkey PRIMARY KEY (id);


--
-- TOC entry 6760 (class 2606 OID 45267)
-- Name: pdf_themes pdf_themes_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.pdf_themes
    ADD CONSTRAINT pdf_themes_pkey PRIMARY KEY (id);


--
-- TOC entry 6650 (class 2606 OID 44739)
-- Name: properties properties_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.properties
    ADD CONSTRAINT properties_pkey PRIMARY KEY (id);


--
-- TOC entry 6702 (class 2606 OID 44952)
-- Name: property_analyses property_analyses_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.property_analyses
    ADD CONSTRAINT property_analyses_pkey PRIMARY KEY (id);


--
-- TOC entry 6696 (class 2606 OID 44923)
-- Name: property_coordinates property_coordinates_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.property_coordinates
    ADD CONSTRAINT property_coordinates_pkey PRIMARY KEY (id);


--
-- TOC entry 6737 (class 2606 OID 45138)
-- Name: property_financial_goals property_financial_goals_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.property_financial_goals
    ADD CONSTRAINT property_financial_goals_pkey PRIMARY KEY (id);


--
-- TOC entry 6739 (class 2606 OID 45148)
-- Name: property_financial_snapshots property_financial_snapshots_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.property_financial_snapshots
    ADD CONSTRAINT property_financial_snapshots_pkey PRIMARY KEY (id);


--
-- TOC entry 6714 (class 2606 OID 45027)
-- Name: property_history property_history_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.property_history
    ADD CONSTRAINT property_history_pkey PRIMARY KEY (id);


--
-- TOC entry 6716 (class 2606 OID 45040)
-- Name: property_works property_works_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.property_works
    ADD CONSTRAINT property_works_pkey PRIMARY KEY (id);


--
-- TOC entry 6741 (class 2606 OID 45159)
-- Name: rent_receipts rent_receipts_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.rent_receipts
    ADD CONSTRAINT rent_receipts_pkey PRIMARY KEY (id);


--
-- TOC entry 6708 (class 2606 OID 44991)
-- Name: reports reports_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.reports
    ADD CONSTRAINT reports_pkey PRIMARY KEY (id);


--
-- TOC entry 6704 (class 2606 OID 44966)
-- Name: storage_management storage_management_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.storage_management
    ADD CONSTRAINT storage_management_pkey PRIMARY KEY (id);


--
-- TOC entry 6712 (class 2606 OID 45017)
-- Name: storage_transactions storage_transactions_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.storage_transactions
    ADD CONSTRAINT storage_transactions_pkey PRIMARY KEY (id);


--
-- TOC entry 6749 (class 2606 OID 45205)
-- Name: storage_usage storage_usage_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.storage_usage
    ADD CONSTRAINT storage_usage_pkey PRIMARY KEY (id);


--
-- TOC entry 6659 (class 2606 OID 44767)
-- Name: tenant_documents tenant_documents_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.tenant_documents
    ADD CONSTRAINT tenant_documents_pkey PRIMARY KEY (id);


--
-- TOC entry 6692 (class 2606 OID 44901)
-- Name: tenant_history tenant_history_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.tenant_history
    ADD CONSTRAINT tenant_history_pkey PRIMARY KEY (id);


--
-- TOC entry 6688 (class 2606 OID 44877)
-- Name: tenants_info tenants_info_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.tenants_info
    ADD CONSTRAINT tenants_info_pkey PRIMARY KEY (id);


--
-- TOC entry 6694 (class 2606 OID 44913)
-- Name: tenants tenants_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.tenants
    ADD CONSTRAINT tenants_pkey PRIMARY KEY (id);


--
-- TOC entry 6700 (class 2606 OID 44942)
-- Name: transaction_attachments transaction_attachments_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.transaction_attachments
    ADD CONSTRAINT transaction_attachments_pkey PRIMARY KEY (id);


--
-- TOC entry 6698 (class 2606 OID 44933)
-- Name: transactions transactions_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.transactions
    ADD CONSTRAINT transactions_pkey PRIMARY KEY (id);


--
-- TOC entry 6665 (class 2606 OID 44794)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 6668 (class 2606 OID 44792)
-- Name: users users_public_user_id_key; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.users
    ADD CONSTRAINT users_public_user_id_key UNIQUE (public_user_id);


--
-- TOC entry 6783 (class 2606 OID 45359)
-- Name: visits visits_pkey; Type: CONSTRAINT; Schema: client_129; Owner: postgres
--

ALTER TABLE ONLY client_129.visits
    ADD CONSTRAINT visits_pkey PRIMARY KEY (id);


--
-- TOC entry 6355 (class 2606 OID 18456)
-- Name: billing_transactions billing_transactions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.billing_transactions
    ADD CONSTRAINT billing_transactions_pkey PRIMARY KEY (id);


--
-- TOC entry 6789 (class 2606 OID 45408)
-- Name: client_schemas client_schemas_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.client_schemas
    ADD CONSTRAINT client_schemas_pkey PRIMARY KEY (id);


--
-- TOC entry 6791 (class 2606 OID 45410)
-- Name: client_schemas client_schemas_schema_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.client_schemas
    ADD CONSTRAINT client_schemas_schema_name_key UNIQUE (schema_name);


--
-- TOC entry 6617 (class 2606 OID 41372)
-- Name: marketplace_providers marketplace_providers_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.marketplace_providers
    ADD CONSTRAINT marketplace_providers_pkey PRIMARY KEY (id);


--
-- TOC entry 6366 (class 2606 OID 27062)
-- Name: schema_mapping schema_mapping_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.schema_mapping
    ADD CONSTRAINT schema_mapping_pkey PRIMARY KEY (schema_name);


--
-- TOC entry 6362 (class 2606 OID 18586)
-- Name: sessions sessions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sessions
    ADD CONSTRAINT sessions_pkey PRIMARY KEY (id);


--
-- TOC entry 6364 (class 2606 OID 18588)
-- Name: sessions sessions_session_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sessions
    ADD CONSTRAINT sessions_session_id_key UNIQUE (session_id);


--
-- TOC entry 6376 (class 2606 OID 27737)
-- Name: storage_plans storage_plans_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.storage_plans
    ADD CONSTRAINT storage_plans_pkey PRIMARY KEY (id);


--
-- TOC entry 6378 (class 2606 OID 27748)
-- Name: storage_quotas storage_quotas_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.storage_quotas
    ADD CONSTRAINT storage_quotas_pkey PRIMARY KEY (id);


--
-- TOC entry 6639 (class 2606 OID 44574)
-- Name: user_storage_subscriptions unique_user_active_subscription; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_storage_subscriptions
    ADD CONSTRAINT unique_user_active_subscription UNIQUE (user_id, is_active);


--
-- TOC entry 6353 (class 2606 OID 17828)
-- Name: user_notification_settings user_notification_settings_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_notification_settings
    ADD CONSTRAINT user_notification_settings_pkey PRIMARY KEY (id);


--
-- TOC entry 6641 (class 2606 OID 44572)
-- Name: user_storage_subscriptions user_storage_subscriptions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_storage_subscriptions
    ADD CONSTRAINT user_storage_subscriptions_pkey PRIMARY KEY (id);


--
-- TOC entry 6348 (class 2606 OID 16868)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 6382 (class 2606 OID 27895)
-- Name: ai_conversations ai_conversations_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.ai_conversations
    ADD CONSTRAINT ai_conversations_pkey PRIMARY KEY (id);


--
-- TOC entry 6389 (class 2606 OID 27912)
-- Name: ai_messages ai_messages_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.ai_messages
    ADD CONSTRAINT ai_messages_pkey PRIMARY KEY (id);


--
-- TOC entry 6392 (class 2606 OID 27929)
-- Name: ai_suggestions ai_suggestions_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.ai_suggestions
    ADD CONSTRAINT ai_suggestions_pkey PRIMARY KEY (id);


--
-- TOC entry 6619 (class 2606 OID 43560)
-- Name: ai_tokens ai_tokens_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.ai_tokens
    ADD CONSTRAINT ai_tokens_pkey PRIMARY KEY (id);


--
-- TOC entry 6622 (class 2606 OID 43562)
-- Name: ai_usage ai_usage_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.ai_usage
    ADD CONSTRAINT ai_usage_pkey PRIMARY KEY (id);


--
-- TOC entry 6399 (class 2606 OID 27941)
-- Name: analysis_configs analysis_configs_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.analysis_configs
    ADD CONSTRAINT analysis_configs_pkey PRIMARY KEY (id);


--
-- TOC entry 6408 (class 2606 OID 28150)
-- Name: automatic_reminders automatic_reminders_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.automatic_reminders
    ADD CONSTRAINT automatic_reminders_pkey PRIMARY KEY (id);


--
-- TOC entry 6469 (class 2606 OID 32552)
-- Name: company_info company_info_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.company_info
    ADD CONSTRAINT company_info_pkey PRIMARY KEY (id);


--
-- TOC entry 6412 (class 2606 OID 28165)
-- Name: contract_parties contract_parties_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.contract_parties
    ADD CONSTRAINT contract_parties_pkey PRIMARY KEY (id);


--
-- TOC entry 6403 (class 2606 OID 28082)
-- Name: contracts contracts_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.contracts
    ADD CONSTRAINT contracts_pkey PRIMARY KEY (id);


--
-- TOC entry 6467 (class 2606 OID 32541)
-- Name: document_templates document_templates_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.document_templates
    ADD CONSTRAINT document_templates_pkey PRIMARY KEY (id);


--
-- TOC entry 6465 (class 2606 OID 32530)
-- Name: documents_access_log documents_access_log_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.documents_access_log
    ADD CONSTRAINT documents_access_log_pkey PRIMARY KEY (id);


--
-- TOC entry 6457 (class 2606 OID 30454)
-- Name: documents documents_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.documents
    ADD CONSTRAINT documents_pkey PRIMARY KEY (id);


--
-- TOC entry 6370 (class 2606 OID 27446)
-- Name: feedbacks feedbacks_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.feedbacks
    ADD CONSTRAINT feedbacks_pkey PRIMARY KEY (id);


--
-- TOC entry 6414 (class 2606 OID 28178)
-- Name: financial_entries financial_entries_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.financial_entries
    ADD CONSTRAINT financial_entries_pkey PRIMARY KEY (id);


--
-- TOC entry 6416 (class 2606 OID 28190)
-- Name: folders folders_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.folders
    ADD CONSTRAINT folders_pkey PRIMARY KEY (id);


--
-- TOC entry 6611 (class 2606 OID 41136)
-- Name: form_responses form_responses_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.form_responses
    ADD CONSTRAINT form_responses_pkey PRIMARY KEY (id);


--
-- TOC entry 6598 (class 2606 OID 41088)
-- Name: forms forms_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.forms
    ADD CONSTRAINT forms_pkey PRIMARY KEY (id);


--
-- TOC entry 6607 (class 2606 OID 41117)
-- Name: link_forms link_forms_link_id_form_id_key; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.link_forms
    ADD CONSTRAINT link_forms_link_id_form_id_key UNIQUE (link_id, form_id);


--
-- TOC entry 6609 (class 2606 OID 41115)
-- Name: link_forms link_forms_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.link_forms
    ADD CONSTRAINT link_forms_pkey PRIMARY KEY (id);


--
-- TOC entry 6594 (class 2606 OID 41076)
-- Name: link_profiles link_profiles_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.link_profiles
    ADD CONSTRAINT link_profiles_pkey PRIMARY KEY (id);


--
-- TOC entry 6596 (class 2606 OID 41078)
-- Name: link_profiles link_profiles_slug_key; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.link_profiles
    ADD CONSTRAINT link_profiles_slug_key UNIQUE (slug);


--
-- TOC entry 6603 (class 2606 OID 41103)
-- Name: links links_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.links
    ADD CONSTRAINT links_pkey PRIMARY KEY (id);


--
-- TOC entry 6418 (class 2606 OID 28252)
-- Name: maintenance maintenance_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.maintenance
    ADD CONSTRAINT maintenance_pkey PRIMARY KEY (id);


--
-- TOC entry 6430 (class 2606 OID 28341)
-- Name: pdf_configuration pdf_configuration_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.pdf_configuration
    ADD CONSTRAINT pdf_configuration_pkey PRIMARY KEY (id);


--
-- TOC entry 6432 (class 2606 OID 28359)
-- Name: pdf_document_preferences pdf_document_preferences_configuration_id_document_type_key; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.pdf_document_preferences
    ADD CONSTRAINT pdf_document_preferences_configuration_id_document_type_key UNIQUE (configuration_id, document_type);


--
-- TOC entry 6435 (class 2606 OID 28357)
-- Name: pdf_document_preferences pdf_document_preferences_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.pdf_document_preferences
    ADD CONSTRAINT pdf_document_preferences_pkey PRIMARY KEY (id);


--
-- TOC entry 6437 (class 2606 OID 28375)
-- Name: pdf_logos pdf_logos_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.pdf_logos
    ADD CONSTRAINT pdf_logos_pkey PRIMARY KEY (id);


--
-- TOC entry 6439 (class 2606 OID 28395)
-- Name: pdf_templates pdf_templates_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.pdf_templates
    ADD CONSTRAINT pdf_templates_pkey PRIMARY KEY (id);


--
-- TOC entry 6441 (class 2606 OID 28411)
-- Name: pdf_themes pdf_themes_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.pdf_themes
    ADD CONSTRAINT pdf_themes_pkey PRIMARY KEY (id);


--
-- TOC entry 6368 (class 2606 OID 27274)
-- Name: properties properties_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.properties
    ADD CONSTRAINT properties_pkey PRIMARY KEY (id);


--
-- TOC entry 6374 (class 2606 OID 27574)
-- Name: property_analyses property_analyses_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.property_analyses
    ADD CONSTRAINT property_analyses_pkey PRIMARY KEY (id);


--
-- TOC entry 6372 (class 2606 OID 27558)
-- Name: property_coordinates property_coordinates_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.property_coordinates
    ADD CONSTRAINT property_coordinates_pkey PRIMARY KEY (id);


--
-- TOC entry 6420 (class 2606 OID 28265)
-- Name: property_financial_goals property_financial_goals_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.property_financial_goals
    ADD CONSTRAINT property_financial_goals_pkey PRIMARY KEY (id);


--
-- TOC entry 6422 (class 2606 OID 28277)
-- Name: property_financial_snapshots property_financial_snapshots_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.property_financial_snapshots
    ADD CONSTRAINT property_financial_snapshots_pkey PRIMARY KEY (id);


--
-- TOC entry 6461 (class 2606 OID 32479)
-- Name: property_history property_history_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.property_history
    ADD CONSTRAINT property_history_pkey PRIMARY KEY (id);


--
-- TOC entry 6463 (class 2606 OID 32493)
-- Name: property_works property_works_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.property_works
    ADD CONSTRAINT property_works_pkey PRIMARY KEY (id);


--
-- TOC entry 6424 (class 2606 OID 28290)
-- Name: rent_receipts rent_receipts_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.rent_receipts
    ADD CONSTRAINT rent_receipts_pkey PRIMARY KEY (id);


--
-- TOC entry 6405 (class 2606 OID 28092)
-- Name: reports reports_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.reports
    ADD CONSTRAINT reports_pkey PRIMARY KEY (id);


--
-- TOC entry 6635 (class 2606 OID 44461)
-- Name: storage_management storage_management_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.storage_management
    ADD CONSTRAINT storage_management_pkey PRIMARY KEY (id);


--
-- TOC entry 6459 (class 2606 OID 32457)
-- Name: storage_transactions storage_transactions_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.storage_transactions
    ADD CONSTRAINT storage_transactions_pkey PRIMARY KEY (id);


--
-- TOC entry 6380 (class 2606 OID 27758)
-- Name: storage_usage storage_usage_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.storage_usage
    ADD CONSTRAINT storage_usage_pkey PRIMARY KEY (id);


--
-- TOC entry 6445 (class 2606 OID 30118)
-- Name: tenant_documents tenant_documents_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.tenant_documents
    ADD CONSTRAINT tenant_documents_pkey PRIMARY KEY (id);


--
-- TOC entry 6447 (class 2606 OID 30120)
-- Name: tenant_history tenant_history_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.tenant_history
    ADD CONSTRAINT tenant_history_pkey PRIMARY KEY (id);


--
-- TOC entry 6451 (class 2606 OID 30302)
-- Name: tenants_info tenants_info_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.tenants_info
    ADD CONSTRAINT tenants_info_pkey PRIMARY KEY (id);


--
-- TOC entry 6449 (class 2606 OID 30122)
-- Name: tenants tenants_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.tenants
    ADD CONSTRAINT tenants_pkey PRIMARY KEY (id);


--
-- TOC entry 6455 (class 2606 OID 30405)
-- Name: transaction_attachments transaction_attachments_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.transaction_attachments
    ADD CONSTRAINT transaction_attachments_pkey PRIMARY KEY (id);


--
-- TOC entry 6453 (class 2606 OID 30395)
-- Name: transactions transactions_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.transactions
    ADD CONSTRAINT transactions_pkey PRIMARY KEY (id);


--
-- TOC entry 6646 (class 2606 OID 44676)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 6648 (class 2606 OID 44674)
-- Name: users users_public_user_id_unique; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.users
    ADD CONSTRAINT users_public_user_id_unique UNIQUE (public_user_id);


--
-- TOC entry 6443 (class 2606 OID 29349)
-- Name: visits visits_pkey; Type: CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.visits
    ADD CONSTRAINT visits_pkey PRIMARY KEY (id);


--
-- TOC entry 6472 (class 1259 OID 39920)
-- Name: ai_conversations_user_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX ai_conversations_user_id_idx ON client_109.ai_conversations USING btree (user_id);


--
-- TOC entry 6473 (class 1259 OID 39921)
-- Name: ai_conversations_user_id_idx1; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX ai_conversations_user_id_idx1 ON client_109.ai_conversations USING btree (user_id);


--
-- TOC entry 6474 (class 1259 OID 39938)
-- Name: ai_messages_conversation_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX ai_messages_conversation_id_idx ON client_109.ai_messages USING btree (conversation_id);


--
-- TOC entry 6475 (class 1259 OID 39940)
-- Name: ai_messages_conversation_id_idx1; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX ai_messages_conversation_id_idx1 ON client_109.ai_messages USING btree (conversation_id);


--
-- TOC entry 6476 (class 1259 OID 39939)
-- Name: ai_messages_created_at_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX ai_messages_created_at_idx ON client_109.ai_messages USING btree (created_at);


--
-- TOC entry 6479 (class 1259 OID 39937)
-- Name: ai_messages_user_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX ai_messages_user_id_idx ON client_109.ai_messages USING btree (user_id);


--
-- TOC entry 6484 (class 1259 OID 39965)
-- Name: ai_suggestions_property_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX ai_suggestions_property_id_idx ON client_109.ai_suggestions USING btree (property_id);


--
-- TOC entry 6485 (class 1259 OID 39968)
-- Name: ai_suggestions_property_id_idx1; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX ai_suggestions_property_id_idx1 ON client_109.ai_suggestions USING btree (property_id);


--
-- TOC entry 6486 (class 1259 OID 39966)
-- Name: ai_suggestions_type_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX ai_suggestions_type_idx ON client_109.ai_suggestions USING btree (type);


--
-- TOC entry 6487 (class 1259 OID 39964)
-- Name: ai_suggestions_user_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX ai_suggestions_user_id_idx ON client_109.ai_suggestions USING btree (user_id);


--
-- TOC entry 6488 (class 1259 OID 39967)
-- Name: ai_suggestions_user_id_idx1; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX ai_suggestions_user_id_idx1 ON client_109.ai_suggestions USING btree (user_id);


--
-- TOC entry 6493 (class 1259 OID 39986)
-- Name: analysis_configs_property_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX analysis_configs_property_id_idx ON client_109.analysis_configs USING btree (property_id);


--
-- TOC entry 6494 (class 1259 OID 39987)
-- Name: analysis_configs_user_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX analysis_configs_user_id_idx ON client_109.analysis_configs USING btree (user_id);


--
-- TOC entry 6523 (class 1259 OID 40178)
-- Name: automatic_reminders_next_trigger_date_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX automatic_reminders_next_trigger_date_idx ON client_109.automatic_reminders USING btree (next_trigger_date);


--
-- TOC entry 6526 (class 1259 OID 40179)
-- Name: automatic_reminders_status_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX automatic_reminders_status_idx ON client_109.automatic_reminders USING btree (status);


--
-- TOC entry 6527 (class 1259 OID 40177)
-- Name: automatic_reminders_user_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX automatic_reminders_user_id_idx ON client_109.automatic_reminders USING btree (user_id);


--
-- TOC entry 6628 (class 1259 OID 43633)
-- Name: idx_ai_tokens_user_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_ai_tokens_user_id ON client_109.ai_tokens USING btree (user_id);


--
-- TOC entry 6631 (class 1259 OID 43636)
-- Name: idx_ai_usage_conversation_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_ai_usage_conversation_id ON client_109.ai_usage USING btree (conversation_id);


--
-- TOC entry 6632 (class 1259 OID 43635)
-- Name: idx_ai_usage_message_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_ai_usage_message_id ON client_109.ai_usage USING btree (message_id);


--
-- TOC entry 6633 (class 1259 OID 43634)
-- Name: idx_ai_usage_user_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_ai_usage_user_id ON client_109.ai_usage USING btree (user_id);


--
-- TOC entry 6590 (class 1259 OID 41192)
-- Name: idx_client_109_form_responses_form_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_client_109_form_responses_form_id ON client_109.form_responses USING btree (form_id);


--
-- TOC entry 6576 (class 1259 OID 41191)
-- Name: idx_client_109_forms_user_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_client_109_forms_user_id ON client_109.forms USING btree (user_id);


--
-- TOC entry 6591 (class 1259 OID 41040)
-- Name: idx_form_responses_form_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_form_responses_form_id ON client_109.form_responses USING btree (form_id);


--
-- TOC entry 6577 (class 1259 OID 41039)
-- Name: idx_forms_user_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_forms_user_id ON client_109.forms USING btree (user_id);


--
-- TOC entry 6582 (class 1259 OID 41042)
-- Name: idx_link_forms_form_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_link_forms_form_id ON client_109.link_forms USING btree (form_id);


--
-- TOC entry 6583 (class 1259 OID 41041)
-- Name: idx_link_forms_link_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_link_forms_link_id ON client_109.link_forms USING btree (link_id);


--
-- TOC entry 6569 (class 1259 OID 41172)
-- Name: idx_link_profiles_user_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_link_profiles_user_id ON client_109.link_profiles USING btree (user_id);


--
-- TOC entry 6578 (class 1259 OID 41037)
-- Name: idx_links_profile_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_links_profile_id ON client_109.links USING btree (profile_id);


--
-- TOC entry 6579 (class 1259 OID 41038)
-- Name: idx_links_user_id; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX idx_links_user_id ON client_109.links USING btree (user_id);


--
-- TOC entry 6558 (class 1259 OID 40389)
-- Name: pdf_document_preferences_configuration_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX pdf_document_preferences_configuration_id_idx ON client_109.pdf_document_preferences USING btree (configuration_id);


--
-- TOC entry 6548 (class 1259 OID 40328)
-- Name: rent_receipts_property_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX rent_receipts_property_id_idx ON client_109.rent_receipts USING btree (property_id);


--
-- TOC entry 6549 (class 1259 OID 40330)
-- Name: rent_receipts_status_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX rent_receipts_status_idx ON client_109.rent_receipts USING btree (status);


--
-- TOC entry 6550 (class 1259 OID 40327)
-- Name: rent_receipts_tenant_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX rent_receipts_tenant_id_idx ON client_109.rent_receipts USING btree (tenant_id);


--
-- TOC entry 6551 (class 1259 OID 40329)
-- Name: rent_receipts_transaction_id_idx; Type: INDEX; Schema: client_109; Owner: postgres
--

CREATE INDEX rent_receipts_transaction_id_idx ON client_109.rent_receipts USING btree (transaction_id);


--
-- TOC entry 6685 (class 1259 OID 44866)
-- Name: ai_conversations_user_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_conversations_user_id_idx ON client_129.ai_conversations USING btree (user_id);


--
-- TOC entry 6686 (class 1259 OID 44867)
-- Name: ai_conversations_user_id_idx1; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_conversations_user_id_idx1 ON client_129.ai_conversations USING btree (user_id);


--
-- TOC entry 6677 (class 1259 OID 44848)
-- Name: ai_messages_conversation_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_messages_conversation_id_idx ON client_129.ai_messages USING btree (conversation_id);


--
-- TOC entry 6678 (class 1259 OID 44850)
-- Name: ai_messages_conversation_id_idx1; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_messages_conversation_id_idx1 ON client_129.ai_messages USING btree (conversation_id);


--
-- TOC entry 6679 (class 1259 OID 44849)
-- Name: ai_messages_created_at_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_messages_created_at_idx ON client_129.ai_messages USING btree (created_at);


--
-- TOC entry 6682 (class 1259 OID 44847)
-- Name: ai_messages_user_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_messages_user_id_idx ON client_129.ai_messages USING btree (user_id);


--
-- TOC entry 6653 (class 1259 OID 44754)
-- Name: ai_suggestions_property_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_suggestions_property_id_idx ON client_129.ai_suggestions USING btree (property_id);


--
-- TOC entry 6654 (class 1259 OID 44757)
-- Name: ai_suggestions_property_id_idx1; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_suggestions_property_id_idx1 ON client_129.ai_suggestions USING btree (property_id);


--
-- TOC entry 6655 (class 1259 OID 44755)
-- Name: ai_suggestions_type_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_suggestions_type_idx ON client_129.ai_suggestions USING btree (type);


--
-- TOC entry 6656 (class 1259 OID 44753)
-- Name: ai_suggestions_user_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_suggestions_user_id_idx ON client_129.ai_suggestions USING btree (user_id);


--
-- TOC entry 6657 (class 1259 OID 44756)
-- Name: ai_suggestions_user_id_idx1; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_suggestions_user_id_idx1 ON client_129.ai_suggestions USING btree (user_id);


--
-- TOC entry 6671 (class 1259 OID 44815)
-- Name: ai_tokens_user_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_tokens_user_id_idx ON client_129.ai_tokens USING btree (user_id);


--
-- TOC entry 6672 (class 1259 OID 44831)
-- Name: ai_usage_conversation_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_usage_conversation_id_idx ON client_129.ai_usage USING btree (conversation_id);


--
-- TOC entry 6673 (class 1259 OID 44830)
-- Name: ai_usage_message_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_usage_message_id_idx ON client_129.ai_usage USING btree (message_id);


--
-- TOC entry 6676 (class 1259 OID 44829)
-- Name: ai_usage_user_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX ai_usage_user_id_idx ON client_129.ai_usage USING btree (user_id);


--
-- TOC entry 6662 (class 1259 OID 44775)
-- Name: analysis_configs_property_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX analysis_configs_property_id_idx ON client_129.analysis_configs USING btree (property_id);


--
-- TOC entry 6663 (class 1259 OID 44776)
-- Name: analysis_configs_user_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX analysis_configs_user_id_idx ON client_129.analysis_configs USING btree (user_id);


--
-- TOC entry 6717 (class 1259 OID 45054)
-- Name: automatic_reminders_next_trigger_date_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX automatic_reminders_next_trigger_date_idx ON client_129.automatic_reminders USING btree (next_trigger_date);


--
-- TOC entry 6720 (class 1259 OID 45055)
-- Name: automatic_reminders_status_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX automatic_reminders_status_idx ON client_129.automatic_reminders USING btree (status);


--
-- TOC entry 6721 (class 1259 OID 45053)
-- Name: automatic_reminders_user_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX automatic_reminders_user_id_idx ON client_129.automatic_reminders USING btree (user_id);


--
-- TOC entry 6779 (class 1259 OID 45344)
-- Name: form_responses_form_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX form_responses_form_id_idx ON client_129.form_responses USING btree (form_id);


--
-- TOC entry 6772 (class 1259 OID 45323)
-- Name: forms_user_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX forms_user_id_idx ON client_129.forms USING btree (user_id);


--
-- TOC entry 6773 (class 1259 OID 45334)
-- Name: link_forms_form_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX link_forms_form_id_idx ON client_129.link_forms USING btree (form_id);


--
-- TOC entry 6776 (class 1259 OID 45333)
-- Name: link_forms_link_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX link_forms_link_id_idx ON client_129.link_forms USING btree (link_id);


--
-- TOC entry 6769 (class 1259 OID 45312)
-- Name: link_profiles_user_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX link_profiles_user_id_idx ON client_129.link_profiles USING btree (user_id);


--
-- TOC entry 6763 (class 1259 OID 45283)
-- Name: links_profile_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX links_profile_id_idx ON client_129.links USING btree (profile_id);


--
-- TOC entry 6764 (class 1259 OID 45284)
-- Name: links_user_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX links_user_id_idx ON client_129.links USING btree (user_id);


--
-- TOC entry 6752 (class 1259 OID 45222)
-- Name: pdf_document_preferences_configuration_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX pdf_document_preferences_configuration_id_idx ON client_129.pdf_document_preferences USING btree (configuration_id);


--
-- TOC entry 6742 (class 1259 OID 45161)
-- Name: rent_receipts_property_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX rent_receipts_property_id_idx ON client_129.rent_receipts USING btree (property_id);


--
-- TOC entry 6743 (class 1259 OID 45163)
-- Name: rent_receipts_status_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX rent_receipts_status_idx ON client_129.rent_receipts USING btree (status);


--
-- TOC entry 6744 (class 1259 OID 45160)
-- Name: rent_receipts_tenant_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX rent_receipts_tenant_id_idx ON client_129.rent_receipts USING btree (tenant_id);


--
-- TOC entry 6745 (class 1259 OID 45162)
-- Name: rent_receipts_transaction_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX rent_receipts_transaction_id_idx ON client_129.rent_receipts USING btree (transaction_id);


--
-- TOC entry 6666 (class 1259 OID 44790)
-- Name: users_public_user_id_idx; Type: INDEX; Schema: client_129; Owner: postgres
--

CREATE INDEX users_public_user_id_idx ON client_129.users USING btree (public_user_id);


--
-- TOC entry 6356 (class 1259 OID 18463)
-- Name: idx_billing_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_billing_status ON public.billing_transactions USING btree (status);


--
-- TOC entry 6357 (class 1259 OID 18462)
-- Name: idx_billing_user_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_billing_user_id ON public.billing_transactions USING btree (user_id);


--
-- TOC entry 6615 (class 1259 OID 41498)
-- Name: idx_providers_category; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_providers_category ON public.marketplace_providers USING btree (category);


--
-- TOC entry 6358 (class 1259 OID 18601)
-- Name: idx_sessions_expires_at; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_sessions_expires_at ON public.sessions USING btree (expires_at);


--
-- TOC entry 6359 (class 1259 OID 18600)
-- Name: idx_sessions_session_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_sessions_session_id ON public.sessions USING btree (session_id);


--
-- TOC entry 6360 (class 1259 OID 18599)
-- Name: idx_sessions_user_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_sessions_user_id ON public.sessions USING btree (user_id);


--
-- TOC entry 6350 (class 1259 OID 17835)
-- Name: idx_user_notification_settings_type; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_user_notification_settings_type ON public.user_notification_settings USING btree (type);


--
-- TOC entry 6351 (class 1259 OID 17834)
-- Name: idx_user_notification_settings_user_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_user_notification_settings_user_id ON public.user_notification_settings USING btree (user_id);


--
-- TOC entry 6346 (class 1259 OID 19350)
-- Name: idx_users_preferred_ai_model; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_users_preferred_ai_model ON public.users USING btree (preferred_ai_model);


--
-- TOC entry 6349 (class 1259 OID 19349)
-- Name: users_preferred_ai_model_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX users_preferred_ai_model_idx ON public.users USING btree (preferred_ai_model);


--
-- TOC entry 6383 (class 1259 OID 27896)
-- Name: ai_conversations_user_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX ai_conversations_user_id_idx ON template.ai_conversations USING btree (user_id);


--
-- TOC entry 6384 (class 1259 OID 27897)
-- Name: ai_conversations_user_id_idx1; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX ai_conversations_user_id_idx1 ON template.ai_conversations USING btree (user_id);


--
-- TOC entry 6385 (class 1259 OID 27914)
-- Name: ai_messages_conversation_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX ai_messages_conversation_id_idx ON template.ai_messages USING btree (conversation_id);


--
-- TOC entry 6386 (class 1259 OID 27916)
-- Name: ai_messages_conversation_id_idx1; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX ai_messages_conversation_id_idx1 ON template.ai_messages USING btree (conversation_id);


--
-- TOC entry 6387 (class 1259 OID 27915)
-- Name: ai_messages_created_at_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX ai_messages_created_at_idx ON template.ai_messages USING btree (created_at);


--
-- TOC entry 6390 (class 1259 OID 27913)
-- Name: ai_messages_user_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX ai_messages_user_id_idx ON template.ai_messages USING btree (user_id);


--
-- TOC entry 6393 (class 1259 OID 27931)
-- Name: ai_suggestions_property_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX ai_suggestions_property_id_idx ON template.ai_suggestions USING btree (property_id);


--
-- TOC entry 6394 (class 1259 OID 27934)
-- Name: ai_suggestions_property_id_idx1; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX ai_suggestions_property_id_idx1 ON template.ai_suggestions USING btree (property_id);


--
-- TOC entry 6395 (class 1259 OID 27932)
-- Name: ai_suggestions_type_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX ai_suggestions_type_idx ON template.ai_suggestions USING btree (type);


--
-- TOC entry 6396 (class 1259 OID 27930)
-- Name: ai_suggestions_user_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX ai_suggestions_user_id_idx ON template.ai_suggestions USING btree (user_id);


--
-- TOC entry 6397 (class 1259 OID 27933)
-- Name: ai_suggestions_user_id_idx1; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX ai_suggestions_user_id_idx1 ON template.ai_suggestions USING btree (user_id);


--
-- TOC entry 6400 (class 1259 OID 27942)
-- Name: analysis_configs_property_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX analysis_configs_property_id_idx ON template.analysis_configs USING btree (property_id);


--
-- TOC entry 6401 (class 1259 OID 27943)
-- Name: analysis_configs_user_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX analysis_configs_user_id_idx ON template.analysis_configs USING btree (user_id);


--
-- TOC entry 6406 (class 1259 OID 28152)
-- Name: automatic_reminders_next_trigger_date_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX automatic_reminders_next_trigger_date_idx ON template.automatic_reminders USING btree (next_trigger_date);


--
-- TOC entry 6409 (class 1259 OID 28153)
-- Name: automatic_reminders_status_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX automatic_reminders_status_idx ON template.automatic_reminders USING btree (status);


--
-- TOC entry 6410 (class 1259 OID 28151)
-- Name: automatic_reminders_user_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX automatic_reminders_user_id_idx ON template.automatic_reminders USING btree (user_id);


--
-- TOC entry 6620 (class 1259 OID 43629)
-- Name: idx_ai_tokens_user_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_ai_tokens_user_id ON template.ai_tokens USING btree (user_id);


--
-- TOC entry 6623 (class 1259 OID 43632)
-- Name: idx_ai_usage_conversation_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_ai_usage_conversation_id ON template.ai_usage USING btree (conversation_id);


--
-- TOC entry 6624 (class 1259 OID 43631)
-- Name: idx_ai_usage_message_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_ai_usage_message_id ON template.ai_usage USING btree (message_id);


--
-- TOC entry 6625 (class 1259 OID 43630)
-- Name: idx_ai_usage_user_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_ai_usage_user_id ON template.ai_usage USING btree (user_id);


--
-- TOC entry 6612 (class 1259 OID 41145)
-- Name: idx_form_responses_form_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_form_responses_form_id ON template.form_responses USING btree (form_id);


--
-- TOC entry 6599 (class 1259 OID 41144)
-- Name: idx_forms_user_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_forms_user_id ON template.forms USING btree (user_id);


--
-- TOC entry 6604 (class 1259 OID 41147)
-- Name: idx_link_forms_form_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_link_forms_form_id ON template.link_forms USING btree (form_id);


--
-- TOC entry 6605 (class 1259 OID 41146)
-- Name: idx_link_forms_link_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_link_forms_link_id ON template.link_forms USING btree (link_id);


--
-- TOC entry 6592 (class 1259 OID 41175)
-- Name: idx_link_profiles_user_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_link_profiles_user_id ON template.link_profiles USING btree (user_id);


--
-- TOC entry 6600 (class 1259 OID 41142)
-- Name: idx_links_profile_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_links_profile_id ON template.links USING btree (profile_id);


--
-- TOC entry 6601 (class 1259 OID 41143)
-- Name: idx_links_user_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_links_user_id ON template.links USING btree (user_id);


--
-- TOC entry 6644 (class 1259 OID 44672)
-- Name: idx_users_public_user_id; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX idx_users_public_user_id ON template.users USING btree (public_user_id);


--
-- TOC entry 6433 (class 1259 OID 28360)
-- Name: pdf_document_preferences_configuration_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX pdf_document_preferences_configuration_id_idx ON template.pdf_document_preferences USING btree (configuration_id);


--
-- TOC entry 6425 (class 1259 OID 28292)
-- Name: rent_receipts_property_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX rent_receipts_property_id_idx ON template.rent_receipts USING btree (property_id);


--
-- TOC entry 6426 (class 1259 OID 28294)
-- Name: rent_receipts_status_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX rent_receipts_status_idx ON template.rent_receipts USING btree (status);


--
-- TOC entry 6427 (class 1259 OID 28291)
-- Name: rent_receipts_tenant_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX rent_receipts_tenant_id_idx ON template.rent_receipts USING btree (tenant_id);


--
-- TOC entry 6428 (class 1259 OID 28293)
-- Name: rent_receipts_transaction_id_idx; Type: INDEX; Schema: template; Owner: postgres
--

CREATE INDEX rent_receipts_transaction_id_idx ON template.rent_receipts USING btree (transaction_id);


--
-- TOC entry 6842 (class 2620 OID 45434)
-- Name: ai_usage after_ai_usage_insert; Type: TRIGGER; Schema: client_109; Owner: postgres
--

CREATE TRIGGER after_ai_usage_insert AFTER INSERT ON client_109.ai_usage FOR EACH ROW EXECUTE FUNCTION client_109.after_ai_usage();


--
-- TOC entry 6836 (class 2620 OID 45421)
-- Name: ai_messages before_ai_message_insert; Type: TRIGGER; Schema: client_109; Owner: postgres
--

CREATE TRIGGER before_ai_message_insert BEFORE INSERT ON client_109.ai_messages FOR EACH ROW EXECUTE FUNCTION template.set_preferred_model();


--
-- TOC entry 6843 (class 2620 OID 45452)
-- Name: ai_usage sync_ai_usage_after_delete; Type: TRIGGER; Schema: client_109; Owner: postgres
--

CREATE TRIGGER sync_ai_usage_after_delete AFTER DELETE ON client_109.ai_usage FOR EACH ROW EXECUTE FUNCTION client_109.sync_ai_usage_to_request_count();


--
-- TOC entry 6844 (class 2620 OID 45451)
-- Name: ai_usage sync_ai_usage_after_insert; Type: TRIGGER; Schema: client_109; Owner: postgres
--

CREATE TRIGGER sync_ai_usage_after_insert AFTER INSERT ON client_109.ai_usage FOR EACH ROW EXECUTE FUNCTION client_109.sync_ai_usage_to_request_count();


--
-- TOC entry 6837 (class 2620 OID 44548)
-- Name: documents trigger_update_storage_after_documents_change; Type: TRIGGER; Schema: client_109; Owner: postgres
--

CREATE TRIGGER trigger_update_storage_after_documents_change AFTER INSERT OR DELETE OR UPDATE ON client_109.documents FOR EACH STATEMENT EXECUTE FUNCTION public.update_client_storage_on_change();


--
-- TOC entry 6848 (class 2620 OID 45431)
-- Name: ai_usage after_ai_usage_insert; Type: TRIGGER; Schema: client_129; Owner: postgres
--

CREATE TRIGGER after_ai_usage_insert AFTER INSERT ON client_129.ai_usage FOR EACH ROW EXECUTE FUNCTION client_129.after_ai_usage();


--
-- TOC entry 6849 (class 2620 OID 45419)
-- Name: ai_messages before_ai_message_insert; Type: TRIGGER; Schema: client_129; Owner: postgres
--

CREATE TRIGGER before_ai_message_insert BEFORE INSERT ON client_129.ai_messages FOR EACH ROW EXECUTE FUNCTION template.set_preferred_model();


--
-- TOC entry 6833 (class 2620 OID 45397)
-- Name: users after_user_insert; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER after_user_insert AFTER INSERT ON public.users FOR EACH ROW EXECUTE FUNCTION public.after_user_insert_function();


--
-- TOC entry 6834 (class 2620 OID 38516)
-- Name: users create_schema_for_new_client; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER create_schema_for_new_client AFTER INSERT ON public.users FOR EACH ROW EXECUTE FUNCTION public.create_schema_for_new_client();


--
-- TOC entry 6838 (class 2620 OID 41503)
-- Name: marketplace_providers set_timestamp_marketplace_providers; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER set_timestamp_marketplace_providers BEFORE UPDATE ON public.marketplace_providers FOR EACH ROW EXECUTE FUNCTION public.update_modified_column();


--
-- TOC entry 6846 (class 2620 OID 44602)
-- Name: user_storage_subscriptions update_storage_limit_on_subscription_change; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_storage_limit_on_subscription_change AFTER INSERT OR UPDATE OF is_active, plan_id ON public.user_storage_subscriptions FOR EACH ROW EXECUTE FUNCTION public.update_storage_limit_on_subscription_change();


--
-- TOC entry 6839 (class 2620 OID 45422)
-- Name: ai_usage after_ai_usage_insert; Type: TRIGGER; Schema: template; Owner: postgres
--

CREATE TRIGGER after_ai_usage_insert AFTER INSERT ON template.ai_usage FOR EACH ROW EXECUTE FUNCTION template.increment_user_request_count();


--
-- TOC entry 6835 (class 2620 OID 45423)
-- Name: ai_messages before_ai_message_insert; Type: TRIGGER; Schema: template; Owner: postgres
--

CREATE TRIGGER before_ai_message_insert BEFORE INSERT ON template.ai_messages FOR EACH ROW EXECUTE FUNCTION template.set_preferred_model();


--
-- TOC entry 6840 (class 2620 OID 45443)
-- Name: ai_usage sync_ai_usage_after_delete; Type: TRIGGER; Schema: template; Owner: postgres
--

CREATE TRIGGER sync_ai_usage_after_delete AFTER DELETE ON template.ai_usage FOR EACH ROW EXECUTE FUNCTION template.sync_ai_usage_to_request_count();


--
-- TOC entry 6841 (class 2620 OID 45442)
-- Name: ai_usage sync_ai_usage_after_insert; Type: TRIGGER; Schema: template; Owner: postgres
--

CREATE TRIGGER sync_ai_usage_after_insert AFTER INSERT ON template.ai_usage FOR EACH ROW EXECUTE FUNCTION template.sync_ai_usage_to_request_count();


--
-- TOC entry 6845 (class 2620 OID 44464)
-- Name: storage_management update_storage_management_timestamp; Type: TRIGGER; Schema: template; Owner: postgres
--

CREATE TRIGGER update_storage_management_timestamp BEFORE UPDATE ON template.storage_management FOR EACH ROW EXECUTE FUNCTION template.update_storage_management_timestamp();


--
-- TOC entry 6847 (class 2620 OID 44677)
-- Name: users update_users_timestamp; Type: TRIGGER; Schema: template; Owner: postgres
--

CREATE TRIGGER update_users_timestamp BEFORE UPDATE ON template.users FOR EACH ROW EXECUTE FUNCTION template.update_timestamp();


--
-- TOC entry 6804 (class 2606 OID 43667)
-- Name: ai_conversations ai_conversations_user_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_conversations
    ADD CONSTRAINT ai_conversations_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 6805 (class 2606 OID 43653)
-- Name: ai_messages ai_messages_conversation_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_messages
    ADD CONSTRAINT ai_messages_conversation_id_fkey FOREIGN KEY (conversation_id) REFERENCES client_109.ai_conversations(id);


--
-- TOC entry 6806 (class 2606 OID 43662)
-- Name: ai_messages ai_messages_user_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_messages
    ADD CONSTRAINT ai_messages_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 6807 (class 2606 OID 43672)
-- Name: ai_suggestions ai_suggestions_user_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_suggestions
    ADD CONSTRAINT ai_suggestions_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 6826 (class 2606 OID 43609)
-- Name: ai_tokens ai_tokens_user_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_tokens
    ADD CONSTRAINT ai_tokens_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 6827 (class 2606 OID 43624)
-- Name: ai_usage ai_usage_conversation_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_usage
    ADD CONSTRAINT ai_usage_conversation_id_fkey FOREIGN KEY (conversation_id) REFERENCES client_109.ai_conversations(id);


--
-- TOC entry 6828 (class 2606 OID 43619)
-- Name: ai_usage ai_usage_message_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_usage
    ADD CONSTRAINT ai_usage_message_id_fkey FOREIGN KEY (message_id) REFERENCES client_109.ai_messages(id);


--
-- TOC entry 6829 (class 2606 OID 43614)
-- Name: ai_usage ai_usage_user_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.ai_usage
    ADD CONSTRAINT ai_usage_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 6813 (class 2606 OID 41247)
-- Name: form_responses fk_form_responses_form; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.form_responses
    ADD CONSTRAINT fk_form_responses_form FOREIGN KEY (form_id) REFERENCES client_109.forms(id) ON DELETE CASCADE;


--
-- TOC entry 6814 (class 2606 OID 41252)
-- Name: form_responses fk_form_responses_link; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.form_responses
    ADD CONSTRAINT fk_form_responses_link FOREIGN KEY (link_id) REFERENCES client_109.links(id) ON DELETE SET NULL;


--
-- TOC entry 6820 (class 2606 OID 41272)
-- Name: form_submissions fk_form_submissions_form; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.form_submissions
    ADD CONSTRAINT fk_form_submissions_form FOREIGN KEY (form_id) REFERENCES client_109.forms(id) ON DELETE SET NULL;


--
-- TOC entry 6821 (class 2606 OID 41257)
-- Name: form_submissions fk_form_submissions_link; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.form_submissions
    ADD CONSTRAINT fk_form_submissions_link FOREIGN KEY (link_id) REFERENCES client_109.links(id) ON DELETE CASCADE;


--
-- TOC entry 6809 (class 2606 OID 41267)
-- Name: link_forms fk_link_forms_form; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.link_forms
    ADD CONSTRAINT fk_link_forms_form FOREIGN KEY (form_id) REFERENCES client_109.forms(id) ON DELETE CASCADE;


--
-- TOC entry 6810 (class 2606 OID 41262)
-- Name: link_forms fk_link_forms_link; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.link_forms
    ADD CONSTRAINT fk_link_forms_link FOREIGN KEY (link_id) REFERENCES client_109.links(id) ON DELETE CASCADE;


--
-- TOC entry 6815 (class 2606 OID 41032)
-- Name: form_responses form_responses_form_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.form_responses
    ADD CONSTRAINT form_responses_form_id_fkey FOREIGN KEY (form_id) REFERENCES client_109.forms(id) ON DELETE CASCADE;


--
-- TOC entry 6811 (class 2606 OID 41018)
-- Name: link_forms link_forms_form_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.link_forms
    ADD CONSTRAINT link_forms_form_id_fkey FOREIGN KEY (form_id) REFERENCES client_109.forms(id) ON DELETE CASCADE;


--
-- TOC entry 6812 (class 2606 OID 41013)
-- Name: link_forms link_forms_link_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.link_forms
    ADD CONSTRAINT link_forms_link_id_fkey FOREIGN KEY (link_id) REFERENCES client_109.links(id) ON DELETE CASCADE;


--
-- TOC entry 6808 (class 2606 OID 40999)
-- Name: links links_profile_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.links
    ADD CONSTRAINT links_profile_id_fkey FOREIGN KEY (profile_id) REFERENCES client_109.link_profiles(id) ON DELETE CASCADE;


--
-- TOC entry 6832 (class 2606 OID 44632)
-- Name: users users_public_user_id_fkey; Type: FK CONSTRAINT; Schema: client_109; Owner: postgres
--

ALTER TABLE ONLY client_109.users
    ADD CONSTRAINT users_public_user_id_fkey FOREIGN KEY (public_user_id) REFERENCES public.users(id);


--
-- TOC entry 6793 (class 2606 OID 18457)
-- Name: billing_transactions billing_transactions_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.billing_transactions
    ADD CONSTRAINT billing_transactions_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 6795 (class 2606 OID 27063)
-- Name: schema_mapping schema_mapping_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.schema_mapping
    ADD CONSTRAINT schema_mapping_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 6794 (class 2606 OID 18589)
-- Name: sessions sessions_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sessions
    ADD CONSTRAINT sessions_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 6792 (class 2606 OID 17829)
-- Name: user_notification_settings user_notification_settings_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_notification_settings
    ADD CONSTRAINT user_notification_settings_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- TOC entry 6830 (class 2606 OID 44580)
-- Name: user_storage_subscriptions user_storage_subscriptions_plan_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_storage_subscriptions
    ADD CONSTRAINT user_storage_subscriptions_plan_id_fkey FOREIGN KEY (plan_id) REFERENCES public.storage_plans(id);


--
-- TOC entry 6831 (class 2606 OID 44575)
-- Name: user_storage_subscriptions user_storage_subscriptions_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_storage_subscriptions
    ADD CONSTRAINT user_storage_subscriptions_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 6822 (class 2606 OID 43563)
-- Name: ai_tokens ai_tokens_user_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.ai_tokens
    ADD CONSTRAINT ai_tokens_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 6823 (class 2606 OID 43578)
-- Name: ai_usage ai_usage_conversation_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.ai_usage
    ADD CONSTRAINT ai_usage_conversation_id_fkey FOREIGN KEY (conversation_id) REFERENCES template.ai_conversations(id);


--
-- TOC entry 6824 (class 2606 OID 43573)
-- Name: ai_usage ai_usage_message_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.ai_usage
    ADD CONSTRAINT ai_usage_message_id_fkey FOREIGN KEY (message_id) REFERENCES template.ai_messages(id);


--
-- TOC entry 6825 (class 2606 OID 43568)
-- Name: ai_usage ai_usage_user_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.ai_usage
    ADD CONSTRAINT ai_usage_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 6796 (class 2606 OID 27452)
-- Name: feedbacks feedbacks_property_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.feedbacks
    ADD CONSTRAINT feedbacks_property_id_fkey FOREIGN KEY (property_id) REFERENCES template.properties(id);


--
-- TOC entry 6797 (class 2606 OID 30332)
-- Name: feedbacks feedbacks_tenant_info_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.feedbacks
    ADD CONSTRAINT feedbacks_tenant_info_fkey FOREIGN KEY (tenant_info_id) REFERENCES template.tenants_info(id) ON DELETE SET NULL;


--
-- TOC entry 6819 (class 2606 OID 41137)
-- Name: form_responses form_responses_form_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.form_responses
    ADD CONSTRAINT form_responses_form_id_fkey FOREIGN KEY (form_id) REFERENCES template.forms(id) ON DELETE CASCADE;


--
-- TOC entry 6817 (class 2606 OID 41123)
-- Name: link_forms link_forms_form_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.link_forms
    ADD CONSTRAINT link_forms_form_id_fkey FOREIGN KEY (form_id) REFERENCES template.forms(id) ON DELETE CASCADE;


--
-- TOC entry 6818 (class 2606 OID 41118)
-- Name: link_forms link_forms_link_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.link_forms
    ADD CONSTRAINT link_forms_link_id_fkey FOREIGN KEY (link_id) REFERENCES template.links(id) ON DELETE CASCADE;


--
-- TOC entry 6816 (class 2606 OID 41104)
-- Name: links links_profile_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.links
    ADD CONSTRAINT links_profile_id_fkey FOREIGN KEY (profile_id) REFERENCES template.link_profiles(id) ON DELETE CASCADE;


--
-- TOC entry 6799 (class 2606 OID 27575)
-- Name: property_analyses property_analyses_property_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.property_analyses
    ADD CONSTRAINT property_analyses_property_id_fkey FOREIGN KEY (property_id) REFERENCES template.properties(id);


--
-- TOC entry 6798 (class 2606 OID 27559)
-- Name: property_coordinates property_coordinates_property_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.property_coordinates
    ADD CONSTRAINT property_coordinates_property_id_fkey FOREIGN KEY (property_id) REFERENCES template.properties(id);


--
-- TOC entry 6800 (class 2606 OID 30308)
-- Name: tenant_history tenant_history_tenant_info_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.tenant_history
    ADD CONSTRAINT tenant_history_tenant_info_fkey FOREIGN KEY (tenant_info_id) REFERENCES template.tenants_info(id) ON DELETE SET NULL;


--
-- TOC entry 6801 (class 2606 OID 30350)
-- Name: tenant_history tenant_history_updated_by_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.tenant_history
    ADD CONSTRAINT tenant_history_updated_by_fkey FOREIGN KEY (updated_by) REFERENCES public.users(id);


--
-- TOC entry 6802 (class 2606 OID 30303)
-- Name: tenants tenants_tenant_info_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.tenants
    ADD CONSTRAINT tenants_tenant_info_fkey FOREIGN KEY (tenant_info_id) REFERENCES template.tenants_info(id) ON DELETE SET NULL;


--
-- TOC entry 6803 (class 2606 OID 30406)
-- Name: transaction_attachments transaction_attachments_transaction_id_fkey; Type: FK CONSTRAINT; Schema: template; Owner: postgres
--

ALTER TABLE ONLY template.transaction_attachments
    ADD CONSTRAINT transaction_attachments_transaction_id_fkey FOREIGN KEY (transaction_id) REFERENCES template.transactions(id) ON DELETE CASCADE;


--
-- TOC entry 7314 (class 0 OID 0)
-- Dependencies: 7313
-- Name: DATABASE property_manager; Type: ACL; Schema: -; Owner: postgres
--

GRANT CONNECT ON DATABASE property_manager TO clients;


--
-- TOC entry 7315 (class 0 OID 0)
-- Dependencies: 7
-- Name: SCHEMA public; Type: ACL; Schema: -; Owner: pg_database_owner
--

GRANT USAGE ON SCHEMA public TO clients;
GRANT USAGE ON SCHEMA public TO client_role_31;


--
-- TOC entry 7317 (class 0 OID 0)
-- Dependencies: 593
-- Name: FUNCTION armor(bytea); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.armor(bytea) TO clients;


--
-- TOC entry 7318 (class 0 OID 0)
-- Dependencies: 594
-- Name: FUNCTION armor(bytea, text[], text[]); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.armor(bytea, text[], text[]) TO clients;


--
-- TOC entry 7319 (class 0 OID 0)
-- Dependencies: 597
-- Name: FUNCTION check_auth(p_username text, p_password text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.check_auth(p_username text, p_password text) TO clients;


--
-- TOC entry 7320 (class 0 OID 0)
-- Dependencies: 568
-- Name: FUNCTION crypt(text, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.crypt(text, text) TO clients;


--
-- TOC entry 7321 (class 0 OID 0)
-- Dependencies: 595
-- Name: FUNCTION dearmor(text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.dearmor(text) TO clients;


--
-- TOC entry 7322 (class 0 OID 0)
-- Dependencies: 565
-- Name: FUNCTION decrypt(bytea, bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.decrypt(bytea, bytea, text) TO clients;


--
-- TOC entry 7323 (class 0 OID 0)
-- Dependencies: 576
-- Name: FUNCTION decrypt_iv(bytea, bytea, bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.decrypt_iv(bytea, bytea, bytea, text) TO clients;


--
-- TOC entry 7324 (class 0 OID 0)
-- Dependencies: 571
-- Name: FUNCTION digest(bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.digest(bytea, text) TO clients;


--
-- TOC entry 7325 (class 0 OID 0)
-- Dependencies: 560
-- Name: FUNCTION digest(text, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.digest(text, text) TO clients;


--
-- TOC entry 7326 (class 0 OID 0)
-- Dependencies: 561
-- Name: FUNCTION enable_rls_on_table(table_name text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.enable_rls_on_table(table_name text) TO clients;


--
-- TOC entry 7327 (class 0 OID 0)
-- Dependencies: 575
-- Name: FUNCTION encrypt(bytea, bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.encrypt(bytea, bytea, text) TO clients;


--
-- TOC entry 7328 (class 0 OID 0)
-- Dependencies: 566
-- Name: FUNCTION encrypt_iv(bytea, bytea, bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.encrypt_iv(bytea, bytea, bytea, text) TO clients;


--
-- TOC entry 7329 (class 0 OID 0)
-- Dependencies: 577
-- Name: FUNCTION gen_random_bytes(integer); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.gen_random_bytes(integer) TO clients;


--
-- TOC entry 7330 (class 0 OID 0)
-- Dependencies: 578
-- Name: FUNCTION gen_random_uuid(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.gen_random_uuid() TO clients;


--
-- TOC entry 7331 (class 0 OID 0)
-- Dependencies: 569
-- Name: FUNCTION gen_salt(text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.gen_salt(text) TO clients;


--
-- TOC entry 7332 (class 0 OID 0)
-- Dependencies: 574
-- Name: FUNCTION gen_salt(text, integer); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.gen_salt(text, integer) TO clients;


--
-- TOC entry 7333 (class 0 OID 0)
-- Dependencies: 567
-- Name: FUNCTION hmac(bytea, bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.hmac(bytea, bytea, text) TO clients;


--
-- TOC entry 7334 (class 0 OID 0)
-- Dependencies: 572
-- Name: FUNCTION hmac(text, text, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.hmac(text, text, text) TO clients;


--
-- TOC entry 7335 (class 0 OID 0)
-- Dependencies: 563
-- Name: FUNCTION is_admin(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.is_admin() TO clients;


--
-- TOC entry 7337 (class 0 OID 0)
-- Dependencies: 599
-- Name: FUNCTION log_table_changes(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.log_table_changes() TO clients;


--
-- TOC entry 7338 (class 0 OID 0)
-- Dependencies: 596
-- Name: FUNCTION pgp_armor_headers(text, OUT key text, OUT value text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_armor_headers(text, OUT key text, OUT value text) TO clients;


--
-- TOC entry 7339 (class 0 OID 0)
-- Dependencies: 592
-- Name: FUNCTION pgp_key_id(bytea); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_key_id(bytea) TO clients;


--
-- TOC entry 7340 (class 0 OID 0)
-- Dependencies: 551
-- Name: FUNCTION pgp_pub_decrypt(bytea, bytea); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_pub_decrypt(bytea, bytea) TO clients;


--
-- TOC entry 7341 (class 0 OID 0)
-- Dependencies: 553
-- Name: FUNCTION pgp_pub_decrypt(bytea, bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_pub_decrypt(bytea, bytea, text) TO clients;


--
-- TOC entry 7342 (class 0 OID 0)
-- Dependencies: 555
-- Name: FUNCTION pgp_pub_decrypt(bytea, bytea, text, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_pub_decrypt(bytea, bytea, text, text) TO clients;


--
-- TOC entry 7343 (class 0 OID 0)
-- Dependencies: 552
-- Name: FUNCTION pgp_pub_decrypt_bytea(bytea, bytea); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_pub_decrypt_bytea(bytea, bytea) TO clients;


--
-- TOC entry 7344 (class 0 OID 0)
-- Dependencies: 554
-- Name: FUNCTION pgp_pub_decrypt_bytea(bytea, bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_pub_decrypt_bytea(bytea, bytea, text) TO clients;


--
-- TOC entry 7345 (class 0 OID 0)
-- Dependencies: 556
-- Name: FUNCTION pgp_pub_decrypt_bytea(bytea, bytea, text, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_pub_decrypt_bytea(bytea, bytea, text, text) TO clients;


--
-- TOC entry 7346 (class 0 OID 0)
-- Dependencies: 590
-- Name: FUNCTION pgp_pub_encrypt(text, bytea); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_pub_encrypt(text, bytea) TO clients;


--
-- TOC entry 7347 (class 0 OID 0)
-- Dependencies: 557
-- Name: FUNCTION pgp_pub_encrypt(text, bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_pub_encrypt(text, bytea, text) TO clients;


--
-- TOC entry 7348 (class 0 OID 0)
-- Dependencies: 591
-- Name: FUNCTION pgp_pub_encrypt_bytea(bytea, bytea); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_pub_encrypt_bytea(bytea, bytea) TO clients;


--
-- TOC entry 7349 (class 0 OID 0)
-- Dependencies: 558
-- Name: FUNCTION pgp_pub_encrypt_bytea(bytea, bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_pub_encrypt_bytea(bytea, bytea, text) TO clients;


--
-- TOC entry 7350 (class 0 OID 0)
-- Dependencies: 586
-- Name: FUNCTION pgp_sym_decrypt(bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_sym_decrypt(bytea, text) TO clients;


--
-- TOC entry 7351 (class 0 OID 0)
-- Dependencies: 588
-- Name: FUNCTION pgp_sym_decrypt(bytea, text, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_sym_decrypt(bytea, text, text) TO clients;


--
-- TOC entry 7352 (class 0 OID 0)
-- Dependencies: 587
-- Name: FUNCTION pgp_sym_decrypt_bytea(bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_sym_decrypt_bytea(bytea, text) TO clients;


--
-- TOC entry 7353 (class 0 OID 0)
-- Dependencies: 589
-- Name: FUNCTION pgp_sym_decrypt_bytea(bytea, text, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_sym_decrypt_bytea(bytea, text, text) TO clients;


--
-- TOC entry 7354 (class 0 OID 0)
-- Dependencies: 581
-- Name: FUNCTION pgp_sym_encrypt(text, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_sym_encrypt(text, text) TO clients;


--
-- TOC entry 7355 (class 0 OID 0)
-- Dependencies: 584
-- Name: FUNCTION pgp_sym_encrypt(text, text, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_sym_encrypt(text, text, text) TO clients;


--
-- TOC entry 7356 (class 0 OID 0)
-- Dependencies: 583
-- Name: FUNCTION pgp_sym_encrypt_bytea(bytea, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_sym_encrypt_bytea(bytea, text) TO clients;


--
-- TOC entry 7357 (class 0 OID 0)
-- Dependencies: 585
-- Name: FUNCTION pgp_sym_encrypt_bytea(bytea, text, text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.pgp_sym_encrypt_bytea(bytea, text, text) TO clients;


--
-- TOC entry 7358 (class 0 OID 0)
-- Dependencies: 573
-- Name: FUNCTION recalculate_user_storage(user_id_param integer); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.recalculate_user_storage(user_id_param integer) TO clients;


--
-- TOC entry 7359 (class 0 OID 0)
-- Dependencies: 598
-- Name: FUNCTION set_app_variables(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.set_app_variables() TO clients;


--
-- TOC entry 7361 (class 0 OID 0)
-- Dependencies: 570
-- Name: FUNCTION sync_theme_colors(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.sync_theme_colors() TO clients;


--
-- TOC entry 7362 (class 0 OID 0)
-- Dependencies: 559
-- Name: FUNCTION test_rls_config(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.test_rls_config() TO clients;


--
-- TOC entry 7363 (class 0 OID 0)
-- Dependencies: 549
-- Name: FUNCTION update_modified_column(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.update_modified_column() TO clients;


--
-- TOC entry 7364 (class 0 OID 0)
-- Dependencies: 582
-- Name: FUNCTION update_storage_on_document_change(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.update_storage_on_document_change() TO clients;


--
-- TOC entry 7365 (class 0 OID 0)
-- Dependencies: 562
-- Name: FUNCTION update_user_storage_quota(p_user_id integer, p_extension_id integer); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.update_user_storage_quota(p_user_id integer, p_extension_id integer) TO clients;


--
-- TOC entry 7373 (class 0 OID 0)
-- Dependencies: 225
-- Name: TABLE users; Type: ACL; Schema: public; Owner: postgres
--

GRANT SELECT ON TABLE public.users TO clients;
GRANT SELECT ON TABLE public.users TO client_role_31;


--
-- TOC entry 7375 (class 0 OID 0)
-- Dependencies: 230
-- Name: TABLE billing_transactions; Type: ACL; Schema: public; Owner: postgres
--

GRANT SELECT ON TABLE public.billing_transactions TO clients;


--
-- TOC entry 7377 (class 0 OID 0)
-- Dependencies: 229
-- Name: SEQUENCE billing_transactions_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT USAGE ON SEQUENCE public.billing_transactions_id_seq TO clients;


--
-- TOC entry 7381 (class 0 OID 0)
-- Dependencies: 232
-- Name: TABLE sessions; Type: ACL; Schema: public; Owner: postgres
--

GRANT SELECT ON TABLE public.sessions TO clients;
GRANT SELECT ON TABLE public.sessions TO client_role_31;


--
-- TOC entry 7383 (class 0 OID 0)
-- Dependencies: 231
-- Name: SEQUENCE sessions_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT USAGE ON SEQUENCE public.sessions_id_seq TO clients;


--
-- TOC entry 7387 (class 0 OID 0)
-- Dependencies: 228
-- Name: TABLE user_notification_settings; Type: ACL; Schema: public; Owner: postgres
--

GRANT SELECT ON TABLE public.user_notification_settings TO clients;


--
-- TOC entry 7389 (class 0 OID 0)
-- Dependencies: 227
-- Name: SEQUENCE user_notification_settings_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT USAGE ON SEQUENCE public.user_notification_settings_id_seq TO clients;


--
-- TOC entry 7392 (class 0 OID 0)
-- Dependencies: 226
-- Name: SEQUENCE users_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT USAGE ON SEQUENCE public.users_id_seq TO clients;


--
-- TOC entry 2925 (class 826 OID 39861)
-- Name: DEFAULT PRIVILEGES FOR SEQUENCES; Type: DEFAULT ACL; Schema: client_109; Owner: postgres
--

ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA client_109 GRANT ALL ON SEQUENCES TO postgres;


--
-- TOC entry 2924 (class 826 OID 39860)
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: client_109; Owner: postgres
--

ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA client_109 GRANT ALL ON TABLES TO postgres;


--
-- TOC entry 2927 (class 826 OID 44681)
-- Name: DEFAULT PRIVILEGES FOR SEQUENCES; Type: DEFAULT ACL; Schema: client_129; Owner: postgres
--

ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA client_129 GRANT ALL ON SEQUENCES TO postgres;


--
-- TOC entry 2926 (class 826 OID 44680)
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: client_129; Owner: postgres
--

ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA client_129 GRANT ALL ON TABLES TO postgres;


-- Completed on 2025-05-13 23:48:59

--
-- PostgreSQL database dump complete
--

-- Completed on 2025-05-13 23:48:59

--
-- PostgreSQL database cluster dump complete
--

